(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{97469:function(e,t,n){"use strict";n.d(t,{G:function(){return o}});var r=n(52983),i=n(93258);if(!r||!r.createContext)throw Error(i.I1);var o=r.createContext({client:null,factory:null,isReady:!1,isReadyFromCache:!1,isTimedout:!1,hasTimedout:!1,lastUpdate:0,isDestroyed:!1})},59258:function(e,t,n){"use strict";n.d(t,{q:function(){return nt}});var r,i,o,a,s,u,c,l,f,h,d,p,m,g,extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var tslib_es6_assign=function(){return(tslib_es6_assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var y=n(52983),v=n(97469),b=n(93258),S=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,E=!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var i={};if("abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},i)).join(""))return!1;return!0}catch(e){return!1}}()?function(e,t){for(var n,r,i=function(e){if(null==e)throw TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))T.call(n,a)&&(i[a]=n[a]);if(S){r=S(n);for(var s=0;s<r.length;s++)C.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i}:Object.assign,_="settings",w="Factory instantiation",k="engine",M=k+":combiner: ",I=k+":matcher: ",R=k+":value: ",A="sync",O=A+":sync-manager: ",L=A+":offline: ",x=A+":streaming: ",N=A+":featureflag-changes: ",F=A+":my-segments: ",D=A+":polling-manager: ",U=A+":submitter: ",P="impressions-tracker: ",K="events-tracker: ",j="cleanup: ",B="Global fetch API is not available.",z="control",q={treatment:z,config:null},W="IMPRESSION",G="EVENT",H="DEBUG",Q="OPTIMIZED",V="NONE",X="localhost",Z="standalone",Y="consumer",$="consumer_partial",J="MEMORY",ee="LOCALSTORAGE",et="GRANTED",en="DECLINED",er="UNKNOWN",ei={headers:{"Cache-Control":"no-cache"}};function userKeyToQueryParam(e){return"users="+encodeURIComponent(e)}function splitApiFactory(e,t,n){var r,i,o,a,s,u,c,l,f,h,d,p=e.urls,m=e.sync.__splitFiltersValidation&&e.sync.__splitFiltersValidation.queryString,g=e.sync.impressionsMode,y=(r=t.getFetch,i=t.getOptions,o=e.log,a=e.core.authorizationKey,s=e.version,c=(u=e.runtime).ip,l=u.hostname,f=i&&i(),(h=r&&r())||o.error(303,[B]),d={Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a,SplitSDKVersion:s},c&&(d.SplitSDKMachineIP=c),l&&(d.SplitSDKMachineName=l),function(e,t,n,r){void 0===t&&(t={}),void 0===n&&(n=function(){}),void 0===r&&(r=!1);var i=E({headers:t.headers?E({},d,t.headers):d,method:t.method||"GET",body:t.body},f);return h?h(e,i).then(function(e){return e.ok?(n(),e):e.text().then(function(t){return Promise.reject({response:e,message:t})})}).catch(function(t){var i=t&&t.response,a="";a=i?404===i.status?"Invalid SDK key or resource not found.":t.message:t.message||"Network Error",i&&403===i.status||o[r?"info":"error"](322,[i?i.status:"NO_STATUS",e,a]);var s=Error(a);throw s.statusCode=i&&i.status,n(s),s}):Promise.reject(Error(B))});return{getSdkAPIHealthCheck:function(){return y(p.sdk+"/version").then(function(){return!0}).catch(function(){return!1})},getEventsAPIHealthCheck:function(){return y(p.events+"/version").then(function(){return!0}).catch(function(){return!1})},fetchAuth:function(e){var t=p.auth+"/v2/auth";if(e){var r=e.map(userKeyToQueryParam).join("&");r&&(t+="?"+r)}return y(t,void 0,n.trackHttp("to"))},fetchSplitChanges:function(e,t,r){return y(p.sdk+"/splitChanges?since="+e+(r?"&till="+r:"")+(m||""),t?ei:void 0,n.trackHttp("sp"))},fetchSegmentChanges:function(e,t,r,i){return y(p.sdk+"/segmentChanges/"+t+"?since="+e+(i?"&till="+i:""),r?ei:void 0,n.trackHttp("se"))},fetchMySegments:function(e,t){return y(p.sdk+"/mySegments/"+encodeURIComponent(e),t?ei:void 0,n.trackHttp("ms"))},postEventsBulk:function(e,t){return y(p.events+"/events/bulk",{method:"POST",body:e,headers:t},n.trackHttp("ev"))},postTestImpressionsBulk:function(e,t){return y(p.events+"/testImpressions/bulk",{method:"POST",body:e,headers:E({SplitSDKImpressionsMode:g},t)},n.trackHttp("im"))},postTestImpressionsCount:function(e,t){return y(p.events+"/testImpressions/count",{method:"POST",body:e,headers:t},n.trackHttp("ic"))},postUniqueKeysBulkCs:function(e,t){return y(p.telemetry+"/v1/keys/cs",{method:"POST",body:e,headers:t},n.trackHttp("te"))},postUniqueKeysBulkSs:function(e,t){return y(p.telemetry+"/v1/keys/ss",{method:"POST",body:e,headers:t},n.trackHttp("te"))},postMetricsConfig:function(e,t){return y(p.telemetry+"/v1/metrics/config",{method:"POST",body:e,headers:t},n.trackHttp("te"),!0)},postMetricsUsage:function(e,t){return y(p.telemetry+"/v1/metrics/usage",{method:"POST",body:e,headers:t},n.trackHttp("te"),!0)}}}function syncTaskFactory(e,t,n,r){void 0===r&&(r="task");var i,o,a,s=0,u=!1,c=0;function execute(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return s++,e.debug(37,[r]),i=(i?i.then(function(){return t.apply(void 0,n)}):t.apply(void 0,n)).then(function(e){return s--,e})}return{execute:execute,isExecuting:function(){return s>0},start:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(!u)return u=!0,c++,o=t,e.debug(36,[r,n]),function periodicExecute(e){return execute.apply(void 0,o).then(function(t){return u&&e===c&&(a=setTimeout(periodicExecute,n,e)),t})}(c)},stop:function(){u=!1,a&&(e.debug(38,[r]),clearTimeout(a),a=void 0)},isRunning:function(){return u}}}function submitterFactory(e,t,n,r,i,o,a,s){void 0===a&&(a=0);var u,c=0;return syncTaskFactory(e,function(){if(n.isEmpty()&&!u)return Promise.resolve();var r="number"==typeof(u=n.pop(u)).length?u.length+" "+i:i;e[s?"debug":"info"](116,[r]);var l=JSON.stringify(o?o(u):u);return a||(u=void 0),t(l).then(function(){c=0,u=void 0}).catch(function(t){a?c===a?(c=0,u=void 0,e[s?"debug":"warn"](209,[r,t])):(c++,e[s?"debug":"warn"](210,[r,t])):e[s?"debug":"warn"](209,[r,t])})},r,i+" submitter")}function firstPushWindowDecorator(e,t){var n,r=!1,i=e.start;e.start=function(){r=!0,n=setTimeout(i,t)};var o=e.stop;return e.stop=function(){r=!1,clearTimeout(n),o()},e.isRunning=function(){return r},e}var eo="events",ea=n(43112);function find(e,t){var n;if(isObject(e))for(var r=Object.keys(e),i=0;i<r.length&&!n;i++){var o=r[i],a=t(e[o],o,e);a&&(n=e[o])}else if(Array.isArray(e))for(var i=0;i<e.length&&!n;i++){var a=t(e[i],i,e);a&&(n=e[i])}return n}function findIndex(e,t){if(Array.isArray(e)&&"function"==typeof t){for(var n=0;n<e.length;n++)if(!0===t(e[n],n,e))return n}return -1}function forOwn(e,t){return Object.keys(e).forEach(function(n){return t(e[n],n,e)}),e}function get(e,t,n){var r=n;try{var i=t.split("."),o=e;i.forEach(function(e){return o=o[e]}),void 0!==o&&(r=o)}catch(e){}return r}function isBoolean(e){return!0===e||!1===e}function isFiniteNumber(e){return e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&(Number.isFinite?Number.isFinite(e):isFinite(e))}function isNaNNumber(e){return e instanceof Number&&(e=e.valueOf()),e!=e}function isObject(e){return null!==e&&"object"==typeof e&&(e.constructor===Object||null!=e.constructor&&"Object"===e.constructor.name)}function isString(e){return"string"==typeof e||e instanceof String}function stringToUpperCase(e){return isString(e)?e.toUpperCase():e}function startsWith(e,t){return!!(isString(e)&&isString(t))&&e.slice(0,t.length)===t}function toNumber(e){if("number"==typeof e)return e;if(isObject(e)&&"function"==typeof e.valueOf){var t=e.valueOf();e=isObject(t)?t+"":t}return"string"!=typeof e?0===e?e:+e:+(e=e.replace(/^\s+|\s+$/g,""))}function lang_toString(e){if(null==e)return"";if("string"==typeof e)return e;if(Array.isArray(e))return e.map(function(e){return isString(e)?e:""})+"";var t=e+"";return"0"===t&&1/e===Number.NEGATIVE_INFINITY?"-0":t}function uniq(e){var t={};return e.filter(function(e){return!Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=!0)})}var es="impressions";function fromImpressionsCollector(e,t){var n=function(e,t){var n={};if(Array.isArray(e)&&isString(t))for(var r=0;r<e.length;r++){var i=e[r][t];isString(i)&&(n[i]||(n[i]=[]),n[i].push(e[r]))}return n}(t,"feature"),r=[];return forOwn(n,function(t,n){r.push({f:n,i:t.map(function(t){return{k:t.keyName,t:t.treatment,m:t.time,c:t.changeNumber,r:e?t.label:void 0,b:t.bucketingKey?t.bucketingKey:void 0,pt:t.pt?t.pt:void 0}})})}),r}function fromImpressionCountsCollector(e){for(var t=[],n=Object.keys(e),r=0;r<n.length;r++){var i=n[r].split("::");if(2===i.length){var o={f:i[0],m:Number(i[1]),rc:e[n[r]]};t.push(o)}}return{pf:t}}var eu="state::splits-arrived",ec="state::splits-cache-loaded",el="state::segments-arrived",ef="init::timeout",eh="init::ready",ed="init::cache-ready",ep="state::update",em=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/;function validateSplit(e,t,n,r){if(void 0===r&&(r="feature flag name"),void 0==t)e.error(315,[n,r]);else if(isString(t)){if(em.test(t)&&(e.warn(214,[n,r,t]),t=t.trim()),t.length>0)return t;e.error(319,[n,r])}else e.error(318,[n,r]);return!1}function validateSplits(e,t,n,r,i){if(void 0===r&&(r="feature flag names"),void 0===i&&(i="feature flag name"),Array.isArray(t)&&t.length>0){var o=[];if(t.forEach(function(t){var r=validateSplit(e,t,n,i);r&&o.push(r)}),o.length)return uniq(o)}return e.error(320,[n,r]),!1}var eg=[{type:"byName",maxLength:400,queryParam:"names="},{type:"byPrefix",maxLength:50,queryParam:"prefixes="}];function validateKeyValue(e,t,n,r){if(void 0==t)return e.error(315,[n,r]),!1;if(isFiniteNumber(t))return e.warn(213,[n,r,t]),lang_toString(t);if(isString(t)){if((t=t.trim()).length>0&&t.length<=250)return t;0===t.length?e.error(319,[n,r]):t.length>250&&e.error(316,[n,r])}else e.error(318,[n,r]);return!1}function validateKey(e,t,n){if(!isObject(t))return validateKeyValue(e,t,n,"key");var r=validateKeyValue(e,t.matchingKey,n,"matchingKey"),i=validateKeyValue(e,t.bucketingKey,n,"bucketingKey");return r&&i?{matchingKey:r,bucketingKey:i}:(e.error(317,[n]),!1)}var ey=/[A-Z]/,ev="traffic_type";function validateTrafficType(e,t,n){if(void 0==t)e.error(315,[n,ev]);else if(isString(t)){if(0!==t.length)return ey.test(t)&&(e.warn(216,[n]),t=t.toLowerCase()),t;e.error(319,[n,ev])}else e.error(318,[n,ev]);return!1}var eb={mode:Z,core:{authorizationKey:void 0,key:void 0,trafficType:void 0,labelsEnabled:!0,IPAddressesEnabled:void 0},scheduler:{featuresRefreshRate:60,segmentsRefreshRate:60,telemetryRefreshRate:3600,impressionsRefreshRate:300,offlineRefreshRate:15,eventsPushRate:60,eventsQueueSize:500,impressionsQueueSize:3e4,pushRetryBackoffBase:1},urls:{sdk:"https://sdk.split.io/api",events:"https://events.split.io/api",auth:"https://auth.split.io/api",streaming:"https://streaming.split.io",telemetry:"https://telemetry.split.io/api"},storage:void 0,debug:void 0,impressionListener:void 0,version:void 0,integrations:void 0,streamingEnabled:!0,sync:{splitFilters:void 0,impressionsMode:Q,localhostMode:void 0,enabled:!0},log:void 0};function fromSecondsToMillis(e){return Math.round(1e3*e)}var eS="sdk_key",eT={};function timer(e){var t=e();return function(){return Math.round(e()-t)}}var eC=((l={})[Z]=0,l[Y]=1,l[$]=2,l),eE=((f={})[Q]=0,f[H]=1,f[V]=2,f),e_=((h={})[er]=1,h[et]=2,h[en]=3,h),ew="unique keys",ek="PUSH_NONRETRYABLE_ERROR",eM="PUSH_RETRYABLE_ERROR",eI="PUSH_SUBSYSTEM_UP",eR="PUSH_SUBSYSTEM_DOWN",eA="MY_SEGMENTS_UPDATE",eO="MY_SEGMENTS_UPDATE_V2",eL="SEGMENT_UPDATE",ex="SPLIT_KILL",eN="SPLIT_UPDATE",eF="CONTROL",eD="OCCUPANCY";function isConsentGranted(e){var t=e.userConsent;return!t||t===et}(r=d||(d={})).STREAMING_DISABLED="STREAMING_DISABLED",r.STREAMING_PAUSED="STREAMING_PAUSED",r.STREAMING_RESUMED="STREAMING_RESUMED",r.STREAMING_RESET="STREAMING_RESET";var eU=function(){function Backoff(e,t,n){this.baseMillis=Backoff.__TEST__BASE_MILLIS||t||Backoff.DEFAULT_BASE_MILLIS,this.maxMillis=Backoff.__TEST__MAX_MILLIS||n||Backoff.DEFAULT_MAX_MILLIS,this.attempts=0,this.cb=e}return Backoff.prototype.scheduleCall=function(){var e=this,t=Math.min(this.baseMillis*Math.pow(2,this.attempts),this.maxMillis);return this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=setTimeout(function(){e.timeoutID=void 0,e.cb()},t),this.attempts++,t},Backoff.prototype.reset=function(){this.attempts=0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=void 0)},Backoff.DEFAULT_BASE_MILLIS=1e3,Backoff.DEFAULT_MAX_MILLIS=18e5,Backoff}(),eP=[/control_pri$/,/control_sec$/],eK=[10,20],ej="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function decodeFromBase64(e){var t=String(e).replace(/[=]+$/,"");if(t.length%4==1)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var n="",r=0,i=void 0,o=void 0,a=0;o=t.charAt(a++);~o&&(i=r%4?64*i+o:o,r++%4)&&(n+=String.fromCharCode(255&i>>(-2*r&6))))o=ej.indexOf(o);return n}var eB=String.fromCharCode;function UTF16ToUTF8(e){var t,n,r,i,o;return i=function(e){if("string"!=typeof e)throw TypeError("Illegal argument: "+typeof e);var t=0;return function(){return t>=e.length?null:e.charCodeAt(t++)}}(e),n=[],r=[],o=t=function(){if(0==arguments.length)return r.join("")+eB.apply(String,n);n.length+arguments.length>1024&&(r.push(eB.apply(String,n)),n.length=0),Array.prototype.push.apply(n,arguments)},function(e,t){for(var n,r=null;null!==(n=null!==r?r:e());){if(n>=55296&&n<=57343&&null!==(r=e())&&r>=56320&&r<=57343){t((n-55296)*1024+r-56320+65536),r=null;continue}t(n)}null!==r&&t(r)}(i,function(e){!function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):(n<2048?t(n>>6&31|192):(n<65536?t(n>>12&15|224):(t(n>>18&7|240),t(n>>12&63|128)),t(n>>6&63|128)),t(63&n|128)),n=null}(e,o)}),t()}/*!
 * +----------------------------------------------------------------------------------+
 * | murmurHash3.js v3.0.0 (http://github.com/karanlyons/murmurHash3.js)              |
 * | A TypeScript/JavaScript implementation of MurmurHash3's hashing algorithms.      |
 * |----------------------------------------------------------------------------------|
 * | Copyright (c) 2012-2020 Karan Lyons. Freely distributable under the MIT license. |
 * +----------------------------------------------------------------------------------+
 */function x86Multiply(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function x86Rotl(e,t){return e<<t|e>>>32-t}function hash(e,t){return function(e,t){t=t||0;for(var n,r=(e=e||"").length%4,i=e.length-r,o=t,a=0,s=0;s<i;s+=4)a=x86Rotl(a=x86Multiply(a=255&e.charCodeAt(s)|(255&e.charCodeAt(s+1))<<8|(255&e.charCodeAt(s+2))<<16|(255&e.charCodeAt(s+3))<<24,3432918353),15),o^=a=x86Multiply(a,461845907),o=x86Multiply(o=x86Rotl(o,13),5)+3864292196;switch(a=0,r){case 3:a^=(255&e.charCodeAt(s+2))<<16;case 2:a^=(255&e.charCodeAt(s+1))<<8;case 1:a^=255&e.charCodeAt(s),a=x86Rotl(a=x86Multiply(a,3432918353),15),o^=a=x86Multiply(a,461845907)}return o^=e.length,n=o,n^=n>>>16,n=x86Multiply(n,2246822507),n^=n>>>13,n=x86Multiply(n,3266489909),(o=n^=n>>>16)>>>0}(UTF16ToUTF8(e),t>>>0)}function bucket(e,t){return Math.abs(hash(e,t)%100)+1}function hashUserKey(e){return function(e){for(var t=String(e),n="",r=void 0,i=void 0,o=0,a=ej;t.charAt(0|o)||(a="=",o%1);n+=a.charAt(63&r>>8-o%1*8)){if((i=t.charCodeAt(o+=3/4))>255)throw Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");r=r<<8|i}return n}(hash(e,0).toString())}var ez=/^control_/,eq=function(){function SSEClient(e,t,n){var r,i,o,a;if(this.eventSource=n&&n(),!this.eventSource)throw Error("EventSource API is not available. ");this.streamingUrl=e.urls.streaming+"/sse",this.useHeaders=t,this.headers=(r={SplitSDKClientKey:isString(e.core.authorizationKey)?e.core.authorizationKey.slice(-4):"",SplitSDKVersion:e.version},o=(i=e.runtime).ip,a=i.hostname,o&&(r.SplitSDKMachineIP=o),a&&(r.SplitSDKMachineName=a),r)}return SSEClient.prototype.setEventHandler=function(e){this.handler=e},SSEClient.prototype.open=function(e){this.close();var t=Object.keys(e.channels).map(function(e){return encodeURIComponent((ez.test(e)?"[?occupancy=metrics.publishers]":"")+e)}).join(","),n=this.streamingUrl+"?channels="+t+"&accessToken="+e.token+"&v=1.1&heartbeats=true";this.connection=new this.eventSource(this.useHeaders?n:n+"&SplitSDKVersion="+this.headers.SplitSDKVersion+"&SplitSDKClientKey="+this.headers.SplitSDKClientKey,this.useHeaders?{headers:this.headers}:void 0),this.handler&&(this.connection.addEventListener("open",this.handler.handleOpen),this.connection.addEventListener("message",this.handler.handleMessage),this.connection.addEventListener("error",this.handler.handleError))},SSEClient.prototype.close=function(){this.connection&&this.connection.close()},SSEClient}();function getMatching(e){return isObject(e)?e.matchingKey:e}function keyParser(e){return isObject(e)?{matchingKey:e.matchingKey,bucketingKey:e.bucketingKey}:{matchingKey:e,bucketingKey:e}}(i=p||(p={}))[i.None=0]="None",i[i.Gzip=1]="Gzip",i[i.Zlib=2]="Zlib",(o=m||(m={}))[o.UnboundedFetchRequest=0]="UnboundedFetchRequest",o[o.BoundedFetchRequest=1]="BoundedFetchRequest",o[o.KeyList=2]="KeyList",o[o.SegmentRemoval=3]="SegmentRemoval";var eW=function(){if([typeof Uint8Array,typeof Uint16Array,typeof Uint32Array].some(function(e){return"function"!=e}))return"global Uint8Array object is not available for gzip/zlib decompression";var e=Uint8Array,t=Uint16Array,n=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(e,r){for(var i=new t(31),o=0;o<31;++o)i[o]=r+=1<<e[o-1];for(var a=new n(i[30]),o=1;o<30;++o)for(var s=i[o];s<i[o+1];++s)a[s]=s-i[o]<<5|o;return[i,a]},a=freb(r,2),s=a[0],u=a[1];s[28]=258,u[258]=28;for(var c=freb(i,0)[0],l=new t(32768),f=0;f<32768;++f){var h=(43690&f)>>>1|(21845&f)<<1;h=(61680&(h=(52428&h)>>>2|(13107&h)<<2))>>>4|(3855&h)<<4,l[f]=((65280&h)>>>8|(255&h)<<8)>>>1}for(var hMap=function(e,n,r){for(var i,o=e.length,a=0,s=new t(n);a<o;++a)++s[e[a]-1];var u=new t(n);for(a=0;a<n;++a)u[a]=u[a-1]+s[a-1]<<1;if(r){i=new t(1<<n);var c=15-n;for(a=0;a<o;++a)if(e[a])for(var f=a<<4|e[a],h=n-e[a],d=u[e[a]-1]++<<h,p=d|(1<<h)-1;d<=p;++d)i[l[d]>>>c]=f}else for(a=0,i=new t(o);a<o;++a)e[a]&&(i[a]=l[u[e[a]-1]++]>>>15-e[a]);return i},d=new e(288),f=0;f<144;++f)d[f]=8;for(var f=144;f<256;++f)d[f]=9;for(var f=256;f<280;++f)d[f]=7;for(var f=280;f<288;++f)d[f]=8;for(var p=new e(32),f=0;f<32;++f)p[f]=5;var m=hMap(d,9,1),g=hMap(p,5,1),max=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},bits=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},bits16=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},slc=function(r,i,o){(null==i||i<0)&&(i=0),(null==o||o>r.length)&&(o=r.length);var a=new(r instanceof t?t:r instanceof n?n:e)(o-i);return a.set(r.subarray(i,o)),a},y=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(e,t,n){var r=Error(t||y[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,err),!n)throw r;return r},inflt=function(t,n,a){var u=t.length;if(!u||a&&a.f&&!a.l)return n||new e(0);var l=!n||a,f=!a||a.i;a||(a={}),n||(n=new e(3*u));var cbuf=function(t){var r=n.length;if(t>r){var i=new e(Math.max(2*r,t));i.set(n),n=i}},h=a.f||0,d=a.p||0,p=a.b||0,y=a.l,v=a.d,b=a.m,S=a.n,T=8*u;do{if(!y){h=bits(t,d,1);var C=bits(t,d+1,3);if(d+=3,C){if(1==C)y=m,v=g,b=9,S=5;else if(2==C){var E=bits(t,d,31)+257,_=bits(t,d+10,15)+4,w=E+bits(t,d+5,31)+1;d+=14;for(var k=new e(w),M=new e(19),I=0;I<_;++I)M[o[I]]=bits(t,d+3*I,7);d+=3*_;for(var R=max(M),A=(1<<R)-1,O=hMap(M,R,1),I=0;I<w;){var L=O[bits(t,d,A)];d+=15&L;var x=L>>>4;if(x<16)k[I++]=x;else{var N=0,F=0;for(16==x?(F=3+bits(t,d,3),d+=2,N=k[I-1]):17==x?(F=3+bits(t,d,7),d+=3):18==x&&(F=11+bits(t,d,127),d+=7);F--;)k[I++]=N}}var D=k.subarray(0,E),U=k.subarray(E);b=max(D),S=max(U),y=hMap(D,b,1),v=hMap(U,S,1)}else err(1)}else{var x=((d+7)/8|0)+4,P=t[x-4]|t[x-3]<<8,K=x+P;if(K>u){f&&err(0);break}l&&cbuf(p+P),n.set(t.subarray(x,K),p),a.b=p+=P,a.p=d=8*K,a.f=h;continue}if(d>T){f&&err(0);break}}l&&cbuf(p+131072);for(var j=(1<<b)-1,B=(1<<S)-1,z=d;;z=d){var N=y[bits16(t,d)&j],q=N>>>4;if((d+=15&N)>T){f&&err(0);break}if(N||err(2),q<256)n[p++]=q;else if(256==q){z=d,y=null;break}else{var W=q-254;if(q>264){var I=q-257,G=r[I];W=bits(t,d,(1<<G)-1)+s[I],d+=G}var H=v[bits16(t,d)&B],Q=H>>>4;H||err(3),d+=15&H;var U=c[Q];if(Q>3){var G=i[Q];U+=bits16(t,d)&(1<<G)-1,d+=G}if(d>T){f&&err(0);break}l&&cbuf(p+131072);for(var V=p+W;p<V;p+=4)n[p]=n[p-U],n[p+1]=n[p+1-U],n[p+2]=n[p+2-U],n[p+3]=n[p+3-U];p=V}}a.l=y,a.p=z,a.b=p,a.f=h,y&&(h=1,a.m=b,a.d=v,a.n=S)}while(!h);return p==n.length?n:slc(n,0,p)},gzs=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&err(6,"invalid gzip data");var t=e[3],n=10;4&t&&(n+=e[10]|(e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)},gzl=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},zlv=function(e){((15&e[0])!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&err(6,"invalid zlib data"),32&e[1]&&err(6,"invalid zlib data: preset dictionaries not supported")};return{gunzipSync:function(t,n){return inflt(t.subarray(gzs(t),-8),n||new e(gzl(t)))},unzlibSync:function(e,t){return inflt((zlv(e),e.subarray(2,-4)),t)}}}();function decompress(e,t){var n,r=(n=decodeFromBase64(e).split("").map(function(e){return e.charCodeAt(0)}),new Uint8Array(n));if("string"==typeof eW)throw Error(eW);if(1===t)return eW.gunzipSync(r);if(2===t)return eW.unzlibSync(r);throw Error("Invalid compression algorithm #"+t)}function parseKeyList(e,t,n){void 0===n&&(n=!0);var r,i=(r=decompress(e,t),String.fromCharCode.apply(null,r));return n&&(i=i.replace(/\d+/g,'"$&"')),JSON.parse(i)}var eG=function(){function SetPoly(e){var t=this;this.__setData__=[],Array.isArray(e)&&e.forEach(function(e){t.add(e)})}return SetPoly.prototype.clear=function(){this.__setData__.length&&(this.__setData__.length=0)},SetPoly.prototype.add=function(e){return this.has(e)||this.__setData__.push(e),this},SetPoly.prototype.delete=function(e){var t=this.__setData__.indexOf(e);return -1!==t&&(this.__setData__.splice(t,1),!0)},SetPoly.prototype.has=function(e){return -1!==this.__setData__.indexOf(e)},SetPoly.prototype.forEach=function(e,t){if("function"!=typeof e)throw TypeError(e+" is not a function");for(var n=0;n<this.__setData__.length;n++){var r=this.__setData__[n];e.call(t,r,r,this)}},Object.defineProperty(SetPoly.prototype,"size",{get:function(){return this.__setData__.length},enumerable:!1,configurable:!0}),SetPoly}();function setToArray(e){return e instanceof eG?e.__setData__.slice():Array.from(e)}var eH="function"==typeof Array.from&&"function"==typeof Set&&Set.prototype&&Set.prototype.values?Set:eG;function _x64Add(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function _x64Multiply(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function _x64Rotl(e,t){return 32==(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function _x64LeftShift(e,t){return 0==(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function _x64Xor(e,t){return[e[0]^t[0],e[1]^t[1]]}function _x64Fmix(e){return e=_x64Multiply(e=_x64Xor(e,[0,e[0]>>>1]),[4283543511,3981806797]),e=_x64Multiply(e=_x64Xor(e,[0,e[0]>>>1]),[3301882366,444984403]),e=_x64Xor(e,[0,e[0]>>>1])}function timeout(e,t){return e<1?t:new Promise(function(n,r){var i=setTimeout(function(){r(Error("Operation timed out because it exceeded the configured time limit of "+e+" ms."))},e);t.then(function(e){clearTimeout(i),n(e)},function(e){clearTimeout(i),r(e)})})}var eQ=function(){function ImpressionsCacheInMemory(e){void 0===e&&(e=0),this.maxQueue=e,this.queue=[]}return ImpressionsCacheInMemory.prototype.setOnFullQueueCb=function(e){this.onFullQueue=e},ImpressionsCacheInMemory.prototype.track=function(e){var t;(t=this.queue).push.apply(t,e),this.maxQueue>0&&this.queue.length>=this.maxQueue&&this.onFullQueue&&this.onFullQueue()},ImpressionsCacheInMemory.prototype.clear=function(){this.queue=[]},ImpressionsCacheInMemory.prototype.pop=function(e){var t=this.queue;return this.clear(),e?e.concat(t):t},ImpressionsCacheInMemory.prototype.isEmpty=function(){return 0===this.queue.length},ImpressionsCacheInMemory}();function truncateTimeFrame(e){return e-e%36e5}var eV=function(){function ImpressionCountsCacheInMemory(e){void 0===e&&(e=3e4),this.cache={},this.cacheSize=0,this.maxStorage=e}return ImpressionCountsCacheInMemory.prototype._makeKey=function(e,t){return e+"::"+truncateTimeFrame(t)},ImpressionCountsCacheInMemory.prototype.track=function(e,t,n){var r=this._makeKey(e,t),i=this.cache[r];this.cache[r]=i?i+n:n,this.onFullQueue&&(this.cacheSize=this.cacheSize+n,this.cacheSize>=this.maxStorage&&this.onFullQueue())},ImpressionCountsCacheInMemory.prototype.pop=function(e){var t=this.cache;return(this.clear(),e)?(Object.keys(t).forEach(function(n){e[n]?e[n]+=t[n]:e[n]=t[n]}),e):t},ImpressionCountsCacheInMemory.prototype.clear=function(){this.cache={},this.cacheSize=0},ImpressionCountsCacheInMemory.prototype.isEmpty=function(){return 0===Object.keys(this.cache).length},ImpressionCountsCacheInMemory}(),eX=function(){function EventsCacheInMemory(e){void 0===e&&(e=0),this.maxQueue=e,this.queue=[],this.queueByteSize=0}return EventsCacheInMemory.prototype.setOnFullQueueCb=function(e){this.onFullQueue=e},EventsCacheInMemory.prototype.track=function(e,t){return void 0===t&&(t=0),this.queueByteSize+=t,this.queue.push(e),this._checkForFlush(),!0},EventsCacheInMemory.prototype.clear=function(){this.queue=[],this.queueByteSize=0},EventsCacheInMemory.prototype.pop=function(e){var t=this.queue;return this.clear(),e?e.concat(t):t},EventsCacheInMemory.prototype.isEmpty=function(){return 0===this.queue.length},EventsCacheInMemory.prototype._checkForFlush=function(){(this.queueByteSize>5242880||this.maxQueue>0&&this.queue.length>=this.maxQueue)&&this.onFullQueue&&this.onFullQueue()},EventsCacheInMemory}(),eZ=/[^.]+$/,eY=function(e){function KeyBuilderCS(t,n){var r=e.call(this,t)||this;return r.matchingKey=n,r.regexSplitsCacheKey=RegExp("^"+t+"\\.(splits?|trafficType)\\."),r}return(0,ea.ZT)(KeyBuilderCS,e),KeyBuilderCS.prototype.buildSegmentNameKey=function(e){return this.prefix+"."+this.matchingKey+".segment."+e},KeyBuilderCS.prototype.extractSegmentName=function(e){var t=this.prefix+"."+this.matchingKey+".segment.";if(startsWith(e,t))return e.substr(t.length)},KeyBuilderCS.prototype.buildOldSegmentNameKey=function(e){return this.matchingKey+"."+this.prefix+".segment."+e},KeyBuilderCS.prototype.extractOldSegmentKey=function(e){var t=this.matchingKey+"."+this.prefix+".segment.";if(startsWith(e,t))return e.substr(t.length)},KeyBuilderCS.prototype.buildLastUpdatedKey=function(){return this.prefix+".splits.lastUpdated"},KeyBuilderCS.prototype.isSplitsCacheKey=function(e){return this.regexSplitsCacheKey.test(e)},KeyBuilderCS.prototype.buildSplitsFilterQueryKey=function(){return this.prefix+".splits.filterQuery"},KeyBuilderCS}(function(){function KeyBuilder(e){void 0===e&&(e="SPLITIO"),this.prefix=e}return KeyBuilder.prototype.buildTrafficTypeKey=function(e){return this.prefix+".trafficType."+e},KeyBuilder.prototype.buildSplitKey=function(e){return this.prefix+".split."+e},KeyBuilder.prototype.buildSplitsTillKey=function(){return this.prefix+".splits.till"},KeyBuilder.prototype.isSplitKey=function(e){return startsWith(e,this.prefix+".split.")},KeyBuilder.prototype.buildSplitKeyPrefix=function(){return this.prefix+".split."},KeyBuilder.prototype.buildSplitsWithSegmentCountKey=function(){return this.prefix+".splits.usingSegments"},KeyBuilder.prototype.buildSegmentNameKey=function(e){return this.prefix+".segment."+e},KeyBuilder.prototype.buildSegmentTillKey=function(e){return this.prefix+".segment."+e+".till"},KeyBuilder.prototype.extractKey=function(e){var t=e.match(eZ);if(t&&t.length)return t[0];throw Error("Invalid latency key provided")},KeyBuilder}());function isLocalStorageAvailable(){var e="__SPLITSOFTWARE__";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}var e$=function(){function AbstractSplitsCacheSync(){}return AbstractSplitsCacheSync.prototype.addSplits=function(e){var t=this;return e.map(function(e){return t.addSplit(e[0],e[1])})},AbstractSplitsCacheSync.prototype.removeSplits=function(e){var t=this;return e.map(function(e){return t.removeSplit(e)})},AbstractSplitsCacheSync.prototype.getSplits=function(e){var t=this,n={};return e.forEach(function(e){n[e]=t.getSplit(e)}),n},AbstractSplitsCacheSync.prototype.getAll=function(){var e=this;return this.getSplitNames().map(function(t){return e.getSplit(t)})},AbstractSplitsCacheSync.prototype.checkCache=function(){return!1},AbstractSplitsCacheSync.prototype.killLocally=function(e,t,n){var r=this.getSplit(e);if(r&&(!r.changeNumber||r.changeNumber<n)){var i=E({},r);return i.killed=!0,i.defaultTreatment=t,i.changeNumber=n,this.addSplit(e,i)}return!1},AbstractSplitsCacheSync}();function usesSegments(e){for(var t=e.conditions||[],n=0;n<t.length;n++)for(var r=t[n].matcherGroup.matchers,i=0;i<r.length;i++)if("IN_SEGMENT"===r[i].matcherType)return!0;return!1}var eJ="storage:localstorage: ",e0=function(e){function SplitsCacheInLocal(t,n,r,i){void 0===i&&(i={queryString:null,groupedFilters:{byName:[],byPrefix:[]},validFilters:[]});var o=e.call(this)||this;return o.log=t,o.cacheReadyButNeedsToFlush=!1,o.keys=n,o.splitFiltersValidation=i,o._checkExpiration(r),o._checkFilterQuery(),o}return(0,ea.ZT)(SplitsCacheInLocal,e),SplitsCacheInLocal.prototype._decrementCount=function(e){var t=toNumber(localStorage.getItem(e))-1;t>0?localStorage.setItem(e,t):localStorage.removeItem(e)},SplitsCacheInLocal.prototype._decrementCounts=function(e){try{if(e){var t=this.keys.buildTrafficTypeKey(e.trafficTypeName);if(this._decrementCount(t),usesSegments(e)){var n=this.keys.buildSplitsWithSegmentCountKey();this._decrementCount(n)}}}catch(e){this.log.error(eJ+e)}},SplitsCacheInLocal.prototype._incrementCounts=function(e){try{if(e){var t=this.keys.buildTrafficTypeKey(e.trafficTypeName);if(localStorage.setItem(t,toNumber(localStorage.getItem(t))+1),usesSegments(e)){var n=this.keys.buildSplitsWithSegmentCountKey();localStorage.setItem(n,toNumber(localStorage.getItem(n))+1)}}}catch(e){this.log.error(eJ+e)}},SplitsCacheInLocal.prototype.clear=function(){this.log.info(eJ+"Flushing Splits data from localStorage");for(var e=localStorage.length,t=[],n=0;n<e;n++){var r=localStorage.key(n);null!=r&&this.keys.isSplitsCacheKey(r)&&t.push(r)}t.forEach(function(e){localStorage.removeItem(e)}),this.hasSync=!1},SplitsCacheInLocal.prototype.addSplit=function(e,t){try{var n=this.keys.buildSplitKey(e),r=localStorage.getItem(n),i=r?JSON.parse(r):null;return localStorage.setItem(n,JSON.stringify(t)),this._incrementCounts(t),this._decrementCounts(i),!0}catch(e){return this.log.error(eJ+e),!1}},SplitsCacheInLocal.prototype.removeSplit=function(e){try{var t=this.getSplit(e);return localStorage.removeItem(this.keys.buildSplitKey(e)),this._decrementCounts(t),!0}catch(e){return this.log.error(eJ+e),!1}},SplitsCacheInLocal.prototype.getSplit=function(e){var t=localStorage.getItem(this.keys.buildSplitKey(e));return t&&JSON.parse(t)},SplitsCacheInLocal.prototype.setChangeNumber=function(e){if(this.cacheReadyButNeedsToFlush&&(this.clear(),this.cacheReadyButNeedsToFlush=!1),this.updateNewFilter){this.log.info(eJ+"Split filter query was modified. Updating cache.");var t=this.keys.buildSplitsFilterQueryKey(),n=this.splitFiltersValidation.queryString;try{n?localStorage.setItem(t,n):localStorage.removeItem(t)}catch(e){this.log.error(eJ+e)}this.updateNewFilter=!1}try{return localStorage.setItem(this.keys.buildSplitsTillKey(),e+""),localStorage.setItem(this.keys.buildLastUpdatedKey(),Date.now()+""),this.hasSync=!0,!0}catch(e){return this.log.error(eJ+e),!1}},SplitsCacheInLocal.prototype.getChangeNumber=function(){var e=localStorage.getItem(this.keys.buildSplitsTillKey());return null!==e?isNaNNumber(e=parseInt(e,10))?-1:e:-1},SplitsCacheInLocal.prototype.getSplitNames=function(){for(var e=localStorage.length,t=[],n=0;n<e;){var r=localStorage.key(n);null!=r&&this.keys.isSplitKey(r)&&t.push(this.keys.extractKey(r)),n++}return t},SplitsCacheInLocal.prototype.trafficTypeExists=function(e){var t=toNumber(localStorage.getItem(this.keys.buildTrafficTypeKey(e)));return isFiniteNumber(t)&&t>0},SplitsCacheInLocal.prototype.usesSegments=function(){if(!this.hasSync)return!0;var e=localStorage.getItem(this.keys.buildSplitsWithSegmentCountKey()),t=null===e?0:toNumber(e);return!isFiniteNumber(t)||t>0},SplitsCacheInLocal.prototype.checkCache=function(){return this.getChangeNumber()>-1||this.cacheReadyButNeedsToFlush},SplitsCacheInLocal.prototype._checkExpiration=function(e){var t=localStorage.getItem(this.keys.buildLastUpdatedKey());null!==t&&!isNaNNumber(t=parseInt(t,10))&&e&&t<e&&this.clear()},SplitsCacheInLocal.prototype._checkFilterQuery=function(){var e=this,t=this.splitFiltersValidation,n=t.queryString,r=t.groupedFilters,i=this.keys.buildSplitsFilterQueryKey();if(localStorage.getItem(i)!==n)try{this.updateNewFilter=!0,this.checkCache()&&(localStorage.setItem(this.keys.buildSplitsTillKey(),"-1"),this.getSplitNames().forEach(function(t){if(n&&(r.byName.indexOf(t)>-1||r.byPrefix.some(function(e){return t.startsWith(e+"__")}))){e.cacheReadyButNeedsToFlush=!0;return}e.removeSplit(t)}))}catch(e){this.log.error(eJ+e)}},SplitsCacheInLocal}(e$),e1=function(){function AbstractSegmentsCacheSync(){}return AbstractSegmentsCacheSync.prototype.registerSegments=function(e){return!1},AbstractSegmentsCacheSync.prototype.setChangeNumber=function(e,t){return!0},AbstractSegmentsCacheSync.prototype.getChangeNumber=function(e){return -1},AbstractSegmentsCacheSync.prototype.resetSegments=function(e){return!0},AbstractSegmentsCacheSync}(),e2=function(e){function MySegmentsCacheInLocal(t,n){var r=e.call(this)||this;return r.log=t,r.keys=n,r}return(0,ea.ZT)(MySegmentsCacheInLocal,e),MySegmentsCacheInLocal.prototype.clear=function(){this.log.info(eJ+"Flushing MySegments data from localStorage"),this.resetSegments([])},MySegmentsCacheInLocal.prototype.addToSegment=function(e){var t=this.keys.buildSegmentNameKey(e);try{return localStorage.setItem(t,"1"),!0}catch(e){return this.log.error(eJ+e),!1}},MySegmentsCacheInLocal.prototype.removeFromSegment=function(e){var t=this.keys.buildSegmentNameKey(e);try{return localStorage.removeItem(t),!0}catch(e){return this.log.error(eJ+e),!1}},MySegmentsCacheInLocal.prototype.isInSegment=function(e){return"1"===localStorage.getItem(this.keys.buildSegmentNameKey(e))},MySegmentsCacheInLocal.prototype.resetSegments=function(e){var t,n=this,r=!1,i=Object.keys(localStorage).reduce(function(t,r){var i=n.keys.extractSegmentName(r);if(i)t.push(i);else if(i=n.keys.extractOldSegmentKey(r)){var o=n.keys.buildSegmentNameKey(i);try{!localStorage.getItem(o)&&e.indexOf(i)>-1&&(localStorage.setItem(o,"1"),t.push(i)),localStorage.removeItem(r)}catch(e){n.log.error(e)}}return t},[]);if(0===e.length&&i.length===e.length)return r;if(i.length!==e.length)r=!0,i.forEach(function(e){return n.removeFromSegment(e)}),e.forEach(function(e){return n.addToSegment(e)});else{for(t=0;t<e.length&&-1!==i.indexOf(e[t]);t++);t<e.length&&(r=!0,i.forEach(function(e){return n.removeFromSegment(e)}),e.forEach(function(e){return n.addToSegment(e)}))}return r},MySegmentsCacheInLocal.prototype.getRegisteredSegments=function(){var e=this;return Object.keys(localStorage).reduce(function(t,n){var r=e.keys.extractSegmentName(n);return r&&t.push(r),t},[])},MySegmentsCacheInLocal.prototype.getKeysCount=function(){return 1},MySegmentsCacheInLocal}(e1),e3=function(e){function MySegmentsCacheInMemory(){var t=null!==e&&e.apply(this,arguments)||this;return t.segmentCache={},t}return(0,ea.ZT)(MySegmentsCacheInMemory,e),MySegmentsCacheInMemory.prototype.clear=function(){this.segmentCache={}},MySegmentsCacheInMemory.prototype.addToSegment=function(e){return this.segmentCache[e]=!0,!0},MySegmentsCacheInMemory.prototype.removeFromSegment=function(e){return delete this.segmentCache[e],!0},MySegmentsCacheInMemory.prototype.isInSegment=function(e){return!0===this.segmentCache[e]},MySegmentsCacheInMemory.prototype.resetSegments=function(e){var t,n=this,r=!1,i=Object.keys(this.segmentCache);if(0===e.length&&i.length===e.length)return r;if(i.length!==e.length)r=!0,this.segmentCache={},e.forEach(function(e){n.addToSegment(e)});else{for(t=0;t<e.length&&this.isInSegment(e[t]);t++);t<e.length&&(r=!0,this.segmentCache={},e.forEach(function(e){n.addToSegment(e)}))}return r},MySegmentsCacheInMemory.prototype.getRegisteredSegments=function(){return Object.keys(this.segmentCache)},MySegmentsCacheInMemory.prototype.getKeysCount=function(){return 1},MySegmentsCacheInMemory}(e1),e5=function(e){function SplitsCacheInMemory(){var t=null!==e&&e.apply(this,arguments)||this;return t.splitsCache={},t.ttCache={},t.changeNumber=-1,t.splitsWithSegmentsCount=0,t}return(0,ea.ZT)(SplitsCacheInMemory,e),SplitsCacheInMemory.prototype.clear=function(){this.splitsCache={},this.ttCache={},this.changeNumber=-1,this.splitsWithSegmentsCount=0},SplitsCacheInMemory.prototype.addSplit=function(e,t){var n=this.getSplit(e);if(n){var r=n.trafficTypeName;this.ttCache[r]--,this.ttCache[r]||delete this.ttCache[r],usesSegments(n)&&this.splitsWithSegmentsCount--}if(!t)return!1;this.splitsCache[e]=t;var i=t.trafficTypeName;return this.ttCache[i]=(this.ttCache[i]||0)+1,usesSegments(t)&&this.splitsWithSegmentsCount++,!0},SplitsCacheInMemory.prototype.removeSplit=function(e){var t=this.getSplit(e);if(!t)return!1;delete this.splitsCache[e];var n=t.trafficTypeName;return this.ttCache[n]--,this.ttCache[n]||delete this.ttCache[n],usesSegments(t)&&this.splitsWithSegmentsCount--,!0},SplitsCacheInMemory.prototype.getSplit=function(e){return this.splitsCache[e]||null},SplitsCacheInMemory.prototype.setChangeNumber=function(e){return this.changeNumber=e,!0},SplitsCacheInMemory.prototype.getChangeNumber=function(){return this.changeNumber},SplitsCacheInMemory.prototype.getSplitNames=function(){return Object.keys(this.splitsCache)},SplitsCacheInMemory.prototype.trafficTypeExists=function(e){return isFiniteNumber(this.ttCache[e])&&this.ttCache[e]>0},SplitsCacheInMemory.prototype.usesSegments=function(){return -1===this.getChangeNumber()||this.splitsWithSegmentsCount>0},SplitsCacheInMemory}(e$),e6="GOOGLE_ANALYTICS_TO_SPLIT",e4="SPLIT_TO_GOOGLE_ANALYTICS";function findLatencyIndex(e){var t=Math.min(22,Math.max(0,Math.ceil(Math.log(e)/Math.log(1.5))));return isNaNNumber(t)?0:t}function newBuckets(){return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}function shouldRecordTelemetry(e){var t=e.settings;return t.mode!==X&&(void 0===t.core.key||.001>=Math.random())}var e8=function(){function TelemetryCacheInMemory(e,t){this.splits=e,this.segments=t,this.e=!0,this.notReadyUsage=0,this.impressionStats=[0,0,0],this.eventStats=[0,0],this.lastSync={},this.httpErrors={},this.httpLatencies={},this.authRejections=0,this.tokenRefreshes=0,this.streamingEvents=[],this.tags=[],this.exceptions={},this.latencies={},this.updatesFromSSE={sp:0,ms:0}}return TelemetryCacheInMemory.prototype.isEmpty=function(){return this.e},TelemetryCacheInMemory.prototype.clear=function(){},TelemetryCacheInMemory.prototype.pop=function(){return this.e=!0,{lS:this.getLastSynchronization(),mL:this.popLatencies(),mE:this.popExceptions(),hE:this.popHttpErrors(),hL:this.popHttpLatencies(),tR:this.popTokenRefreshes(),aR:this.popAuthRejections(),iQ:this.getImpressionStats(0),iDe:this.getImpressionStats(2),iDr:this.getImpressionStats(1),spC:this.splits&&this.splits.getSplitNames().length,seC:this.segments&&this.segments.getRegisteredSegments().length,skC:this.segments&&this.segments.getKeysCount(),sL:this.getSessionLength(),eQ:this.getEventStats(0),eD:this.getEventStats(1),sE:this.popStreamingEvents(),t:this.popTags(),ufs:this.popUpdatesFromSSE()}},TelemetryCacheInMemory.prototype.getTimeUntilReady=function(){return this.timeUntilReady},TelemetryCacheInMemory.prototype.recordTimeUntilReady=function(e){this.timeUntilReady=e},TelemetryCacheInMemory.prototype.getTimeUntilReadyFromCache=function(){return this.timeUntilReadyFromCache},TelemetryCacheInMemory.prototype.recordTimeUntilReadyFromCache=function(e){this.timeUntilReadyFromCache=e},TelemetryCacheInMemory.prototype.getNonReadyUsage=function(){return this.notReadyUsage},TelemetryCacheInMemory.prototype.recordNonReadyUsage=function(){this.notReadyUsage++},TelemetryCacheInMemory.prototype.getImpressionStats=function(e){return this.impressionStats[e]},TelemetryCacheInMemory.prototype.recordImpressionStats=function(e,t){this.impressionStats[e]+=t,this.e=!1},TelemetryCacheInMemory.prototype.getEventStats=function(e){return this.eventStats[e]},TelemetryCacheInMemory.prototype.recordEventStats=function(e,t){this.eventStats[e]+=t,this.e=!1},TelemetryCacheInMemory.prototype.getLastSynchronization=function(){return this.lastSync},TelemetryCacheInMemory.prototype.recordSuccessfulSync=function(e,t){this.lastSync[e]=t,this.e=!1},TelemetryCacheInMemory.prototype.popHttpErrors=function(){var e=this.httpErrors;return this.httpErrors={},e},TelemetryCacheInMemory.prototype.recordHttpError=function(e,t){var n=this.httpErrors[e]=this.httpErrors[e]||{};n[t]=(n[t]||0)+1,this.e=!1},TelemetryCacheInMemory.prototype.popHttpLatencies=function(){var e=this.httpLatencies;return this.httpLatencies={},e},TelemetryCacheInMemory.prototype.recordHttpLatency=function(e,t){var n=this.httpLatencies[e]=this.httpLatencies[e]||newBuckets();n[findLatencyIndex(t)]++,this.e=!1},TelemetryCacheInMemory.prototype.popAuthRejections=function(){var e=this.authRejections;return this.authRejections=0,e},TelemetryCacheInMemory.prototype.recordAuthRejections=function(){this.authRejections++,this.e=!1},TelemetryCacheInMemory.prototype.popTokenRefreshes=function(){var e=this.tokenRefreshes;return this.tokenRefreshes=0,e},TelemetryCacheInMemory.prototype.recordTokenRefreshes=function(){this.tokenRefreshes++,this.e=!1},TelemetryCacheInMemory.prototype.popStreamingEvents=function(){return this.streamingEvents.splice(0)},TelemetryCacheInMemory.prototype.recordStreamingEvents=function(e){this.streamingEvents.length<20&&this.streamingEvents.push(e),this.e=!1},TelemetryCacheInMemory.prototype.popTags=function(){return this.tags.splice(0)},TelemetryCacheInMemory.prototype.addTag=function(e){this.tags.length<10&&this.tags.push(e),this.e=!1},TelemetryCacheInMemory.prototype.getSessionLength=function(){return this.sessionLength},TelemetryCacheInMemory.prototype.recordSessionLength=function(e){this.sessionLength=e,this.e=!1},TelemetryCacheInMemory.prototype.popExceptions=function(){var e=this.exceptions;return this.exceptions={},e},TelemetryCacheInMemory.prototype.recordException=function(e){this.exceptions[e]=(this.exceptions[e]||0)+1,this.e=!1},TelemetryCacheInMemory.prototype.popLatencies=function(){var e=this.latencies;return this.latencies={},e},TelemetryCacheInMemory.prototype.recordLatency=function(e,t){var n=this.latencies[e]=this.latencies[e]||newBuckets();n[findLatencyIndex(t)]++,this.e=!1},TelemetryCacheInMemory.prototype.popUpdatesFromSSE=function(){var e=this.updatesFromSSE;return this.updatesFromSSE={sp:0,ms:0},e},TelemetryCacheInMemory.prototype.recordUpdatesFromSSE=function(e){this.updatesFromSSE[e]++,this.e=!1},TelemetryCacheInMemory}(),e7=function(){function UniqueKeysCacheInMemoryCS(e){void 0===e&&(e=3e4),this.uniqueTrackerSize=0,this.uniqueKeysTracker={},this.maxStorage=e}return UniqueKeysCacheInMemoryCS.prototype.setOnFullQueueCb=function(e){this.onFullQueue=e},UniqueKeysCacheInMemoryCS.prototype.track=function(e,t){this.uniqueKeysTracker[e]||(this.uniqueKeysTracker[e]=new eH);var n=this.uniqueKeysTracker[e];!n.has(t)&&(n.add(t),this.uniqueTrackerSize++),this.uniqueTrackerSize>=this.maxStorage&&this.onFullQueue&&this.onFullQueue()},UniqueKeysCacheInMemoryCS.prototype.clear=function(){this.uniqueTrackerSize=0,this.uniqueKeysTracker={}},UniqueKeysCacheInMemoryCS.prototype.pop=function(){var e=this.uniqueKeysTracker;return this.clear(),this.fromUniqueKeysCollector(e)},UniqueKeysCacheInMemoryCS.prototype.isEmpty=function(){return 0===Object.keys(this.uniqueKeysTracker).length},UniqueKeysCacheInMemoryCS.prototype.fromUniqueKeysCollector=function(e){for(var t=[],n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=setToArray(e[i]),a={k:i,fs:o};t.push(a)}return{keys:t}},UniqueKeysCacheInMemoryCS}();function InMemoryStorageCS_InMemoryStorageCSFactory(e){var t=e.settings,n=t.scheduler,r=n.impressionsQueueSize,i=n.eventsQueueSize,o=t.sync.impressionsMode,a=new e5,s=new e3,u={splits:a,segments:s,impressions:new eQ(r),impressionCounts:o!==H?new eV:void 0,events:new eX(i),telemetry:shouldRecordTelemetry(e)?new e8(a,s):void 0,uniqueKeys:o===V?new e7:void 0,destroy:function(){this.splits.clear(),this.segments.clear(),this.impressions.clear(),this.impressionCounts&&this.impressionCounts.clear(),this.events.clear(),this.uniqueKeys&&this.uniqueKeys.clear()},shared:function(){return{splits:this.splits,segments:new e3,impressions:this.impressions,impressionCounts:this.impressionCounts,events:this.events,telemetry:this.telemetry,destroy:function(){this.splits=new e5,this.segments.clear()}}}};if(e.settings.mode===X){var noopTrack=function(){return!0};u.impressions.track=noopTrack,u.events.track=noopTrack,u.impressionCounts&&(u.impressionCounts.track=noopTrack),u.uniqueKeys&&(u.uniqueKeys.track=noopTrack)}return u}function thenable(e){return null!=e&&"function"==typeof e.then}function validateIfNotDestroyed(e,t,n){return!t.isDestroyed()||(e.error(314,[n]),!1)}function validateIfOperational(e,t,n){return!!(t.isReady()||t.isReadyFromCache())||(e.warn(203,[n]),!1)}InMemoryStorageCS_InMemoryStorageCSFactory.type=J;var e9="definition not found",te="not ready",tt="exception";function validateSplitExistance(e,t,n,r,i){return!t.isReady()||r!==e9&&null!=r||(e.warn(215,[i,n]),!1)}var tn="split",tr="splits",ti="names";function objectToView(e){var t,n;return e?{name:e.name,trafficType:e.trafficTypeName,killed:e.killed,changeNumber:e.changeNumber||0,treatments:((n=find(t=e.conditions,function(e){return"ROLLOUT"===e.conditionType}))||(n=t[0]),n?n.partitions.map(function(e){return e.treatment}):[]),configs:e.configurations||{}}:null}function objectsToViews(e){var t=[];return e.forEach(function(e){var n=objectToView(e);n&&t.push(n)}),t}function sdkManagerFactory(e,t,n){var r=n.readinessManager;return E(Object.create(n.sdkStatus),{split:function(n){var i=validateSplit(e,n,tn);if(!validateIfNotDestroyed(e,r,tn)||!validateIfOperational(e,r,tn)||!i)return null;var o=t.getSplit(i);return thenable(o)?o.catch(function(){return null}).then(function(t){return validateSplitExistance(e,r,i,t,tn),objectToView(t)}):(validateSplitExistance(e,r,i,o,tn),objectToView(o))},splits:function(){if(!validateIfNotDestroyed(e,r,tr)||!validateIfOperational(e,r,tr))return[];var n=t.getAll();return thenable(n)?n.catch(function(){return[]}).then(objectsToViews):objectsToViews(n)},names:function(){if(!validateIfNotDestroyed(e,r,ti)||!validateIfOperational(e,r,ti))return[];var n=t.getSplitNames();return thenable(n)?n.catch(function(){return[]}):n}})}var to=function(){function AttributesCacheInMemory(){this.attributesCache={}}return AttributesCacheInMemory.prototype.setAttribute=function(e,t){return this.attributesCache[e]=t,!0},AttributesCacheInMemory.prototype.getAttribute=function(e){return this.attributesCache[e]},AttributesCacheInMemory.prototype.setAttributes=function(e){return this.attributesCache=E(this.attributesCache,e),!0},AttributesCacheInMemory.prototype.getAll=function(){return this.attributesCache},AttributesCacheInMemory.prototype.removeAttribute=function(e){return Object.keys(this.attributesCache).indexOf(e)>=0&&(delete this.attributesCache[e],!0)},AttributesCacheInMemory.prototype.clear=function(){return this.attributesCache={},!0},AttributesCacheInMemory}();function validateAttributes(e,t,n){return void 0==t||isObject(t)?t:(e.error(311,[n,"attributes"]),!1)}function validateAttributesDeep(e,t,n){if(!validateAttributes(e,t,n))return!1;var r=!0;return Object.keys(t).forEach(function(i){!function(e,t,n,r){if(!isString(t)||0===t.length)return e.warn(r+": you passed an invalid attribute name, attribute name must be a non-empty string."),!1;var i=isString(n),o=isFiniteNumber(n),a=isBoolean(n),s=Array.isArray(n);return!!i||!!o||!!a||!!s||(e.warn(r+": you passed an invalid attribute value for "+t+". Acceptable types are: string, number, boolean and array of strings."),!1)}(e,i,t[i],n)&&(r=!1)}),r}function clientCSDecorator(e,t,n,r){var i=function(e,t){var n=new to,r=t.getTreatment,i=t.getTreatmentWithConfig,o=t.getTreatments,a=t.getTreatmentsWithConfig,s=t.track;function combineAttributes(e){var t=n.getAll();return Object.keys(t).length>0?E({},t,e):e}return E(t,{getTreatment:function(e,t,n){return r(e,t,combineAttributes(n))},getTreatmentWithConfig:function(e,t,n){return i(e,t,combineAttributes(n))},getTreatments:function(e,t,n){return o(e,t,combineAttributes(n))},getTreatmentsWithConfig:function(e,t,n){return a(e,t,combineAttributes(n))},track:function(e,t,n,r,i){return s(e,t,n,r,i)},setAttribute:function(t,r){var i={};return i[t]=r,!!validateAttributesDeep(e,i,"setAttribute")&&(e.debug("stored "+r+" for attribute "+t),n.setAttribute(t,r))},getAttribute:function(t){return e.debug("retrieved attribute "+t),n.getAttribute(t+"")},setAttributes:function(t){return!!validateAttributesDeep(e,t,"setAttributes")&&n.setAttributes(t)},getAttributes:function(){return n.getAll()},removeAttribute:function(t){return e.debug("removed attribute "+t),n.removeAttribute(t+"")},clearAttributes:function(){return n.clear()}})}(e,t);return E(i,{getTreatment:i.getTreatment.bind(i,n),getTreatmentWithConfig:i.getTreatmentWithConfig.bind(i,n),getTreatments:i.getTreatments.bind(i,n),getTreatmentsWithConfig:i.getTreatmentsWithConfig.bind(i,n),track:r?i.track.bind(i,n,r):i.track.bind(i,n),isClientSide:!0})}var ta={UNDEFINED:0,ALL_KEYS:1,IN_SEGMENT:2,WHITELIST:3,EQUAL_TO:4,GREATER_THAN_OR_EQUAL_TO:5,LESS_THAN_OR_EQUAL_TO:6,BETWEEN:7,EQUAL_TO_SET:8,CONTAINS_ANY_OF_SET:9,CONTAINS_ALL_OF_SET:10,PART_OF_SET:11,ENDS_WITH:12,STARTS_WITH:13,CONTAINS_STRING:14,IN_SPLIT_TREATMENT:15,EQUAL_TO_BOOLEAN:16,MATCHES_STRING:17},ts={BOOLEAN:"BOOLEAN",STRING:"STRING",NUMBER:"NUMBER",SET:"SET",DATETIME:"DATETIME",NOT_SPECIFIED:"NOT_SPECIFIED"};function zeroSinceHH(e){return new Date(e).setUTCHours(0,0,0,0)}function zeroSinceSS(e){return new Date(e).setUTCSeconds(0,0)}var tu=function(){function Treatments(e,t){if(100!==e[e.length-1])throw RangeError("Provided invalid dataset as input");this._ranges=e,this._treatments=t}return Treatments.parse=function(e){var t=e.reduce(function(e,t){var n=t.size,r=t.treatment;return e.ranges.push(e.inc+=n),e.treatments.push(r),e},{inc:0,ranges:[],treatments:[]}),n=t.ranges,r=t.treatments;return new Treatments(n,r)},Treatments.prototype.getTreatmentFor=function(e){if(e<0||e>100)throw RangeError("Please provide a value between 0 and 100");var t=findIndex(this._ranges,function(t){return e<=t});return this._treatments[t]},Treatments}(),tc=[void 0,function(e){return function(t){return e.debug(4),null!=t}},function(e,t,n){return function(r){var i=n.segments.isInSegment(t,r);return thenable(i)?i.then(function(n){return e.debug(18,[t,r,i]),n}):e.debug(18,[t,r,i]),i}},function(e,t){return function(n){var r=t.has(n);return e.debug(22,[n,setToArray(t).join(","),r]),r}},function(e,t){return function(n){var r=n===t;return e.debug(12,[n,t,r]),r}},function(e,t){return function(n){var r=n>=t;return e.debug(15,[n,t,r]),r}},function(e,t){return function(n){var r=n<=t;return e.debug(16,[n,t,r]),r}},function(e,t){return function(n){var r=n>=t.start&&n<=t.end;return e.debug(5,[n,t.start,t.end,r]),r}},function(e,t){return function(n){for(var r=n.length===t.length,_loop_1=function(e){0>findIndex(t,function(t){return t===n[e]})&&(r=!1)},i=0;i<n.length&&r;i++)_loop_1(i);return e.debug(13,[n,t,r]),r}},function(e,t){return function(n){for(var r=!1,_loop_1=function(e){findIndex(n,function(n){return n===t[e]})>=0&&(r=!0)},i=0;i<t.length&&!r;i++)_loop_1(i);return e.debug(8,[n,t,r]),r}},function(e,t){return function(n){var r=!0;if(n.length<t.length)r=!1;else for(var _loop_1=function(e){0>findIndex(n,function(n){return n===t[e]})&&(r=!1)},i=0;i<t.length&&r;i++)_loop_1(i);return e.debug(7,[n,t,r]),r}},function(e,t){return function(n){for(var r=n.length<=t.length,_loop_1=function(e){0>findIndex(t,function(t){return t===n[e]})&&(r=!1)},i=0;i<n.length&&r;i++)_loop_1(i);return e.debug(17,[n,t,r]),r}},function(e,t){return function(n){var r=t.some(function(e){var t,r,i;return t=n,r=e,void 0===i&&(i=!1),!!(isString(t)&&isString(r))&&(i&&(t=t.toLowerCase(),r=r.toLowerCase()),t.slice(t.length-r.length)===r)});return e.debug(14,[n,t,r]),r}},function(e,t){return function(n){var r=t.some(function(e){return startsWith(n,e)});return e.debug(21,[n,t,r]),r}},function(e,t){return function(n){var r=t.some(function(e){return isString(n)&&n.indexOf(e)>-1});return e.debug(9,[n,t,r]),r}},function(e,t,n){var r=t.split,i=t.treatments;function checkTreatment(t,n,r){var i=!1;return Array.isArray(n)&&(i=-1!==n.indexOf(t.treatment)),e.debug(10,[r,t.treatment,t.label,r,n,i]),i}return function(t,o){var a=t.key,s=t.attributes;e.debug(11,[r,JSON.stringify(a),s?"\n attributes: "+JSON.stringify(s):""]);var u=o(e,a,r,s,n);return thenable(u)?u.then(function(e){return checkTreatment(e,i,r)}):checkTreatment(u,i,r)}},function(e,t){return function(n){var r=t===n;return e.debug(6,[t,n]),r}},function(e,t){return function(n){try{r=new RegExp(t)}catch(n){return e.debug(20,[t]),!1}var r,i=r.test(n);return e.debug(19,[n,t,i?"yes":"no"]),i}}];function dependencyProcessor(e,t){return{key:e,attributes:t}}function match(e,t,n,r,i,o){if(t){var a,s;return{treatment:(a=bucket(n,r),s=i.getTreatmentFor(a),e.debug(3,[a,n,r,s]),s),label:o}}}function evaluationResult(e,t){return{treatment:get(e,"treatment",t),label:get(e,"label","default rule")}}var tl=function(){function Engine(e,t){this.baseInfo=e,this.evaluator=t,"string"!=typeof this.baseInfo.defaultTreatment&&(this.baseInfo.defaultTreatment=z)}return Engine.parse=function(e,t,n){var r=function(e,t,n){for(var r=[],i=0;i<t.length;i++){var o=t[i],a=o.matcherGroup,s=o.partitions,u=o.label,c=o.conditionType,l=(function(e){var t=e.map(function(e){var t,n=e.matcherType,r=e.negate,i=e.keySelector,o=e.userDefinedSegmentMatcherData,a=e.whitelistMatcherData,s=e.unaryNumericMatcherData,u=e.betweenMatcherData,c=e.dependencyMatcherData,l=e.booleanMatcherData,f=e.stringMatcherData,h=i&&i.attribute,d=(t=ta[n])?t:ta.UNDEFINED,p=ts.STRING,m=void 0;return d===ta.IN_SEGMENT?m=o?o.segmentName:void 0:d===ta.WHITELIST?m=new eH(a.whitelist):d===ta.EQUAL_TO?(m=s.value,p=ts.NUMBER,"DATETIME"===s.dataType&&(m=zeroSinceHH(m),p=ts.DATETIME)):d===ta.GREATER_THAN_OR_EQUAL_TO||d===ta.LESS_THAN_OR_EQUAL_TO?(m=s.value,p=ts.NUMBER,"DATETIME"===s.dataType&&(m=zeroSinceSS(m),p=ts.DATETIME)):d===ta.BETWEEN?(m=u,p=ts.NUMBER,"DATETIME"===m.dataType&&(m.start=zeroSinceSS(m.start),m.end=zeroSinceSS(m.end),p=ts.DATETIME)):d===ta.EQUAL_TO_SET||d===ta.CONTAINS_ANY_OF_SET||d===ta.CONTAINS_ALL_OF_SET||d===ta.PART_OF_SET?(m=a.whitelist,p=ts.SET):d===ta.STARTS_WITH||d===ta.ENDS_WITH||d===ta.CONTAINS_STRING?m=a.whitelist:d===ta.IN_SPLIT_TREATMENT?(m=c,p=ts.NOT_SPECIFIED):d===ta.EQUAL_TO_BOOLEAN?(p=ts.BOOLEAN,m=l):d===ta.MATCHES_STRING&&(m=f),{attribute:h,negate:r,type:d,value:m,dataType:p}});return -1===findIndex(t,function(e){return e.type===ta.UNDEFINED})?t:[]})(a.matchers).map(function(t){var r=function(e,t,n){var r,i=t.type,o=t.value;return tc[i]&&(r=tc[i](e,o,n)),r}(e,t,n);return function(n,i,o){var a=function(e,t,n,r){var i,o=n.attribute,a=(i=void 0,o?r?(i=r[o],e.debug(23,[o,i])):e.warn(201,[o]):i=t,i),s=function(e,t,n,r,i){var o,a,s,u,c=function(e,t){switch(e){case ta.EQUAL_TO:return"DATETIME"===t?zeroSinceHH:void 0;case ta.GREATER_THAN_OR_EQUAL_TO:case ta.LESS_THAN_OR_EQUAL_TO:case ta.BETWEEN:return"DATETIME"===t?zeroSinceSS:void 0;case ta.IN_SPLIT_TREATMENT:return dependencyProcessor;default:return}}(t,r);switch(r){case ts.NUMBER:case ts.DATETIME:u=isNaN(o=toNumber(n))?void 0:o;break;case ts.STRING:a=n,isObject(n)&&(a=n.matchingKey?n.matchingKey:void 0),u=lang_toString(a)||void 0;break;case ts.SET:u=(s=Array.isArray(n)?uniq(n.map(function(e){return e+""})):[]).length?s:void 0;break;case ts.BOOLEAN:u=function(e){if(!0===e||!1===e)return e;if("string"==typeof e){var t=e.toLocaleLowerCase();if("true"===t)return!0;if("false"===t)return!1}}(n);break;case ts.NOT_SPECIFIED:u=n;break;default:u=void 0}return c&&(u=c(u,i)),e.debug(24,[n,r,u instanceof Object?JSON.stringify(u):u]),u}(e,n.type,a,n.dataType,r);if(void 0!==s)return s;e.warn(200,[a+(o?" for attribute "+o:"")])}(e,n,t,i),s=void 0!==a&&!!r&&r(a,o);return thenable(s)?s.then(function(e){return!!(e^t.negate)}):!!(s^t.negate)}});if(0===l.length){r=[];break}r.push(function(e,t,n,r,i){return function(o,a,s,u,c,l){if("ROLLOUT"===i&&(f=o.bucketingKey,s<100&&bucket(f,u)>s))return{treatment:void 0,label:"not in split"};var f,h=t(o,c,l);return thenable(h)?h.then(function(t){return match(e,t,o.bucketingKey,a,n,r)}):match(e,h,o.bucketingKey,a,n,r)}}(e,function(e,t){function andResults(t){var n=t.every(function(e){return e});return e.debug(0,[n]),n}return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.map(function(t){return t.apply(void 0,e)});return -1!==findIndex(r,thenable)?Promise.all(r).then(andResults):andResults(r)}}(e,l),tu.parse(s),u,c))}return function(e,t){function computeTreatment(t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(void 0!==i)return e.debug(1,[i.treatment]),i}e.debug(2)}return!Array.isArray(t)||Array.isArray(t)&&0===t.length?function(){return e.error(300),{treatment:z,label:tt}}:function(e,n,r,i,o,a){var s=t.map(function(t){return t(e,n,r,i,o,a)});return -1!==findIndex(s,thenable)?Promise.all(s).then(function(e){return computeTreatment(e)}):computeTreatment(s)}}(e,r)}(e,t.conditions,n);return new Engine(t,r)},Engine.prototype.getKey=function(){return this.baseInfo.name},Engine.prototype.getTreatment=function(e,t,n){var r,i,o,a=this.baseInfo,s=a.killed,u=a.seed,c=a.defaultTreatment,l=a.trafficAllocation,f=a.trafficAllocationSeed;try{r=keyParser(e)}catch(e){return{treatment:z,label:tt}}if(this.isGarbage())i=z,o="archived";else if(s)i=c,o="killed";else{var h=this.evaluator(r,u,l,f,t,n);return thenable(h)?h.then(function(e){return evaluationResult(e,c)}):evaluationResult(h,c)}return{treatment:i,label:o}},Engine.prototype.isGarbage=function(){return"ARCHIVED"===this.baseInfo.status},Engine.prototype.getChangeNumber=function(){return this.baseInfo.changeNumber},Engine}(),tf={treatment:z,label:tt,config:null};function treatmentsException(e){var t={};return e.forEach(function(e){t[e]=tf}),t}function evaluateFeature(e,t,n,r,i){var o;try{o=i.splits.getSplit(n)}catch(e){return tf}return thenable(o)?o.then(function(n){return getEvaluation(e,n,t,r,i)}).catch(function(){return tf}):getEvaluation(e,o,t,r,i)}function getEvaluation(e,t,n,r,i){var o={treatment:z,label:e9,config:null};if(t){var a=tl.parse(e,t,i);if(thenable(o=a.getTreatment(n,r,evaluateFeature)))return o.then(function(e){return e.changeNumber=a.getChangeNumber(),e.config=t.configurations&&t.configurations[e.treatment]||null,e});o.changeNumber=a.getChangeNumber(),o.config=t.configurations&&t.configurations[o.treatment]||null}return o}function getEvaluations(e,t,n,r,i,o){var a={},s=[];return t.forEach(function(t){var u=getEvaluation(e,n[t],r,i,o);thenable(u)?s.push(u.then(function(e){a[t]=e})):a[t]=u}),s.length>0?Promise.all(s).then(function(){return a}):a}function logTTExistanceWarning(e,t,n){e.warn(217,[n,t])}function isStorageSync(e){return -1===[Y,$].indexOf(e.mode)}var th={treatment:z,label:te};function treatmentsNotReady(e){var t={};return e.forEach(function(e){t[e]=th}),t}var td=/^[a-zA-Z0-9][-_.:a-zA-Z0-9]{0,79}$/,tp="event_type";function validateEvent(e,t,n){if(void 0==t)e.error(315,[n,tp]);else if(isString(t)){if(0===t.length)e.error(319,[n,tp]);else{if(td.test(t))return t;e.error(310,[n,t])}}else e.error(318,[n,tp]);return!1}function validateEventValue(e,t,n){return isFiniteNumber(t)||void 0==t?t:(e.error(313,[n]),!1)}var tm={NULL:0,STRING:2,BOOLEAN:4,NUMBER:8};function validateEventProperties(e,t,n){if(void 0==t)return{properties:null,size:1024};if(!isObject(t))return e.error(311,[n,"properties"]),{properties:!1,size:1024};var r=Object.keys(t),i=E({},t),o={properties:i,size:1024};r.length>300&&e.warn(212,[n]);for(var a=0;a<r.length;a++){o.size+=r[a].length*tm.STRING;var s=i[r[a]],u=isString(s),c=isFiniteNumber(s),l=isBoolean(s),f=null===s;if(u||c||l||f||(i[r[a]]=null,s=null,f=!0,e.warn(211,[n,r[a]])),f?o.size+=tm.NULL:c?o.size+=tm.NUMBER:l?o.size+=tm.BOOLEAN:u&&(o.size+=s.length*tm.STRING),o.size>32768){e.error(312,[n]),o.properties=!1;break}}return o}function sdkClientFactory(e,t){var n=e.sdkReadinessManager,r=e.syncManager,i=e.storage,o=e.signalListener,a=e.settings,s=e.telemetryTracker,u=e.uniqueKeysTracker,c=0;function __flush(){return r?r.flush():Promise.resolve()}return E(Object.create(n.sdkStatus),function(e,t,n){var r=e.log,i=isStorageSync(e);function validateEvaluationParams(e,t,i,o){var a=startsWith(o,"getTreatments"),s=validateKey(r,e,o),u=a?validateSplits(r,t,o):validateSplit(r,t,o),c=validateAttributes(r,i,o),l=validateIfNotDestroyed(r,n,o);return validateIfOperational(r,n,o),{valid:l&&s&&u&&!1!==c,key:s,splitOrSplits:u,attributes:c}}function wrapResult(e){return i?e:Promise.resolve(e)}return{getTreatment:function(e,n,r){var i=validateEvaluationParams(e,n,r,"getTreatment");return i.valid?t.getTreatment(i.key,i.splitOrSplits,i.attributes):wrapResult(z)},getTreatmentWithConfig:function(e,n,r){var i=validateEvaluationParams(e,n,r,"getTreatmentWithConfig");return i.valid?t.getTreatmentWithConfig(i.key,i.splitOrSplits,i.attributes):wrapResult(E({},q))},getTreatments:function(e,n,r){var i=validateEvaluationParams(e,n,r,"getTreatments");if(i.valid)return t.getTreatments(i.key,i.splitOrSplits,i.attributes);var o={};return i.splitOrSplits&&i.splitOrSplits.forEach(function(e){return o[e]=z}),wrapResult(o)},getTreatmentsWithConfig:function(e,n,r){var i=validateEvaluationParams(e,n,r,"getTreatmentsWithConfig");if(i.valid)return t.getTreatmentsWithConfig(i.key,i.splitOrSplits,i.attributes);var o={};return i.splitOrSplits&&i.splitOrSplits.forEach(function(e){return o[e]=E({},q)}),wrapResult(o)},track:function(e,o,a,s,u){var c=validateKey(r,e,"track"),l=validateTrafficType(r,o,"track"),f=validateEvent(r,a,"track"),h=validateEventValue(r,s,"track"),d=validateEventProperties(r,u,"track"),p=d.properties,m=d.size;return validateIfNotDestroyed(r,n,"track")&&c&&l&&f&&!1!==h&&!1!==p?t.track(c,l,f,h,p,m):!i&&Promise.resolve(!1)}}}(a,function(e){var t=e.sdkReadinessManager.readinessManager,n=e.storage,r=e.settings,i=e.impressionsTracker,o=e.eventTracker,a=e.telemetryTracker,s=r.log,u=r.mode;function getTreatment(e,o,u,c){void 0===c&&(c=!1);var l=a.trackEval(c?"tc":"t"),wrapUp=function(t){var n=[],r=processEvaluation(t,o,e,u,c,"getTreatment"+(c?"withConfig":""),n);return i.track(n,u),l(n[0]&&n[0].label),r},f=t.isReady()||t.isReadyFromCache()?evaluateFeature(s,e,o,u,n):isStorageSync(r)?th:Promise.resolve(th);return thenable(f)?f.then(function(e){return wrapUp(e)}):wrapUp(f)}function getTreatments(e,o,u,c){void 0===c&&(c=!1);var l=a.trackEval(c?"tcs":"ts"),wrapUp=function(t){var n=[],r={};return Object.keys(t).forEach(function(i){r[i]=processEvaluation(t[i],i,e,u,c,"getTreatments"+(c?"withConfig":""),n)}),i.track(n,u),l(n[0]&&n[0].label),r},f=t.isReady()||t.isReadyFromCache()?function(e,t,n,r,i){var o;try{o=i.splits.getSplits(n)}catch(e){return treatmentsException(n)}return thenable(o)?o.then(function(o){return getEvaluations(e,n,o,t,r,i)}).catch(function(){return treatmentsException(n)}):getEvaluations(e,n,o,t,r,i)}(s,e,o,u,n):isStorageSync(r)?treatmentsNotReady(o):Promise.resolve(treatmentsNotReady(o));return thenable(f)?f.then(function(e){return wrapUp(e)}):wrapUp(f)}function processEvaluation(e,n,r,i,o,a,u){var c=getMatching(r),l=isObject(r)?r.bucketingKey:void 0,f=e.treatment,h=e.label,d=e.changeNumber,p=e.config;return(s.info(102,[n,c,f,h]),validateSplitExistance(s,t,n,h,a)&&(s.info(103),u.push({feature:n,keyName:c,treatment:f,time:Date.now(),bucketingKey:l,label:h,changeNumber:d})),o)?{treatment:f,config:void 0===p?null:p}:f}return{getTreatment:getTreatment,getTreatmentWithConfig:function(e,t,n){return getTreatment(e,t,n,!0)},getTreatments:getTreatments,getTreatmentsWithConfig:function(e,t,n){return getTreatments(e,t,n,!0)},track:function(e,r,i,c,l,f){void 0===f&&(f=1024);var h=a.trackEval("tr"),d=getMatching(e),p=Date.now();!function(e,t,n,r,i,o){if(t.isReady()&&r!==X){var a=n.trafficTypeExists(i);thenable(a)?a.then(function(t){return t||logTTExistanceWarning(e,i,o),t}):a||logTTExistanceWarning(e,i,o)}}(s,t,n.splits,u,r,"track");var m=o.track({eventTypeId:i,trafficTypeName:r,value:c,timestamp:p,key:d,properties:l},f);return thenable(m)?m.then(function(e){return h(),e}):(h(),m)},isClientSide:!1}}(e),n.readinessManager),{flush:function(){var e,t;return(t=(e=Date.now())-c)<1e3?(a.log.warn("Flush cooldown, remaining time "+(1e3-t)/1e3+" seconds"),Promise.resolve()):(c=e,__flush())},destroy:function(){return n.readinessManager.destroy(),t||s.sessionLength(),r&&r.stop(),__flush().then(function(){if(o&&o.stop(),!t){var e;eT[e=a.core.authorizationKey]&&eT[e]--,0===eT[e]&&delete eT[e]}return u&&u.stop(),i.destroy()})}})}function buildInstanceId(e,t){return(e.matchingKey?e.matchingKey:e)+"-"+(e.bucketingKey?e.bucketingKey:e)+"-"+(void 0!==t?t:"")}var tg="Client instantiation";function sdkClientMethodCSFactory(e){var t=e.storage,n=e.syncManager,r=e.sdkReadinessManager,i=e.settings,o=i.core,a=o.key,s=o.trafficType,u=i.startup.readyTimeout,c=i.log,l=clientCSDecorator(c,sdkClientFactory(e),a,s),f=buildInstanceId(keyParser(a),s),h={};return h[f]=l,function(i,o){if(void 0===i)return c.debug(27),l;var a,s=validateKey(c,i,"Shared "+tg);if(!1===s)throw Error("Shared Client needs a valid key.");if(void 0!==o&&!1===(a=validateTrafficType(c,o,"Shared "+tg)))throw Error("Shared Client needs a valid traffic type or no traffic type at all.");var f=buildInstanceId(s,a);if(h[f])c.debug(28);else{var d=getMatching(s),p=r.shared(u),m=t.shared&&t.shared(d,function(e){if(e){p.readinessManager.timeout();return}p.readinessManager.segments.emit(el)}),g=n&&m&&n.shared(d,p.readinessManager,m);h[f]=clientCSDecorator(c,sdkClientFactory(E({},e,{sdkReadinessManager:p,storage:m||t,syncManager:g,signalListener:void 0}),!0),s,a),g&&g.start(),c.info(104)}return h[f]}}var ty=function(){function MapPoly(e){var t=this;this.__mapKeysData__=[],this.__mapValuesData__=[],Array.isArray(e)&&e.forEach(function(e){t.set(e[0],e[1])})}return MapPoly.prototype.clear=function(){this.__mapKeysData__.length&&(this.__mapKeysData__.length=0,this.__mapValuesData__.length=0)},MapPoly.prototype.delete=function(e){var t=this.__mapKeysData__.indexOf(e);return -1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),!0)},MapPoly.prototype.forEach=function(e,t){for(var n=0;n<this.__mapKeysData__.length;n++)e.call(t,this.__mapValuesData__[n],this.__mapKeysData__[n],this)},MapPoly.prototype.get=function(e){var t=this.__mapKeysData__.indexOf(e);if(-1!==t)return this.__mapValuesData__[t]},MapPoly.prototype.has=function(e){return -1!==this.__mapKeysData__.indexOf(e)},MapPoly.prototype.set=function(e,t){var n=this.__mapKeysData__.indexOf(e);return -1===n&&(n=this.__mapKeysData__.push(e)-1),this.__mapValuesData__[n]=t,this},Object.defineProperty(MapPoly.prototype,"size",{get:function(){return this.__mapKeysData__.length},enumerable:!1,configurable:!0}),MapPoly}(),tv="function"==typeof Array.from&&"function"==typeof Map&&Map.prototype&&Map.prototype.values?Map:ty,Node=function(e,t,n,r){this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null},tb=function(){function LinkedList(){this.tail=null,this.head=null,this.length=0}return LinkedList.prototype.removeNode=function(e){if(e&&e instanceof Node){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t}},LinkedList.prototype.unshiftNode=function(e){if(e&&e instanceof Node&&e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},LinkedList.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)this.head=new Node(arguments[e],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},LinkedList}(),tS=function(){function LRUCache(e){this.maxLen=e||1,this.items=new tv,this.lru=new tb}return LRUCache.prototype.get=function(e){var t=this.items.get(e);if(t&&t instanceof Node)return this.lru.unshiftNode(t),t.value.value},LRUCache.prototype.set=function(e,t){var n=this.items.get(e);if(n){if(!(n instanceof Node))return!1;this.lru.unshiftNode(n),this.lru.head.value.value=t}else{if(this.lru.length===this.maxLen){var r=this.lru.tail;if(!r)return!1;this.items.delete(r.value.key),this.lru.removeNode(this.lru.tail)}this.lru.unshift({key:e,value:t}),this.items.set(e,this.lru.head)}return!0},LRUCache}(),tT=function(){function ImpressionObserver(e,t){this.cache=new tS(e),this.hasher=t}return ImpressionObserver.prototype.testAndSet=function(e){var t=this.hasher(e),n=this.cache.get(t);return this.cache.set(t,e.time),n},ImpressionObserver}();function hashImpression32(e){return hash(e.keyName+":"+e.feature+":"+e.treatment+":"+e.label+":"+e.changeNumber)}function impressionObserverCSFactory(){return new tT(500,hashImpression32)}var tC="ga-to-split: ",tE="ga-to-split:mapper",t_=(a={eventTypeId:{event:"eventAction",social:"socialAction"},eventValue:{event:"eventValue",timing:"timingValue"},eventProperties:{pageview:["page"],screenview:["screenName"],event:["eventCategory","eventLabel"],social:["socialNetwork","socialTarget"],timing:["timingCategory","timingVar","timingLabel"],exception:["exDescription","exFatal"]}},function(e){var t=e.get("hitType"),n=e.get(a.eventTypeId[t]||"hitType"),r=e.get(a.eventValue[t]),i={},o=a.eventProperties[t];if(o)for(var s=0;s<o.length;s++){var u=e.get(o[s]);void 0!==u&&(i[o[s]]=u)}return{eventTypeId:n,value:r,properties:i,timestamp:Date.now()}}),tw=/^[^a-zA-Z0-9]+/,tk=/[^-_.:a-zA-Z0-9]+/g,tM="split-to-ga: ",tI="`ga` command queue not found.",tR="No hit was sent.",tA=function(){function SplitToGa(e,t){this.trackerNames=SplitToGa.defaultTrackerNames,this.log=e,t&&("function"==typeof t.filter&&(this.filter=t.filter),"function"==typeof t.mapper&&(this.mapper=t.mapper),Array.isArray(t.trackerNames)&&(this.trackerNames=uniq(t.trackerNames)),this.impressions=t.impressions,this.events=t.events),e.info(tM+"integration started"),"function"!=typeof SplitToGa.getGa()&&e.warn(tM+(tI+" No hits will be sent until it is available."))}return SplitToGa.defaultMapper=function(e){var t=e.type,n=e.payload;switch(t){case W:return{hitType:"event",eventCategory:"split-impression",eventAction:"Evaluate "+n.impression.feature,eventLabel:"Treatment: "+n.impression.treatment+". Targeting rule: "+n.impression.label+".",nonInteraction:!0};case G:return{hitType:"event",eventCategory:"split-event",eventAction:n.eventTypeId,eventValue:n.value,nonInteraction:!0}}},SplitToGa.getGa=function(){return"undefined"!=typeof window?window[window.GoogleAnalyticsObject||"ga"]:void 0},SplitToGa.validateFieldsObject=function(e,t){return!!t&&!!t.hitType||(e.warn(tM+"your custom mapper returned an invalid FieldsObject instance. It must be an object with at least a `hitType` field."),!1)},SplitToGa.prototype.queue=function(e){var t,n=SplitToGa.getGa();if(n){if(!1===this.impressions&&e.type===W||!1===this.events&&e.type===G)return;try{if(this.filter&&!this.filter(e)||(t=SplitToGa.defaultMapper(e),this.mapper&&(!(t=this.mapper(e,t))||!SplitToGa.validateFieldsObject(this.log,t))))return}catch(e){this.log.warn(tM+"queue method threw: "+e+". "+tR);return}this.trackerNames.forEach(function(e){t.splitHit=!0,n(e?e+".send":"send",t)})}else this.log.warn(tM+(tI+" ")+tR)},SplitToGa.defaultTrackerNames=[""],SplitToGa}();function integrationsManagerFactory(e,t){return function(e,t){var n=[];if(e.forEach(function(e){var r=e(t);r&&r.queue&&n.push(r)}),0!==n.length)return{handleImpression:function(e){n.forEach(function(t){return t.queue({type:W,payload:e})})},handleEvent:function(e){n.forEach(function(t){return t.queue({type:G,payload:e})})}}}(e.map(function(e){switch(e.type){case e6:return function(e){function GoogleAnalyticsToSplitFactory(t){var n,r,i,o,a,s,u,c,l,f,h;return n=e,r=t.storage,o=(i=t.settings).core,a=i.log,s=t.telemetryTracker,u={prefix:"ga",identities:o.key&&o.trafficType?[{key:o.key,trafficType:o.trafficType}]:void 0},void(c=window,l=!0===n.autoRequire,f=c.GoogleAnalyticsObject||"ga",c[f]=c[f]||function(){(c[f].q=c[f].q||[]).push(arguments)},c[f]("provide","splitTracker",function(e,t){var i,o,s,c=E({},u,n,t);this.tracker=e;var l=Array.isArray(i=c.identities)?(void 0===o&&(o=JSON.stringify),s={},i.filter(function(e){var t=o(e);return!Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=!0)})).filter(function(e){if(!e)return!1;var t=e.key,n=e.trafficType;return!!((isString(t)||isFiniteNumber(t))&&isString(n))}):[];if(0===l.length){a.warn(tC+"No valid identities were provided. Please check that you are passing a valid list of identities or providing a traffic type at the SDK configuration.");return}var f=l.length-c.identities.length;f&&a.warn(tC+(f+" identities were discarded because they are invalid or duplicated. Identities must be an array of objects with key and trafficType.")),c.identities=l,isString(c.prefix)||(a.warn(tC+"The provided `prefix` was ignored since it is invalid. Please check that you are passing a string object as `prefix`."),c.prefix=void 0);var h=e.get("sendHitTask");e.set("sendHitTask",function(e){if(h(e),!(!1===c.hits||e.get("splitHit"))){try{if(c.filter&&!c.filter(e))return}catch(e){a.warn(tC+"custom filter threw: "+e);return}var t,n=t_(e);if(c.mapper){try{n=c.mapper(e,n)}catch(e){a.warn(tC+"custom mapper threw: "+e);return}if(!n)return}c.prefix&&(n.eventTypeId=c.prefix+"."+n.eventTypeId),n.eventTypeId=function(e,t){if(!isString(t)||0===t.length)return t;var n=t.replace(tw,"").replace(tk,"_"),r=n.slice(0,80);return r.length<n.length&&e.warn(tC+"EventTypeId was truncated because it cannot be more than 80 characters long."),r}(a,n.eventTypeId),validateEvent(a,(t=n).eventTypeId,tE)&&!1!==validateEventValue(a,t.value,tE)&&!1!==validateEventProperties(a,t.properties,tE).properties&&(!t.timestamp||isFiniteNumber(t.timestamp))&&(!t.key||!1!==validateKey(a,t.key,tE))&&(!t.trafficTypeName||!1!==validateTrafficType(a,t.trafficTypeName,tE))&&(n.key&&n.trafficTypeName?r.events.track(n):c.identities.forEach(function(e){var t=E({key:e.key,trafficTypeName:e.trafficType},n);r.events.track(t)}))}}),a.info(tC+"integration started")}),h=c[f].q&&c[f].q.push!==[].push,l&&!h&&a.error(tC+"integration is configured to autorequire the splitTracker plugin, but the necessary script does not seem to have run. Please check the docs."),s&&h&&s.addTag("integration:ga-autorequire"))}return void 0===e&&(e={}),GoogleAnalyticsToSplitFactory.type="GOOGLE_ANALYTICS_TO_SPLIT",GoogleAnalyticsToSplitFactory}(e);case e4:return function(e){function SplitToGoogleAnalyticsFactory(t){return new tA(t.settings.log,e)}return void 0===e&&(e={}),SplitToGoogleAnalyticsFactory.type="SPLIT_TO_GOOGLE_ANALYTICS",SplitToGoogleAnalyticsFactory}(e)}}).filter(function(e){return e&&"function"==typeof e}),t)}function __InLocalStorageMockFactory(e){var t=InMemoryStorageCS_InMemoryStorageCSFactory(e);return t.splits.checkCache=function(){return!0},t}function promiseWrapper(e,t){var n=!1,r=!1,i=function chain(e){var i=new Promise(function(n,i){return e.then(n,function(e){r?i(e):t(e)})}),o=i.then;return Object.defineProperty(i,"then",{value:function(e,t){var a=o.call(i,e,t);return("function"==typeof e&&(n=!0),"function"==typeof t)?(r=!0,a):chain(a)}}),i}(e);return i.hasOnFulfilled=function(){return n},i}__InLocalStorageMockFactory.type=J;var tO={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",NONE:"NONE"},tL={DEBUG:1,INFO:2,WARN:3,ERROR:4,NONE:5};function isLogLevelString(e){return!!find(tO,function(t){return e===t})}function _sprintf(e,t){void 0===e&&(e=""),void 0===t&&(t=[]);var n=0;return e.replace(/%s/g,function(){return t[n++]})}var tx={prefix:"splitio",logLevel:tO.NONE,showLevel:!0},tN=function(){function Logger(e,t){this.options=E({},tx,e),this.codes=t||new tv,this.logLevel=tL[this.options.logLevel]}return Logger.prototype.setLogLevel=function(e){this.options.logLevel=e,this.logLevel=tL[e]},Logger.prototype.debug=function(e,t){this._shouldLog(1)&&this._log(tO.DEBUG,e,t)},Logger.prototype.info=function(e,t){this._shouldLog(2)&&this._log(tO.INFO,e,t)},Logger.prototype.warn=function(e,t){this._shouldLog(3)&&this._log(tO.WARN,e,t)},Logger.prototype.error=function(e,t){this._shouldLog(4)&&this._log(tO.ERROR,e,t)},Logger.prototype._log=function(e,t,n){if("number"==typeof t){var r=this.codes.get(t);t=r?_sprintf(r,n):"Message code "+t+(n?", with args: "+n.toString():"")}else n&&(t=_sprintf(t,n));console.log(this._generateLogMessage(e,t))},Logger.prototype._generateLogMessage=function(e,t){var n="";return this.options.showLevel&&(n+="["+e+"]"+(e===tO.INFO||e===tO.WARN?" ":"")+" "),this.options.prefix&&(n+=this.options.prefix+" => "),n+t},Logger.prototype._shouldLog=function(e){return e>=this.logLevel},Logger}(),tF={add:function(){return!0},contains:function(){return!0},clear:function(){}},tD={GRANTED:et,DECLINED:en,UNKNOWN:er},tU=n(73656),tP=void 0!==tU&&void 0!==tU.version&&!!tU.version,tK=[[300,M+"Invalid feature flag, no valid rules found"],[301,"logger: Invalid Log Level - No changes to the logs will be applied."],[303,"The SDK will not get ready. Reason: %s"],[307,P+"Could not store impressions bulk with %s impression(s). Error: %s"],[308,P+"Impression listener logImpression method threw: %s."],[309,K+"Failed to queue %s"],[304,L+"There was an issue loading the mock feature flags data. No changes will be applied to the current cache. %s"],[305,x+"Failed to connect or error on streaming connection, with error message: %s"],[306,x+"Failed to authenticate for streaming. Error: %s."],[322,"Response status is not OK. Status: %s. URL: %s. Message: %s"],[302,"A listener was added for %s on the SDK, which has already fired and won't be emitted again. The callback won't be executed."],[314,"%s: Client has already been destroyed - no calls possible."],[310,'%s: you passed "%s", event_type must adhere to the regular expression /^[a-zA-Z0-9][-_.:a-zA-Z0-9]{0,79}$/g. This means an event_type must be alphanumeric, cannot be more than 80 characters long, and can only include a dash, underscore, period, or colon as separators of alphanumeric characters.'],[311,"%s: %s must be a plain object."],[312,"%s: the maximum size allowed for the properties is 32768 bytes, which was exceeded. Event not queued."],[313,"%s: value must be a finite number."],[315,"%s: you passed a null or undefined %s. It must be a non-empty string."],[316,"%s: %s too long. It must have 250 characters or less."],[317,"%s: Key must be an object with bucketingKey and matchingKey with valid string properties."],[318,"%s: you passed an invalid %s. It must be a non-empty string."],[319,"%s: you passed an empty %s. It must be a non-empty string."],[320,"%s: %s must be a non-empty array."],[325,"%s: provided param must be a boolean value."],[321,_+': you passed an invalid "%s" config param. It should be one of the following values: %s. Defaulting to "%s".'],[323,_+': an invalid value was received for "sync.localhostMode" config. A valid entity should be provided for localhost mode.'],[324,_+": the provided storage is invalid.%s Falling back into default MEMORY storage"],[326,_+': the provided "%s" config param is lower than allowed. Setting to the minimum value %s seconds']].concat([[200,R+"Value %s doesn't match with expected type."],[201,R+"Defined attribute [%s], no attributes received."],[204,F+"Retrying download of segments #%s. Reason: %s"],[205,N+"Error while doing fetch of feature flags. %s"],[206,x+"Error parsing SSE error notification: %s"],[207,x+"Error parsing SSE message notification: %s"],[208,x+"Falling back to polling mode. Reason: %s"],[209,U+"Dropping %s after retry. Reason: %s."],[210,U+"Failed to push %s, keeping data to retry on next iteration. Reason: %s."],[203,"%s: the SDK is not ready, results may be incorrect. Make sure to wait for SDK readiness before using this method."],[202,"No listeners for SDK Readiness detected. Incorrect control treatments could have been logged if you called getTreatment/s while the SDK was not yet ready."],[211,'%s: Property "%s" is of invalid type. Setting value to null.'],[212,"%s: Event has more than 300 properties. Some of them will be trimmed when processed."],[213,'%s: %s "%s" is not of type string, converting.'],[214,'%s: %s "%s" has extra whitespace, trimming.'],[215,'%s: feature flag "%s" does not exist in this environment. Please double check what feature flags exist in the Split user interface.'],[216,"%s: traffic_type_name should be all lowercase - converting string to lowercase."],[217,'%s: traffic type "%s" does not have any corresponding feature flag in this environment, make sure you\'re tracking your events to a valid traffic type defined in the Split user interface.'],[218,_+": %s integration item(s) at settings is invalid. %s"],[219,_+': feature flag filters have been configured but will have no effect if mode is not "%s", since synchronization is being deferred to an external tool.'],[220,_+': feature flag filter at position %s is invalid. It must be an object with a valid filter type ("byName" or "byPrefix") and a list of "values".'],[221,_+": feature flag filter configuration must be a non-empty array of filter objects."],[222,_+": You already have %s. We recommend keeping only one instance of the factory at all times (Singleton pattern) and reusing it throughout your application"],[223,x+"Fetching MySegments due to an error processing %s notification: %s"],[224,x+"Fetching SplitChanges due to an error processing SPLIT_UPDATE notification: %s"]]),tj="Split SDK is ready",tB=tK.concat([[100,tj+" from cache"],[101,tj],[102,P+"Feature flag: %s. Key: %s. Evaluation: %s. Label: %s"],[103,P+"Queueing corresponding impression."],[104,"New shared client instance created."],[105,"New Split SDK instance created."],[120,K+"Successfully queued %s"],[121,P+"Successfully stored %s impression(s)."],[122,"UserConsent: consent status changed from %s to %s."],[123,"UserConsent: call had no effect because it was the current consent status (%s)."],[124,"Starting the SDK with %s user consent. No data will be sent."],[106,D+"Turning segments data polling %s."],[107,D+"Starting polling"],[108,D+"Stopping polling"],[109,N+"Retrying download of feature flags #%s. Reason: %s"],[115,U+"Flushing full %s queue and reseting timer."],[116,U+"Pushing %s."],[110,x+"Refreshing streaming token in %s seconds, and connecting streaming in %s seconds."],[111,x+"Attempting to reconnect streaming in %s seconds."],[112,x+"Connecting streaming."],[113,x+"Streaming is disabled for given SDK key. Switching to polling mode."],[114,x+"Disconnecting streaming."],[117,O+"Streaming not available. Starting polling."],[118,O+"Streaming couldn't connect. Continue polling."],[119,O+"Streaming connected. Syncing and stopping polling."]]).concat([[0,M+"[andCombiner] evaluates to %s"],[1,M+"Treatment found: %s"],[2,M+"All predicates evaluated, no treatment found."],[3,k+': using algo "murmur" bucket %s for key %s using seed %s - treatment %s'],[4,I+"[allMatcher] is always true"],[5,I+"[betweenMatcher] is %s between %s and %s? %s"],[6,I+"[booleanMatcher] %s === %s"],[7,I+"[containsAllMatcher] %s contains all elements of %s? %s"],[8,I+"[containsAnyMatcher] %s contains at least an element of %s? %s"],[9,I+"[containsStringMatcher] %s contains %s? %s"],[10,I+'[dependencyMatcher] parent feature flag "%s" evaluated to "%s" with label "%s". %s evaluated treatment is part of [%s] ? %s.'],[11,I+'[dependencyMatcher] will evaluate parent feature flag: "%s" with key: %s %s'],[12,I+"[equalToMatcher] is %s equal to %s? %s"],[13,I+"[equalToSetMatcher] is %s equal to set %s? %s"],[14,I+"[endsWithMatcher] %s ends with %s? %s"],[15,I+"[greaterThanEqualMatcher] is %s greater than %s? %s"],[16,I+"[lessThanEqualMatcher] is %s less than %s? %s"],[17,I+"[partOfMatcher] %s is part of %s? %s"],[18,I+"[segmentMatcher] evaluated %s / %s => %s"],[19,I+"[stringMatcher] does %s matches with %s? %s"],[20,I+"[stringMatcher] %s is an invalid regex"],[21,I+"[startsWithMatcher] %s starts with %s? %s"],[22,I+"[whitelistMatcher] evaluated %s in [%s] => %s"],[23,R+"Extracted attribute [%s], [%s] will be used for matching."],[24,k+":sanitize: Attempted to sanitize [%s] which should be of type [%s]. Sanitized and processed value => [%s]"],[25,j+"Registering cleanup handler %s"],[26,j+"Deregistering cleanup handler %s"],[27,"Retrieving default SDK client."],[28,"Retrieving existing SDK client."],[29,"Retrieving manager instance."],[30,L+"Feature flags data: \n%s"],[31,N+"Spin up feature flags update using since = %s"],[32,N+"New feature flags %s"],[33,N+"Removed feature flags %s"],[34,N+"Segment names collected %s"],[35,x+"New SSE message received, with data: %s."],[36,A+": Starting %s. Running each %s millis"],[37,A+": Running %s"],[38,A+": Stopping %s"],[39,_+': feature flags filtering criteria is "%s".']]),tz=n(73656),tq=new tv(tB),tW=String(tP?tz.env.SPLITIO_DEBUG:isLocalStorageAvailable()?localStorage.getItem("splitio_debug"):""),tG=tO.NONE;function flush(){return Promise.resolve()}/^(enabled?|on)/i.test(tW)?tG=tO.DEBUG:isLogLevelString(tW)&&(tG=tW);var tH=(s=function(){var e={emptyMock:"1"};return function(t){var n,r=t.features||{};if(!((n=Object.keys(r)).length!==Object.keys(e).length?(e=r,!0):n.some(function(t){var n,i,o=!e[t],a=typeof(n=e[t])!=typeof(i=r[t])||("string"==typeof n?n!==i:n.treatment!==i.treatment||n.config!==i.config),s=o||a;return s&&(e=r),s})))return!1;var i={};return forOwn(r,function(e,t){var n,r,o=e,a=null;isObject(e)&&(o=e.treatment,a=e.config||a);var s={};null!==a&&(s[o]=a),i[t]={trafficTypeName:"localhost",conditions:[(r=(n={treatment:o}).treatment,n.keys?{conditionType:"WHITELIST",matcherGroup:{combiner:"AND",matchers:[{keySelector:null,matcherType:"WHITELIST",negate:!1,whitelistMatcherData:{whitelist:isString(n.keys)?[n.keys]:n.keys}}]},partitions:[{treatment:r,size:100}],label:"whitelisted "+r}:{conditionType:"ROLLOUT",matcherGroup:{combiner:"AND",matchers:[{keySelector:null,matcherType:"ALL_KEYS",negate:!1}]},partitions:[{treatment:r,size:100}],label:"default rule"})],configurations:s}}),i}},function(e){var t,n,r,i,o=e.settings,a=e.readiness,u=e.storage;return E((t=s(),syncTaskFactory(o.log,(n=o.log,r=u.splits,i=!0,function(){var e=[],s=null,u={};try{u=t(o)}catch(e){s=e,n.error(304,[e])}return!s&&u?(n.debug(30,[JSON.stringify(u)]),forOwn(u,function(t,n){e.push([n,{name:n,status:"ACTIVE",killed:!1,trafficAllocation:100,defaultTreatment:z,conditions:t.conditions||[],configurations:t.configurations,trafficTypeName:t.trafficTypeName}])}),Promise.all([r.clear(),r.addSplits(e)]).then(function(){return a.splits.emit(eu),i&&(i=!1,Promise.resolve(r.checkCache()).then(function(e){e&&a.splits.emit(ec),a.segments.emit(el)})),!0})):Promise.resolve(!0)}),o.scheduler.offlineRefreshRate,"offlineUpdater")),{flush:flush,shared:function(e,t){return{start:function(){setTimeout(function(){t.segments.emit(el)},0)},stop:function(){},isRunning:function(){return!0},flush:flush}}})});tH.type="LocalhostFromObject";var tQ=[en,et,er],tV="LOCALSTORAGE",tX={defaults:{startup:{requestTimeoutBeforeReady:5,retriesOnFailureBeforeReady:1,readyTimeout:10,eventsFirstPushWindow:10},userConsent:et,version:"javascript-10.23.0"},acceptKey:!0,acceptTT:!0,runtime:function(){return{ip:!1,hostname:!1}},storage:function(e){var t,n=e.log,r=e.mode,i=e.storage,o=void 0===i?{type:J}:i,a=o.type,s=o.options,u=o.prefix,fallbackToMemory=function(){t=a,a=J};return r===X&&a===tV&&fallbackToMemory(),(a===J||a===tV)&&(a!==tV||isLocalStorageAvailable())||(fallbackToMemory(),n.error("Invalid or unavailable storage. Fallbacking into MEMORY storage")),{type:a,options:void 0===s?{}:s,prefix:u,__originalType:t}},integrations:function(e){var t;return t=[e6,e4],function(e,t,n){var r=e.integrations,i=e.log;if(!Array.isArray(r)||0===r.length)return[];var o=r.filter(t),a=r.length-o.length;return a&&i.warn(218,[a,n||""]),o}(e,function(e){return e&&isString(e.type)&&t.indexOf(e.type)>-1},'Integration items must have a valid "type" value')},logger:function(e){var t=e.debug,n=void 0!==t?"boolean"==typeof t?t?tO.DEBUG:tO.NONE:"string"==typeof t&&isLogLevelString(t)?t:void 0:tG,r=new tN({logLevel:n||tG},tq);return n||r._log(tO.ERROR,"Invalid Log Level - No changes to the logs will be applied."),r},localhost:function(){return tH},consent:function(e){var t=e.userConsent,n=e.log;return(t=stringToUpperCase(t),tQ.indexOf(t)>-1)?t:(n.error(321,["userConsent",tQ,et]),et)}},tZ="object"==typeof Reflect?Reflect:null,tY=tZ&&"function"==typeof tZ.apply?tZ.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};g=tZ&&"function"==typeof tZ.ownKeys?tZ.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var t$=Number.isNaN||function(e){return e!=e};function EventEmitter(){EventEmitter.init.call(this)}EventEmitter.prototype._events=void 0,EventEmitter.prototype._eventsCount=0,EventEmitter.prototype._maxListeners=void 0;var tJ=10;function checkListener(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function _getMaxListeners(e){return void 0===e._maxListeners?EventEmitter.defaultMaxListeners:e._maxListeners}function _addListener(e,t,n,r){if(checkListener(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=_getMaxListeners(e))>0&&a.length>i&&!a.warned){a.warned=!0;var i,o,a,s=Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,console&&console.warn&&console.warn(s)}return e}function onceWrapper(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=onceWrapper.bind(r);return i.listener=n,r.wrapFn=i,i}function _listeners(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):arrayClone(i,i.length)}function listenerCount(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function arrayClone(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return tJ},set:function(e){if("number"!=typeof e||e<0||t$(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");tJ=e}}),EventEmitter.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},EventEmitter.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||t$(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)},EventEmitter.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,a=Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)tY(s,this,t);else for(var u=s.length,c=arrayClone(s,u),n=0;n<u;++n)tY(c[n],this,t);return!0},EventEmitter.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)},EventEmitter.prototype.once=function(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.prependOnceListener=function(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this},EventEmitter.prototype.removeListener=function(e,t){var n,r,i,o,a;if(checkListener(t),void 0===(r=this._events)||void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0==arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},EventEmitter.prototype.listeners=function(e){return _listeners(this,e,!0)},EventEmitter.prototype.rawListeners=function(e){return _listeners(this,e,!1)},EventEmitter.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):listenerCount.call(e,t)},EventEmitter.prototype.listenerCount=listenerCount,EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]};var t0=n(52015),t1=n.n(t0),t2="visibilitychange",t3="pagehide",t5="unload",t6="for unload page event.",t4=function(){function BrowserSignalListener(e,t,n,r){this.syncManager=e,this.settings=t,this.storage=n,this.serviceApi=r,this.flushData=this.flushData.bind(this),this.flushDataIfHidden=this.flushDataIfHidden.bind(this),this.stopSync=this.stopSync.bind(this),this.fromImpressionsCollector=fromImpressionsCollector.bind(void 0,t.core.labelsEnabled)}return BrowserSignalListener.prototype.start=function(){this.settings.log.debug(25,[t6]),"undefined"!=typeof document&&document.addEventListener&&document.addEventListener(t2,this.flushDataIfHidden),"undefined"!=typeof window&&window.addEventListener&&(window.addEventListener(t3,this.flushData),window.addEventListener(t5,this.stopSync))},BrowserSignalListener.prototype.stop=function(){this.settings.log.debug(26,[t6]),"undefined"!=typeof document&&document.removeEventListener&&document.removeEventListener(t2,this.flushDataIfHidden),"undefined"!=typeof window&&window.removeEventListener&&(window.removeEventListener(t3,this.flushData),window.removeEventListener(t5,this.stopSync))},BrowserSignalListener.prototype.stopSync=function(){this.syncManager&&this.syncManager.pushManager&&this.syncManager.pushManager.stop()},BrowserSignalListener.prototype.flushData=function(){if(this.syncManager){var e=this.settings.urls,t=e.events,n=e.telemetry;if(isConsentGranted(this.settings)){var r=this.settings.sync.impressionsMode;this._flushData(t+"/testImpressions/beacon",this.storage.impressions,this.serviceApi.postTestImpressionsBulk,this.fromImpressionsCollector,{sim:r===Q?Q:r===H?H:V}),this._flushData(t+"/events/beacon",this.storage.events,this.serviceApi.postEventsBulk),this.storage.impressionCounts&&this._flushData(t+"/testImpressions/count/beacon",this.storage.impressionCounts,this.serviceApi.postTestImpressionsCount,fromImpressionCountsCollector),this.storage.uniqueKeys&&this._flushData(n+"/v1/keys/cs/beacon",this.storage.uniqueKeys,this.serviceApi.postUniqueKeysBulkCs)}this.storage.telemetry&&this._flushData(n+"/v1/metrics/usage/beacon",this.storage.telemetry,this.serviceApi.postMetricsUsage)}},BrowserSignalListener.prototype.flushDataIfHidden=function(){"hidden"===document.visibilityState&&this.flushData()},BrowserSignalListener.prototype._flushData=function(e,t,n,r,i){if(!t.isEmpty()){var o=r?r(t.pop()):t.pop();this._sendBeacon(e,o,i)||n(JSON.stringify(o)).catch(function(){})}},BrowserSignalListener.prototype._sendBeacon=function(e,t,n){if("undefined"!=typeof navigator&&navigator.sendBeacon){var r={entries:t,token:this.settings.core.authorizationKey,sdk:this.settings.version};n&&E(r,n);var i=JSON.stringify(r);try{return navigator.sendBeacon(e,i)}catch(e){}}return!1},BrowserSignalListener}(),t8={getFetch:function(){return"function"==typeof fetch?fetch:t1()},getEventSource:function(){return"function"==typeof EventSource?EventSource:void 0},EventEmitter:EventEmitter,now:"object"==typeof performance&&"function"==typeof performance.now?performance.now.bind(performance):Date.now},t7=(u=function(e){var t,n=e.splitApi,r=e.storage,i=e.readiness,o=e.settings,a=o.log,s=(t=n.fetchSplitChanges,syncTaskFactory(o.log,function(e,t,n,r,i,o,a,s){void 0===o&&(o=0),void 0===a&&(a=0);var u=!0;function _promiseDecorator(e){return u&&o&&(e=timeout(o,e)),e}return function(o,c,l){return Promise.resolve(n.getChangeNumber()).then(function _splitChangesUpdater(f,h){void 0===h&&(h=0),e.debug(31,[f]);var d=Promise.resolve(l?{splits:[l.payload],till:l.changeNumber}:t(f,o,c,_promiseDecorator)).then(function(t){u=!1;var o,a,c,l=(o=t.splits,a=new eH,(c=o.reduce(function(e,t){return"ACTIVE"===t.status?(e.added.push([t.name,t]),(function(e){for(var t=e.conditions,n=new eH,r=0;r<t.length;r++)t[r].matcherGroup.matchers.forEach(function(e){"IN_SEGMENT"===e.matcherType&&n.add(e.userDefinedSegmentMatcherData.segmentName)});return n})(t).forEach(function(e){a.add(e)})):e.removed.push(t.name),e},{added:[],removed:[],segments:[]})).segments=setToArray(a),c);return e.debug(32,[l.added.length]),e.debug(33,[l.removed.length]),e.debug(34,[l.segments.length]),Promise.all([n.setChangeNumber(t.till),n.addSplits(l.added),n.removeSplits(l.removed),r.registerSegments(l.segments)]).then(function(){return!i||Promise.resolve(!i.splitsArrived||f!==t.till&&(s||Promise.resolve(r.getRegisteredSegments()).then(function(e){return Promise.all(e.map(function(e){return r.getChangeNumber(e)})).then(function(e){return e.every(function(e){return -1!==e})})}))).catch(function(){return!1}).then(function(e){return e&&i.emit(eu),!0})})}).catch(function(t){return(e.warn(205,[t]),u&&a>h)?(h+=1,e.info(109,[h,t]),_splitChangesUpdater(f,h)):(u=!1,!1)});return i&&u&&Promise.resolve(n.checkCache()).then(function(e){e&&i.emit(ec)}),d})}}(o.log,function(e,n,r,i){var o=t(e,n,r);return i&&(o=i(o)),o.then(function(e){return e.json()})},r.splits,r.segments,i.splits,o.startup.requestTimeoutBeforeReady,o.startup.retriesOnFailureBeforeReady,!0),o.scheduler.featuresRefreshRate,"splitChangesUpdater")),u={},c=add(getMatching(o.core.key),i,r);function startMySegmentsSyncTasks(){forOwn(u,function(e){e.start()})}function stopMySegmentsSyncTasks(){forOwn(u,function(e){e.isRunning()&&e.stop()})}function add(e,t,r){var i,a=(i=n.fetchMySegments,syncTaskFactory(o.log,function(e,t,n,r,i,o,a,s){var u=!0,c=!0;function _promiseDecorator(e){return c&&(e=timeout(o,e)),e}function updateSegments(e){var t;if(Array.isArray(e))t=r.resetSegments(e);else{var o=e.name,a=e.add;r.isInSegment(o)!==a?(t=!0,a?r.addToSegment(o):r.removeFromSegment(o)):t=!1}n.usesSegments()&&(t||u)&&(u=!1,i.emit(el))}return function(n,r){return function _mySegmentsUpdater(n,r,i){return(r?new Promise(function(e){updateSegments(r),e(!0)}):t(s,i,_promiseDecorator).then(function(e){return c=!1,updateSegments(e),!0})).catch(function(t){return c&&a>n?(n+=1,e.warn(204,[n,t]),_mySegmentsUpdater(n)):(c=!1,!1)})}(0,n,r)}}(o.log,function(e,t,n){var r=i(e,t);return n&&(r=n(r)),r.then(function(e){return e.json()}).then(function(e){return e.mySegments.map(function(e){return e.name})})},r.splits,r.segments,t.segments,o.startup.requestTimeoutBeforeReady,o.startup.retriesOnFailureBeforeReady,e),o.scheduler.segmentsRefreshRate,"mySegmentsUpdater"));function smartReady(){t.isReady()||r.splits.usesSegments()||t.segments.emit(el)}return r.splits.usesSegments()?t.splits.once(eu,smartReady):setTimeout(smartReady,0),u[e]=a,a}return i.splits.on(eu,function(){if(s.isRunning()){var e=r.splits.usesSegments();e!==c.isRunning()&&(a.info(106,[e?"ON":"OFF"]),e?startMySegmentsSyncTasks():stopMySegmentsSyncTasks())}}),{splitsSyncTask:s,segmentsSyncTask:c,start:function(){a.info(107),s.start(),r.splits.usesSegments()&&startMySegmentsSyncTasks()},stop:function(){a.info(108),s.isRunning()&&s.stop(),stopMySegmentsSyncTasks()},isRunning:s.isRunning,syncAll:function(){var e=[s.execute()];return forOwn(u,function(t){e.push(t.execute())}),Promise.all(e)},add:add,remove:function(e){delete u[e]},get:function(e){return u[e]}}},c=function(e,t){var n,r,i,o,a,s,u,c,l,f,h,p,g,y=e.settings,v=e.storage,b=e.splitApi,S=e.readiness,T=e.platform,C=e.telemetryTracker,_=y.core.key?getMatching(y.core.key):void 0,w=y.log;try{l=new eq(y,!_,T.getEventSource)}catch(e){w.warn(208,[e]);return}var k=(n=b.fetchAuth,function(e){return n(e).then(function(e){return e.json()}).then(function(e){if(e.token){var t=JSON.parse(decodeURIComponent(decodeFromBase64(e.token.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join("")));if("number"!=typeof t.iat||"number"!=typeof t.exp)throw Error('token properties "issuedAt" (iat) or "expiration" (exp) are missing or invalid');var n=JSON.parse(t["x-ably-capability"]);return E({decodedToken:t,channels:n},e)}return e})}),M=new T.EventEmitter,I=(r=eP.map(function(e){return{regex:e,hasPublishers:!0,oTime:-1,cTime:-1}}),i=!0,o=!0,a={handleOpen:function(){C.streamingEvent(0),M.emit(eI)},isStreamingUp:function(){return o&&i},handleOccupancyEvent:function(e,t,n){for(var a=0;a<r.length;a++){var s=r[a];if(s.regex.test(t)){if(C.streamingEvent(eK[a],e),n>s.oTime){s.oTime=n,s.hasPublishers=0!==e;var u=r.some(function(e){return e.hasPublishers});o&&(!u&&i?M.emit(eR):u&&!i&&M.emit(eI)),i=u}return}}},handleControlEvent:function(e,t,n){if(e===d.STREAMING_RESET){M.emit(e);return}for(var a=0;a<r.length;a++){var s=r[a];if(s.regex.test(t)){n>s.cTime&&(s.cTime=n,e===d.STREAMING_DISABLED?(C.streamingEvent(30,0),M.emit(ek)):i&&(e===d.STREAMING_PAUSED&&o?(C.streamingEvent(30,2),M.emit(eR)):e!==d.STREAMING_RESUMED||o||(C.streamingEvent(30,1),M.emit(eI))),o=e===d.STREAMING_RESUMED);return}}}},{handleOpen:function(){a.handleOpen()},handleError:function(e){var t=e;try{isString(e.data)&&(e.parsedData=JSON.parse(e.data)),t=e}catch(e){w.warn(206,[e])}var n=t.parsedData&&t.parsedData.message||t.message;w.error(305,[n]),function(e){if(e.parsedData&&e.parsedData.code){var t=e.parsedData.code;if(C.streamingEvent(60,t),40140<=t&&t<=40149)return!0;if(4e4<=t&&t<=49999)return!1}else C.streamingEvent(40,1);return!0}(t)?M.emit(eM):M.emit(ek)},handleMessage:function(e){try{if(!(t=function(e){if(e.data){var t=JSON.parse(e.data);return t.parsedData=JSON.parse(t.data),t.name&&"[meta]occupancy"===t.name&&(t.parsedData.type=eD),t}}(e)))return}catch(e){w.warn(207,[e]);return}var t,n=t.parsedData,r=t.data,i=t.channel,o=t.timestamp;if(w.debug(35,[r]),a.isStreamingUp()||-1!==[eD,eF].indexOf(n.type))switch(n.type){case eN:case eL:case eO:case ex:M.emit(n.type,n);break;case eA:M.emit(n.type,n,i);break;case eD:a.handleOccupancyEvent(n.metrics.publishers,i,o);break;case eF:a.handleControlEvent(n.controlType,i,o)}}});l.setEventHandler(I);var R=_?void 0:(s=t.segmentsSyncTask,u=v.segments,c={},{put:function(e){var t=e.changeNumber,n=e.segmentName;c[n]||(c[n]=function(e){var t,n,r=0,i=!1,o=new eU(__handleSegmentUpdateCall,1e4,6e4);function __handleSegmentUpdateCall(){t=!0,r>u.getChangeNumber(e)?(i=!1,s.execute(!1,e,!0,n?r:void 0).then(function(){if(t){if(i)__handleSegmentUpdateCall();else{var a=o.attempts+1;if(r<=u.getChangeNumber(e)){w.debug("Refresh completed"+(n?" bypassing the CDN":"")+" in "+a+" attempts."),t=!1;return}if(a<10){o.scheduleCall();return}n?(w.debug("No changes fetched after "+a+" attempts with CDN bypassed."),t=!1):(o.reset(),n=!0,__handleSegmentUpdateCall())}}})):t=!1}return{put:function(a){a<=u.getChangeNumber(e)||a<=r||(r=a,i=!0,n=!1,(o.timeoutID||!t)&&__handleSegmentUpdateCall(),o.reset())},stop:function(){t=!1,o.reset()}}}(n)),c[n].put(t)},stop:function(){Object.keys(c).forEach(function(e){return c[e].stop()})}}),A=function(e,t,n,r,i,o){var a,s,u,c=0,l=!1,f=new eU(__handleSplitUpdateCall,1e4,6e4);function __handleSplitUpdateCall(){if(a=!0,c>t.getChangeNumber()){l=!1;var r=u?{payload:u,changeNumber:c}:void 0;n.execute(!0,s?c:void 0,r).then(function(){if(a){if(l)__handleSplitUpdateCall();else{r&&i.trackUpdatesFromSSE("sp"),o&&o.execute(!0);var n=f.attempts+1;if(c<=t.getChangeNumber()){e.debug("Refresh completed"+(s?" bypassing the CDN":"")+" in "+n+" attempts."),a=!1;return}if(n<10){f.scheduleCall();return}s?(e.debug("No changes fetched after "+n+" attempts with CDN bypassed."),a=!1):(f.reset(),s=!0,__handleSplitUpdateCall())}}})}else a=!1}function put(e,n){var r=e.changeNumber,i=e.pcn,o=t.getChangeNumber();r<=o||r<=c||(c=r,l=!0,s=!1,u=void 0,n&&o===i&&(u=n),(f.timeoutID||!a)&&__handleSplitUpdateCall(),f.reset())}return{put:put,killSplit:function(e){var n=e.changeNumber,i=e.splitName,o=e.defaultTreatment;t.killLocally(i,o,n)&&r.emit(eu,!0),put({changeNumber:n})},stop:function(){a=!1,f.reset()}}}(w,v.splits,t.splitsSyncTask,S.splits,C,_?void 0:t.segmentsSyncTask),O={},L={},x=!1,N=new eU(connectPush,y.scheduler.pushRetryBackoffBase);function connectPush(){if(!f){w.info(112),f=!1;var e=_?Object.keys(L):void 0;k(e).then(function(t){if(!f){if(!t.pushEnabled){w.info(113),M.emit(ek);return}if(!e||!(e.length<Object.keys(L).length)){var n,r,i;p&&clearTimeout(p),g&&clearTimeout(g),r=(n=t.decodedToken).exp-n.iat-600,i="number"==typeof t.connDelay&&t.connDelay>=0?t.connDelay:60,w.info(110,[r,i]),p=setTimeout(connectPush,1e3*r),g=setTimeout(function(){f||l.open(t)},1e3*i),C.streamingEvent(50,n.exp)}}}).catch(function(e){if(!f){if(w.error(306,[e.message]),e.statusCode>=400&&e.statusCode<500){C.streamingEvent(80),M.emit(ek);return}M.emit(eM)}})}}function disconnectPush(){f||(f=!0,l.close(),w.info(114),p&&clearTimeout(p),g&&clearTimeout(g),N.reset(),stopWorkers())}function stopWorkers(){A.stop(),_?forOwn(L,function(e){return e.worker.stop()}):R.stop()}return M.on(eR,stopWorkers),M.on(eI,function(){N.reset()}),M.on(ek,function(){h=!0,disconnectPush(),M.emit(eR)}),M.on(eM,function(){l.close();var e=N.scheduleCall();w.info(111,[e/1e3]),M.emit(eR)}),M.on(d.STREAMING_RESET,function(){f||(p&&clearTimeout(p),connectPush())}),M.on(ex,A.killSplit),M.on(eN,function(e){if(e.d&&void 0!==e.c)try{var t,n,r=(t=e.c,n=e.d,t>0?parseKeyList(n,t,!1):JSON.parse(decodeFromBase64(n)));if(r){A.put(e,r);return}}catch(e){w.warn(224,[e])}A.put(e)}),_?(M.on(eA,function(e,t){var n=O[t.split("_")[2]];n&&L[n]&&L[n].worker.put(e.changeNumber,e.includesPayload?e.segmentList?e.segmentList:[]:void 0)}),M.on(eO,function(e){switch(e.u){case m.BoundedFetchRequest:var t,n,r;try{n=e.d,r=e.c,t=decompress(n,r)}catch(e){w.warn(223,["BoundedFetchRequest",e]);break}forOwn(L,function(n){var r,i,o=n.hash64,a=n.worker;r=t,i=parseInt(o.hex.slice(8),16)%(8*r.length),(r[Math.floor(i/8)]&1<<i%8)>0&&a.put(e.changeNumber)});return;case m.KeyList:var i,o,a=void 0;try{a=parseKeyList(e.d,e.c),i=new eH(a.a),o=new eH(a.r)}catch(e){w.warn(223,["KeyList",e]);break}forOwn(L,function(t){var n=t.hash64,r=t.worker,a=!!i.has(n.dec)||!o.has(n.dec)&&void 0;void 0!==a&&r.put(e.changeNumber,{name:e.segmentName,add:a})});return;case m.SegmentRemoval:if(!e.segmentName){w.warn(223,["SegmentRemoval","No segment name was provided"]);break}forOwn(L,function(t){return t.worker.put(e.changeNumber,{name:e.segmentName,add:!1})});return}forOwn(L,function(t){t.worker.put(e.changeNumber)})})):M.on(eL,R.put),E(Object.create(M),{stop:function(){disconnectPush(),_&&this.remove(_)},start:function(){h||!1===f||(f=!1,_?this.add(_,t.segmentsSyncTask):setTimeout(connectPush))},isRunning:function(){return!1===f},add:function(e,t){var n,r=hashUserKey(e);O[r]||(O[r]=e,L[e]={hash64:{hex:n=(function(e,t){t=t||0;for(var n=(e=e||"").length%16,r=e.length-n,i=[0,t],o=[0,t],a=[0,0],s=[0,0],u=[2277735313,289559509],c=[1291169091,658871167],l=0;l<r;l+=16)a=[255&e.charCodeAt(l+4)|(255&e.charCodeAt(l+5))<<8|(255&e.charCodeAt(l+6))<<16|(255&e.charCodeAt(l+7))<<24,255&e.charCodeAt(l)|(255&e.charCodeAt(l+1))<<8|(255&e.charCodeAt(l+2))<<16|(255&e.charCodeAt(l+3))<<24],s=[255&e.charCodeAt(l+12)|(255&e.charCodeAt(l+13))<<8|(255&e.charCodeAt(l+14))<<16|(255&e.charCodeAt(l+15))<<24,255&e.charCodeAt(l+8)|(255&e.charCodeAt(l+9))<<8|(255&e.charCodeAt(l+10))<<16|(255&e.charCodeAt(l+11))<<24],a=_x64Rotl(a=_x64Multiply(a,u),31),i=_x64Add(i=_x64Rotl(i=_x64Xor(i,a=_x64Multiply(a,c)),27),o),i=_x64Add(_x64Multiply(i,[0,5]),[0,1390208809]),s=_x64Rotl(s=_x64Multiply(s,c),33),o=_x64Add(o=_x64Rotl(o=_x64Xor(o,s=_x64Multiply(s,u)),31),i),o=_x64Add(_x64Multiply(o,[0,5]),[0,944331445]);switch(a=[0,0],s=[0,0],n){case 15:s=_x64Xor(s,_x64LeftShift([0,e.charCodeAt(l+14)],48));case 14:s=_x64Xor(s,_x64LeftShift([0,e.charCodeAt(l+13)],40));case 13:s=_x64Xor(s,_x64LeftShift([0,e.charCodeAt(l+12)],32));case 12:s=_x64Xor(s,_x64LeftShift([0,e.charCodeAt(l+11)],24));case 11:s=_x64Xor(s,_x64LeftShift([0,e.charCodeAt(l+10)],16));case 10:s=_x64Xor(s,_x64LeftShift([0,e.charCodeAt(l+9)],8));case 9:s=_x64Rotl(s=_x64Multiply(s=_x64Xor(s,[0,e.charCodeAt(l+8)]),c),33),o=_x64Xor(o,s=_x64Multiply(s,u));case 8:a=_x64Xor(a,_x64LeftShift([0,e.charCodeAt(l+7)],56));case 7:a=_x64Xor(a,_x64LeftShift([0,e.charCodeAt(l+6)],48));case 6:a=_x64Xor(a,_x64LeftShift([0,e.charCodeAt(l+5)],40));case 5:a=_x64Xor(a,_x64LeftShift([0,e.charCodeAt(l+4)],32));case 4:a=_x64Xor(a,_x64LeftShift([0,e.charCodeAt(l+3)],24));case 3:a=_x64Xor(a,_x64LeftShift([0,e.charCodeAt(l+2)],16));case 2:a=_x64Xor(a,_x64LeftShift([0,e.charCodeAt(l+1)],8));case 1:a=_x64Rotl(a=_x64Multiply(a=_x64Xor(a,[0,e.charCodeAt(l)]),u),31),i=_x64Xor(i,a=_x64Multiply(a,c))}return i=_x64Add(i=_x64Xor(i,[0,e.length]),o=_x64Xor(o,[0,e.length])),o=_x64Add(o,i),i=_x64Add(i=_x64Fmix(i),o=_x64Fmix(o)),o=_x64Add(o,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)})(UTF16ToUTF8(e),(void 0)>>>0).slice(0,16),dec:function(e){var t,n,r,i=[0];for(t=0;t<e.length;t+=1){for(r=parseInt(e.charAt(t),16),n=i.length-1;n>=0;n-=1)i[n]=16*i[n]+r,r=i[n]/10|0,i[n]%=10;for(;r>0;)i.unshift(r%10),r=r/10|0}return i.join("")}(n)},worker:function(e,t){var n,r,i=0,o=-1,a=!1,s=new eU(__handleMySegmentsUpdateCall);function __handleMySegmentsUpdateCall(){if(n=!0,i>o){a=!1;var u=i;e.execute(r,!0).then(function(e){n&&(!1!==e&&(r&&t.trackUpdatesFromSSE("ms"),o=Math.max(o,u)),a?__handleMySegmentsUpdateCall():s.scheduleCall())})}else n=!1}return{put:function(e,t){e<=o||e<=i||(i=e,a=!0,r=t,(s.timeoutID||!n)&&__handleMySegmentsUpdateCall(),s.reset())},stop:function(){n=!1,s.reset()}}}(t,C)},x=!0,setTimeout(function(){x&&(x=!1,connectPush())},0))},remove:function(e){var t=hashUserKey(e);delete O[t],delete L[e]}})},function(e){var t,n,r,i,o,a,s,l,f,h,d,p,m,g,y,v,b,S,T,C,_,w,k,M,I=e.settings,R=e.settings,A=R.log,O=R.streamingEnabled,L=R.sync.enabled,x=e.telemetryTracker,N=u&&u(e),F=L&&O&&N&&c?c(e,N):void 0,D=(w=[(r=(n=(t=e).settings).log,i=n.scheduler.impressionsRefreshRate,o=n.core.labelsEnabled,s=submitterFactory(r,t.splitApi.postTestImpressionsBulk,a=t.storage.impressions,i,es,fromImpressionsCollector.bind(void 0,o),1),a.setOnFullQueueCb(function(){s.isRunning()&&(r.info(115,[es]),s.execute())}),s),(f=(l=t.settings).log,h=l.scheduler.eventsPushRate,d=l.startup.eventsFirstPushWindow,m=submitterFactory(f,t.splitApi.postEventsBulk,p=t.storage.events,h,eo),d>0&&(m=firstPushWindowDecorator(m,d)),p.setOnFullQueueCb(function(){m.isRunning()&&(f.info(115,[eo]),m.execute())}),m)],(k=function(e){var t=e.settings.log,n=e.splitApi.postTestImpressionsCount,r=e.storage.impressionCounts;if(r)return submitterFactory(t,n,r,18e5,"impression counts",fromImpressionCountsCollector,1)}(t))&&w.push(k),M=function(e){var t=e.storage.telemetry,n=e.platform.now;if(t&&n){var r=e.settings,i=e.settings,o=i.log,a=i.scheduler.telemetryRefreshRate,s=e.splitApi,u=e.readiness,c=e.sdkReadinessManager,l=timer(n),f=firstPushWindowDecorator(submitterFactory(o,s.postMetricsUsage,t,a,"telemetry stats",void 0,0,!0),a);return u.gate.once(ed,function(){t.recordTimeUntilReadyFromCache(l())}),c.incInternalReadyCbCount(),u.gate.once(eh,function(){t.recordTimeUntilReady(l()),f.isRunning()&&submitterFactory(o,s.postMetricsConfig,{isEmpty:function(){return!1},clear:function(){},pop:function(){var e,n,i=r.urls,o=r.scheduler,a=void 0!==r.core.key;return E((e=r.mode,n=r.storage.type,{oM:eC[e],st:n.toLowerCase(),aF:Object.keys(eT).length,rF:Object.keys(eT).reduce(function(e,t){return e+eT[t]-1},0)}),{sE:r.streamingEnabled,rR:{sp:o.featuresRefreshRate/1e3,se:a?void 0:o.segmentsRefreshRate/1e3,ms:a?o.segmentsRefreshRate/1e3:void 0,im:o.impressionsRefreshRate/1e3,ev:o.eventsPushRate/1e3,te:o.telemetryRefreshRate/1e3},uO:{s:i.sdk!==eb.urls.sdk,e:i.events!==eb.urls.events,a:i.auth!==eb.urls.auth,st:i.streaming!==eb.urls.streaming,t:i.telemetry!==eb.urls.telemetry},iQ:o.impressionsQueueSize,eQ:o.eventsQueueSize,iM:eE[r.sync.impressionsMode],iL:!!r.impressionListener,hP:!1,tR:t.getTimeUntilReady(),tC:t.getTimeUntilReadyFromCache(),nR:t.getNonReadyUsage(),t:t.popTags(),i:r.integrations&&r.integrations.map(function(e){return e.type}),uC:r.userConsent?e_[r.userConsent]:0})}},0,"telemetry config",void 0,0,!0).execute()}),f}}(t),t.storage.uniqueKeys&&w.push((y=(g=t.settings).log,v=g.core.key,S=(b=t.splitApi).postUniqueKeysBulkCs,T=b.postUniqueKeysBulkSs,_=submitterFactory(y,void 0!==v?S:T,C=t.storage.uniqueKeys,9e5,ew),C.setOnFullQueueCb(function(){_.isRunning()&&(y.info(115,[ew]),_.execute())}),_)),{start:function(e){e||w.forEach(function(e){return e.start()}),M&&M.start()},stop:function(e){w.forEach(function(e){return e.stop()}),!e&&M&&M.stop()},isRunning:function(){return w.some(function(e){return e.isRunning()})},execute:function(e){var t=e?[]:w.map(function(e){return e.execute()});return M&&t.push(M.execute()),Promise.all(t)},isExecuting:function(){return w.some(function(e){return e.isExecuting()})}});F&&(F.on(eI,function(){A.info(119),N.isRunning()&&(N.stop(),x.streamingEvent(70,0)),N.syncAll()}),F.on(eR,function(){N.isRunning()?A.info(118):(A.info(117),N.start(),x.streamingEvent(70,1))}));var U=!1,P=!0;return{pollingManager:N,pushManager:F,submitterManager:D,start:function(){U=!0,N&&(L?F?(P&&(N.syncAll(),P=!1),F.start()):N.start():P&&(N.syncAll(),P=!1)),D.start(!isConsentGranted(I))},stop:function(){U=!1,F&&F.stop(),N&&N.isRunning()&&N.stop(),D.stop()},isRunning:function(){return U},flush:function(){return D.execute(!isConsentGranted(I))},shared:function(e,t,n){if(N){var r=N.add(e,t,n);return{isRunning:r.isRunning,start:function(){L?F?(N.isRunning()?n.splits.usesSegments()&&r.start():r.execute(),F.add(e,r)):n.splits.usesSegments()&&r.start():t.isReady()||r.execute()},stop:function(){var t=N.get(e);t&&(F&&F.remove(e),t.isRunning()&&t.stop(),N.remove(e))},flush:function(){return Promise.resolve()}}}}}}),t9=new Map;function getStatus(e){var t=e&&e.__getStatus(),n=!!t&&t.isReady,r=!!t&&t.hasTimedout;return{isReady:n,isReadyFromCache:!!t&&t.isReadyFromCache,isTimedout:r&&!n,hasTimedout:r,isDestroyed:!!t&&t.isDestroyed}}var ne=function(e){function SplitComponent(t){var n=e.call(this,t)||this;n.setReady=function(){n.props.updateOnSdkReady&&n.setState({lastUpdate:Date.now()})},n.setReadyFromCache=function(){n.props.updateOnSdkReadyFromCache&&n.setState({lastUpdate:Date.now()})},n.setTimedout=function(){n.props.updateOnSdkTimedout&&n.setState({lastUpdate:Date.now()})},n.setUpdate=function(){n.props.updateOnSdkUpdate&&n.setState({lastUpdate:Date.now()})};var r=t.factory,i=t.client;return r||console.error(b.nr),n.state=tslib_es6_assign(tslib_es6_assign({factory:r,client:i},getStatus(i)),{lastUpdate:0}),n}return __extends(SplitComponent,e),SplitComponent.getDerivedStateFromProps=function(e,t){var n=e.client,r=e.factory,i=e.attributes;n&&i&&n.setAttributes(i);var o=getStatus(n);return n!==t.client||o.isReady!==t.isReady||o.isReadyFromCache!==t.isReadyFromCache||o.hasTimedout!==t.hasTimedout||o.isDestroyed!==t.isDestroyed?tslib_es6_assign({client:n,factory:r},o):null},SplitComponent.prototype.subscribeToEvents=function(e){if(e){var t=getStatus(e);t.isReady||e.once(e.Event.SDK_READY,this.setReady),t.isReadyFromCache||e.once(e.Event.SDK_READY_FROM_CACHE,this.setReadyFromCache),t.hasTimedout||t.isReady||e.once(e.Event.SDK_READY_TIMED_OUT,this.setTimedout),e.on(e.Event.SDK_UPDATE,this.setUpdate)}},SplitComponent.prototype.unsubscribeFromEvents=function(e){e&&(e.removeListener(e.Event.SDK_READY,this.setReady),e.removeListener(e.Event.SDK_READY_FROM_CACHE,this.setReadyFromCache),e.removeListener(e.Event.SDK_READY_TIMED_OUT,this.setTimedout),e.removeListener(e.Event.SDK_UPDATE,this.setUpdate))},SplitComponent.prototype.componentDidMount=function(){this.subscribeToEvents(this.props.client)},SplitComponent.prototype.componentDidUpdate=function(e){this.props.client!==e.client&&(this.unsubscribeFromEvents(e.client),this.subscribeToEvents(this.props.client))},SplitComponent.prototype.componentWillUnmount=function(){this.unsubscribeFromEvents(this.props.client)},SplitComponent.prototype.render=function(){var e=this.props.children;return y.createElement(v.G.Provider,{value:this.state},"function"==typeof e?e(tslib_es6_assign({},this.state)):e)},SplitComponent.defaultProps={updateOnSdkUpdate:!1,updateOnSdkTimedout:!1,updateOnSdkReady:!0,updateOnSdkReadyFromCache:!0,children:null,factory:null,client:null},SplitComponent}(y.Component),nt=function(e){function SplitFactory(t){var n=e.call(this,t)||this,r=t.factory,i=t.config;i||r||console.error(b.rz),i&&r&&console.log(b.RJ);var o=null;r?o=r:i&&(o=function(e){if(!t9.has(e)){var t,n,r,i=(r=function(e){e.settings.version=b.q4},n={settings:t=function(e,t){var n,r,i,o,a,s,u,c=t.defaults,l=t.runtime,f=t.storage,h=t.integrations,d=t.logger,p=t.localhost,m=t.consent,g=function merge(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=e;if(isObject(t)&&Object.keys(t).forEach(function(e){var n=t[e];isObject(n)&&(n=i[e]&&isObject(i[e])?merge({},i[e],n):merge({},n)),void 0!==n&&(i[e]=n)}),n&&n.length){var o=n.splice(0,1)[0];i=merge.apply(void 0,(0,ea.ev)([i,o],n,!1))}return i}({},eb,c,e),y=d(g);g.log=y,g.sync.impressionsMode=[H,Q,V].indexOf(s=stringToUpperCase(s=g.sync.impressionsMode))>-1?s:(y.error(321,["impressionsMode",[H,Q,V],Q]),Q);var v=g.scheduler,b=g.startup;v.featuresRefreshRate=fromSecondsToMillis(v.featuresRefreshRate),v.segmentsRefreshRate=fromSecondsToMillis(v.segmentsRefreshRate),v.offlineRefreshRate=fromSecondsToMillis(v.offlineRefreshRate),v.eventsPushRate=fromSecondsToMillis(v.eventsPushRate),v.telemetryRefreshRate=fromSecondsToMillis((u=v.telemetryRefreshRate)>=60?u:(y.error(326,["telemetryRefreshRate",60]),60)),void 0===get(e,"scheduler.impressionsRefreshRate")&&g.sync.impressionsMode===H&&(v.impressionsRefreshRate=60),v.impressionsRefreshRate=fromSecondsToMillis(v.impressionsRefreshRate),v.metricsRefreshRate&&y.warn("`metricsRefreshRate` will be deprecated soon. For configuring telemetry rates, update `telemetryRefreshRate` value in configs"),b.requestTimeoutBeforeReady=fromSecondsToMillis(b.requestTimeoutBeforeReady),b.readyTimeout=fromSecondsToMillis(b.readyTimeout),b.eventsFirstPushWindow=fromSecondsToMillis(b.eventsFirstPushWindow),g.mode=function(e,t){if("localhost"===e)return X;if(-1===[Z,"producer",Y,$].indexOf(t))throw Error("Invalid mode provided");return t}(g.core.authorizationKey,g.mode),f&&(g.storage=f(g));var S=g.core.key;if(t.acceptKey){if(g.mode===X&&void 0===S?g.core.key="localhost_key":g.core.key=validateKey(y,S,"Client instantiation"),t.acceptTT){var T=g.core.trafficType;void 0!==T&&(g.core.trafficType=validateTrafficType(y,T,"Client instantiation"))}}else void 0!==S&&y.warn("Provided `key` is ignored in server-side SDK."),g.core.key=void 0;g.runtime=l(g),h&&(g.integrations=h(g)),p&&(g.sync.localhostMode=p(g)),!1!==g.streamingEnabled&&(g.streamingEnabled=!0,v.pushRetryBackoffBase=fromSecondsToMillis(v.pushRetryBackoffBase)),!1!==g.sync.enabled&&(g.sync.enabled=!0);var C=(n=g.sync.splitFilters,r=g.mode,a={validFilters:[],queryString:null,groupedFilters:{byName:[],byPrefix:[]}},n&&(r!==Z?y.warn(219,[Z]):Array.isArray(n)&&0!==n.length?(a.validFilters=n.filter(function(e,t){var n;return e&&(n=e.type,eg.some(function(e){return e.type===n}))&&Array.isArray(e.values)?(a.groupedFilters[e.type]=a.groupedFilters[e.type].concat(e.values),!0):(y.warn(220,[t]),!1)}),eg.forEach(function(e){var t=e.type,n=e.maxLength;a.groupedFilters[t].length>0&&(a.groupedFilters[t]=function(e,t,n,r){var i=validateSplits(e,n,_,t+" filter",t+" filter value");if(i){if(i.length>r)throw Error(r+" unique values can be specified at most for '"+t+"' filter. You passed "+i.length+". Please consider reducing the amount or using other filter.");i.sort()}return i||[]}(y,t,a.groupedFilters[t],n))}),a.queryString=(i=a.groupedFilters,o=[],eg.forEach(function(e){var t=e.type,n=e.queryParam,r=i[t];r.length>0&&o.push(n+r.map(function(e){return encodeURIComponent(e)}).join(","))}),o.length>0?"&"+o.join("&"):null),y.debug(39,[a.queryString])):y.warn(221)),a);return g.sync.splitFilters=C.validFilters,g.sync.__splitFiltersValidation=C,g.userConsent=m(g),g}(e,tX),platform:t8,storageFactory:t.storage.type===ee?function(e){void 0===e&&(e={});var t,n=(t=e.prefix)?t+".SPLITIO":"SPLITIO";function InLocalStorageCSFactory(e){if(!isLocalStorageAvailable())return e.settings.log.warn(eJ+"LocalStorage API is unavailable. Falling back to default MEMORY storage"),InMemoryStorageCS_InMemoryStorageCSFactory(e);var t=e.settings,r=e.settings,i=r.log,o=r.scheduler,a=o.impressionsQueueSize,s=o.eventsQueueSize,u=r.sync,c=u.impressionsMode,l=u.__splitFiltersValidation,f=getMatching(t.core.key),h=new eY(n,f),d=Date.now()-864e6,p=new e0(i,h,d,l),m=new e2(i,h);return{splits:p,segments:m,impressions:new eQ(a),impressionCounts:c!==H?new eV:void 0,events:new eX(s),telemetry:shouldRecordTelemetry(e)?new e8(p,m):void 0,uniqueKeys:c===V?new e7:void 0,destroy:function(){var e;this.splits=new e5,this.segments=new e3,this.impressions.clear(),this.impressionCounts&&this.impressionCounts.clear(),this.events.clear(),null===(e=this.uniqueKeys)||void 0===e||e.clear()},shared:function(e){var t=new eY(n,e);return{splits:this.splits,segments:new e2(i,t),impressions:this.impressions,impressionCounts:this.impressionCounts,events:this.events,telemetry:this.telemetry,destroy:function(){this.splits=new e5,this.segments=new e3}}}}}return InLocalStorageCSFactory.type=ee,InLocalStorageCSFactory}(t.storage):t.storage.__originalType===ee?__InLocalStorageMockFactory:InMemoryStorageCS_InMemoryStorageCSFactory,splitApiFactory:splitApiFactory,syncManagerFactory:t7,sdkManagerFactory:sdkManagerFactory,sdkClientMethodFactory:sdkClientMethodCSFactory,SignalListener:t4,integrationsManagerFactory:t.integrations&&t.integrations.length>0?integrationsManagerFactory.bind(null,t.integrations):void 0,impressionsObserverFactory:impressionObserverCSFactory,extraProps:function(e){var t,n,r,i,o,a,s;return{UserConsent:(t=e.settings,n=e.settings.log,r=e.syncManager,o=(i=e.storage).events,a=i.impressions,s=i.impressionCounts,isConsentGranted(t)||n.info(124,[t.userConsent]),{setStatus:function(e){if(!isBoolean(e))return n.warn(325,["UserConsent.setStatus"]),!1;var i,u,c=e?et:en;return t.userConsent!==c?(n.info(122,[t.userConsent,c]),t.userConsent=c,e?null===(i=null==r?void 0:r.submitterManager)||void 0===i||i.start():(null===(u=null==r?void 0:r.submitterManager)||void 0===u||u.stop(!0),o.clear&&o.clear(),a.clear&&a.clear(),s&&s.clear&&s.clear())):n.info(123,[c]),!0},getStatus:function(){return t.userConsent},Status:tD})}}},t.mode===X&&(n.splitApiFactory=void 0,n.syncManagerFactory=t.sync.localhostMode,n.SignalListener=void 0),r&&r(n),function(e){var t,n,r,i,o,a,s,u,c,l,f,h,d,p,m,g,y,v,b=e.settings,S=e.platform,T=e.storageFactory,C=e.splitApiFactory,_=e.extraProps,k=e.syncManagerFactory,M=e.SignalListener,I=e.impressionsObserverFactory,R=e.integrationsManagerFactory,A=e.sdkManagerFactory,O=e.sdkClientMethodFactory,L=e.filterAdapterFactory,x=b.log,N=b.sync.impressionsMode;n=!1,void 0==(t=b.core.authorizationKey)?x.error(315,[w,eS]):isString(t)?t.length>0?n=t:x.error(319,[w,eS]):x.error(318,[w,eS]),(r=n)&&(eT[r]?(x.warn(222,[eT[r]+" factory/ies with this SDK Key"]),eT[r]++):(eT[r]=1,Object.keys(eT).length>1&&x.warn(222,["an instance of the Split factory"])));var F=function sdkReadinessManagerFactory(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=function readinessManagerFactory(e,t,n){void 0===t&&(t=0),void 0===n&&((r=E(new e,{splitsArrived:!1,splitsCacheLoaded:!1})).on(eu,function(e){e||(r.splitsArrived=!0)}),r.once(ec,function(){r.splitsCacheLoaded=!0}),n=r);var r,i,o,a=((i=E(new e,{segmentsArrived:!1})).once(el,function(){i.segmentsArrived=!0}),i),s=new e,u=!1;n.splitsCacheLoaded?u=!0:n.once(ec,function(){if(u=!0,!l)try{s.emit(ed)}catch(e){setTimeout(function(){throw e},0)}});var c=!1;function timeout(){c||(c=!0,s.emit(ef,"Split SDK emitted SDK_READY_TIMED_OUT event."))}t>0&&(o=setTimeout(timeout,t));var l=!1;n.on(eu,checkIsReadyOrUpdate),a.on(el,checkIsReadyOrUpdate);var f=!1;function checkIsReadyOrUpdate(e){if(l)try{s.emit(ep,e)}catch(e){setTimeout(function(){throw e},0)}else if(n.splitsArrived&&a.segmentsArrived){clearTimeout(o),l=!0;try{s.emit(eh)}catch(e){setTimeout(function(){throw e},0)}}}var h=1;return{splits:n,segments:a,gate:s,shared:function(t){return void 0===t&&(t=0),h++,readinessManagerFactory(e,t,n)},timeout:timeout,destroy:function(){f=!0,a.removeAllListeners(),s.removeAllListeners(),clearTimeout(o),h>0&&h--,0===h&&n.removeAllListeners()},isReady:function(){return l},hasTimedout:function(){return c},isReadyFromCache:function(){return u},isDestroyed:function(){return f},isOperational:function(){return(l||u)&&!f}}}(t,n));var i,o=0,a=0;r.gate.on("removeListener",function(e){e===eh&&a--}),r.gate.on("newListener",function(t){(t===eh||t===ef)&&(r.isReady()?e.error(302,[t===eh?"SDK_READY":"SDK_READY_TIMED_OUT"]):t===eh&&a++)});var s=i=promiseWrapper(new Promise(function(t,n){r.gate.once(eh,function(){e.info(101),a!==o||i.hasOnFulfilled()||e.warn(202),t()}),r.gate.once(ef,function(e){n(Error(e))})}),defaultOnRejected);function defaultOnRejected(t){e.error(t&&t.message)}return r.gate.once(ed,function(){e.info(100)}),{readinessManager:r,shared:function(n){return void 0===n&&(n=0),sdkReadinessManagerFactory(e,t,n,r.shared(n))},incInternalReadyCbCount:function(){o++},sdkStatus:E(Object.create(r.gate),{Event:{SDK_READY:eh,SDK_READY_FROM_CACHE:ed,SDK_UPDATE:ep,SDK_READY_TIMED_OUT:ef},ready:function(){return r.hasTimedout()?r.isReady()?Promise.resolve():promiseWrapper(Promise.reject(Error("Split SDK has emitted SDK_READY_TIMED_OUT event.")),defaultOnRejected):s},__getStatus:function(){return{isReady:r.isReady(),isReadyFromCache:r.isReadyFromCache(),isOperational:r.isOperational(),hasTimedout:r.hasTimedout(),isDestroyed:r.isDestroyed()}}})}}(x,S.EventEmitter,b.startup.readyTimeout),D=F.readinessManager,U=T({settings:b,onReadyCb:function(e){if(e){D.timeout();return}D.splits.emit(eu),D.segments.emit(el)}}),P=function(e,t){if(e&&t){var n=timer(t);return{trackEval:function(n){var r=timer(t);return function(t){switch(t){case tt:e.recordException(n);return;case te:e.recordNonReadyUsage&&e.recordNonReadyUsage()}e.recordLatency(n,r())}},trackHttp:function(n){var r=timer(t);return function(t){e.recordHttpLatency(n,r()),t&&t.statusCode?e.recordHttpError(n,t.statusCode):e.recordSuccessfulSync(n,Date.now())}},sessionLength:function(){e.recordSessionLength&&e.recordSessionLength(n())},streamingEvent:function(t,n){80===t?e.recordAuthRejections():(e.recordStreamingEvents({e:t,d:n,t:Date.now()}),50===t&&e.recordTokenRefreshes())},addTag:function(t){e.addTag&&e.addTag(t)},trackUpdatesFromSSE:function(t){e.recordUpdatesFromSSE(t)}}}var noopTrack=function(){return function(){}};return{trackEval:noopTrack,trackHttp:noopTrack,sessionLength:function(){},streamingEvent:function(){},addTag:function(){},trackUpdatesFromSSE:function(){}}}(U.telemetry,S.now),K=R&&R({settings:b,storage:U,telemetryTracker:P}),j=I(),B=N===V?(i=U.uniqueKeys,void 0===(o=L&&L())&&(o=tF),o.refreshRate&&(a=setInterval(o.clear,o.refreshRate)),{track:function(e,t){if(!o.add(e,t)){x.debug("unique-keys-tracker: The feature "+t+" and key "+e+" exist in the filter");return}i.track(e,t)},stop:function(){clearInterval(a)}}):void 0;switch(N){case Q:s=U.impressionCounts,v={process:function(e){var t=[];return e.forEach(function(e){e.pt=j.testAndSet(e);var n=Date.now();e.pt&&s.track(e.feature,n,1),(!e.pt||e.pt<truncateTimeFrame(n))&&t.push(e)}),{impressionsToStore:t,impressionsToListener:e,deduped:e.length-t.length}}};break;case V:u=U.impressionCounts,v={process:function(e){return e.forEach(function(e){var t=Date.now();u.track(e.feature,t,1),B.track(e.keyName,e.feature)}),{impressionsToStore:[],impressionsToListener:e,deduped:0}}};break;default:v={process:function(e){return e.forEach(function(e){e.pt=j.testAndSet(e)}),{impressionsToStore:e,impressionsToListener:e,deduped:0}}}}var z=(c=U.impressions,l=v,f=U.telemetry,h=b.log,d=b.impressionListener,m=(p=b.runtime).ip,g=p.hostname,y=b.version,{track:function(e,t){if(b.userConsent!==en){var n=e.length,r=l.process(e),i=r.impressionsToStore,o=r.impressionsToListener,a=r.deduped,s=o.length;if(i.length>0){var u=c.track(i);thenable(u)?u.then(function(){h.info(121,[n])}).catch(function(e){h.error(307,[n,e])}):f&&(f.recordImpressionStats(0,i.length),f.recordImpressionStats(2,a))}if(d||K)for(var p=0;p<s;p++)!function(e){var n={impression:E({},o[e]),attributes:t,ip:m,hostname:g,sdkLanguageVersion:y};setTimeout(function(){K&&K.handleImpression(n);try{d&&d.logImpression(n)}catch(e){h.error(308,[e])}},0)}(p)}}}),q=function(e,t,n,r){var i=e.log,o=isStorageSync(e);function queueEventsCallback(e,t){var r=e.eventTypeId,o=e.trafficTypeName,a=e.key,s=e.value,u=e.timestamp,c=e.properties,l='event of type "'+r+'" for traffic type "'+o+'". Key: '+a+". Value: "+s+". Timestamp: "+u+". "+(c?"With properties.":"With no properties.");return t?(i.info(120,[l]),n&&setTimeout(function(){var t=E({},e);c&&(t.properties=E({},c)),n.handleEvent(t)},0)):i.error(309,[l]),t}return{track:function(n,i){if(e.userConsent===en)return!o&&Promise.resolve(!1);var a=t.track(n,i);return thenable(a)?a.then(queueEventsCallback.bind(null,n)):(r&&r.recordEventStats(a?0:1,1),queueEventsCallback(n,a))}}}(b,U.events,K,U.telemetry),W=C&&C(b,S,P),G={splitApi:W,eventTracker:q,impressionsTracker:z,telemetryTracker:P,uniqueKeysTracker:B,sdkReadinessManager:F,readiness:D,settings:b,storage:U,platform:S},H=k&&k(G);G.syncManager=H;var X=M&&new M(H,b,U,W);G.signalListener=X;var Z=O(G),Y=A(x,U.splits,F);return H&&H.start(),X&&X.start(),x.info(105),E({client:Z,manager:function(){return x.debug(29),Y},Logger:function(e){function setLogLevel(t){isLogLevelString(t)?e.setLogLevel(t):e.error(301)}return{enable:function(){setLogLevel(tO.DEBUG)},setLogLevel:setLogLevel,disable:function(){setLogLevel(tO.NONE)},LogLevel:tO}}(x),settings:b},_&&_(G))}(n));i.sharedClientInstances=new Set,i.config=e,t9.set(e,i)}return t9.get(e)}(i)),n.isFactoryExternal=!!r;var a=o?o.client():null;return n.state={client:a,factory:o},n}return __extends(SplitFactory,e),SplitFactory.prototype.componentWillUnmount=function(){if(!this.isFactoryExternal&&this.state.factory){var e,t;e=this.state.factory,t=[],e.sharedClientInstances.forEach(function(e){return t.push(e.destroy())}),t.push(e.client().destroy()),e.sharedClientInstances.clear(),t9.delete(e.config),Promise.all(t)}},SplitFactory.prototype.render=function(){var e=this.state,t=e.factory,n=e.client;return y.createElement(ne,tslib_es6_assign({},this.props,{factory:t,client:n}))},SplitFactory.defaultProps={updateOnSdkUpdate:!1,updateOnSdkTimedout:!1,updateOnSdkReady:!0,updateOnSdkReadyFromCache:!0,children:null},SplitFactory}(y.Component)},93258:function(e,t,n){"use strict";n.d(t,{I1:function(){return s},RJ:function(){return i},nr:function(){return a},q4:function(){return r},rz:function(){return o}});var r="react-1.9.0",i="[WARN] Both a config and factory props were provided to SplitFactory. Config prop will be ignored.",o="[ERROR] SplitFactory must receive either a Split config or a Split factory as props.",a="[ERROR] SplitClient does not have access to a Split factory. This is because it is not inside the scope of a SplitFactory component or SplitFactory was not properly instantiated.",s="React library is not available or its version is not supported. Check that it is properly installed or imported. Split SDK requires version 16.3.0+ of React."},70342:function(e,t,n){"use strict";n.d(t,{q:function(){return SkeletonBlock}});var r=n(50773),i=n(56283),o=n(10355),a=n(29927);let s=(0,r.F4)({"0%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(100%)"}}),u=(0,i.B)("SkeletonBlock",{root:[{backgroundColor:a.w.neutral200,overflow:"hidden",position:"relative","&::before":{animation:`${s} 1s ease-in-out infinite`,content:'""',background:"linear-gradient(90deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0))",position:"absolute",top:"0",right:"0",bottom:"0",left:"0"}}]}),SkeletonBlock=({aspectRatio:e,borderRadius:t=5,height:n,width:r="100%"})=>{let i={borderRadius:t,width:r,paddingTop:e?`calc(${r} / ${e})`:n};return(0,o.U)("div",{css:u.root,"data-testid":"SkeletonBlock",style:i})}},79439:function(e,t,n){"use strict";n.d(t,{N:function(){return SkeletonText}});var r=n(56283),i=n(33817),o=n(10355),a=n(70342);let s=(0,r.B)("SkeletonText",{root:e=>[{display:"grid",gridTemplateColumns:"100%",gap:5},(0,i.Q)(e,{justifyItems:{left:"start",right:"end",center:"center",justify:"left"}[e]})]}),getLineHeight=e=>({heading:30,body:15})[e],getLineWidth=(e,t)=>0===t&&1===e.lines?"100%":t===e.lines-1?"70%":"justify"===e.textAlign?"100%":t%2?"100%":"93%",SkeletonText=({lines:e,size:t="body",textAlign:n="left",width:r="100%"})=>{let i=Array.from({length:e}).map((r,i)=>(0,o.U)(a.q,{height:getLineHeight(t),key:i,width:getLineWidth({lines:e,textAlign:n},i)}));return(0,o.U)("div",{css:s.root(n),"data-testid":"SkeletonText",style:{width:r}},i)}},241:function(e,t,n){"use strict";n.d(t,{i:function(){return Table}});var r=n(52983),i=n(50773),o=n(56283),a=n(10355);let debounce=(e,t)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{e(...r)},t)}};var s=n(73584),u=n(29927),c=n(45274);let l=(0,o.B)("Table",{root:i.iv`
    display: block;
    width: 100%;
    position: relative;

    &[data-scrollable] {
      overflow: auto;

      &[data-scrolled-horz] {
        ${c.h.frozenCellHorzShadowOpacity}: 1;
      }

      &[data-scrolled-vert] {
        ${c.h.frozenCellVertShadowOpacity}: 1;
      }
    }
  `,table:i.iv`
    display: table;

    &[data-collapse] {
      border-collapse: collapse;
    }

    &[data-kind='standard'] {
      width: 100%;
      ${s.ZT.paragraph3};
      color: ${u.w.neutral800};

      th,
      td {
        border-bottom: 1px solid ${u.w.neutral400};
        background-color: ${u.w.neutral100};
        padding: 15px 10px;
      }

      tbody tr:hover {
        th,
        td {
          background-color: ${u.w.blue10};
        }
      }
    }
  `}),Table=({scrollable:e,children:t,collapse:n=!1,kind:i="standard"})=>{let[o,s]=(0,r.useState)(!1),[u,c]=(0,r.useState)(!1),f=debounce(e=>{let{scrollLeft:t,scrollTop:n}=e;s(t>0),c(n>0)},20);return(0,a.U)("div",{css:l.root,"data-scrollable":e?"":void 0,"data-scrolled-horz":o?"":void 0,"data-scrolled-vert":u?"":void 0,onScroll:e=>{f(e.target)}},(0,a.U)("table",{css:l.table,"data-collapse":n?"":void 0,"data-kind":i,role:"table"},t))}},33568:function(e,t,n){"use strict";n.d(t,{R:function(){return TableBody}});var r=n(50773),i=n(56283),o=n(10355);let a=(0,i.B)("TableBody",{root:r.iv`
    display: table-row-group;
  `}),TableBody=e=>(0,o.U)("tbody",{css:a.root},e.children)},870:function(e,t,n){"use strict";n.d(t,{s:function(){return TableHead}});var r=n(50773),i=n(56283),o=n(10355);let a=(0,i.B)("TableHead",{root:r.iv`
    display: table-header-group;
  `}),TableHead=e=>(0,o.U)("thead",{css:a.root},e.children)},81237:function(e,t,n){"use strict";n.d(t,{v:function(){return TableHeadHeading}});var r=n(50773),i=n(56283),o=n(10355),a=n(29927),s=n(73584);let u=(0,i.B)("TableHeadHeading",{root:r.iv`
    display: flex;
    align-items: center;
    color: ${a.w.neutral800};
    ${s.ZT.smallPrint1Bold};
  `}),TableHeadHeading=e=>(0,o.U)("span",{css:u.root},e.children)},64331:function(e,t,n){"use strict";n.d(t,{M:function(){return TableHeadSortButton}});var r=n(50773),i=n(56283),o=n(10355),a=n(32165),s=n(29927),u=n(73584);let c=(0,i.B)("TableHeadSortButton",{root:r.iv`
    display: flex;
    align-items: center;
    gap: 10px;
    color: ${s.w.neutral800};
    ${u.ZT.smallPrint1Bold};
  `}),TableHeadSortButton=e=>(0,o.U)("button",{type:"button",css:c.root,onClick:e.onClick},e.children,(0,o.U)(a.J,{color:"neutral600",name:"arrowDropdown",size:24}))},79301:function(e,t,n){"use strict";n.d(t,{S:function(){return TableRow}});var r=n(50773),i=n(56283),o=n(10355);let a=(0,i.B)("TableRow",{root:r.iv`
    display: table-row;
  `}),TableRow=e=>(0,o.U)("tr",{css:a.root,role:"row"},e.children)},58833:function(e,t,n){"use strict";n.d(t,{g:function(){return TableTd},z:function(){return c}});var r=n(50773),i=n(56283),o=n(10355),a=n(23241),s=n(45274);let u=(0,a.F)("TableTd",["frozenCellZindex"]),c=(0,i.B)("TableTd",{root:r.iv`
    display: table-cell;
    vertical-align: middle;
    // For Safari
    text-align: initial;

    // tbody cells should always render lowest
    tbody &,
    tbody & {
      ${u.frozenCellZindex}: 1;
    }

    // thead cells should always render above tbody cells
    thead &,
    thead & {
      ${u.frozenCellZindex}: 2;
    }

    // thead cells that freeze in both directions should always
    // render at the very top
    thead &[data-freeze='row col'],
    thead &[data-freeze='row col'] {
      ${u.frozenCellZindex}: 3;
    }

    &[data-freeze~='col'] {
      position: sticky;
      left: 0;
      z-index: var(${u.frozenCellZindex}, 1);

      // Render the shadow on a frozen column
      &[data-shadowed~='col'] {
        &::before {
          pointer-events: none;
          content: '';
          display: block;
          position: absolute;
          width: 5px;
          top: 0;
          left: 100%;
          bottom: 0;
          opacity: var(${s.h.frozenCellHorzShadowOpacity}, 0);
          transition: all 200ms ease-in-out;
          background: linear-gradient(
            90deg,
            rgba(0, 0, 0, 0.1),
            rgba(0, 0, 0, 0)
          );
        }
      }
    }

    &[data-freeze~='row'] {
      position: sticky;
      top: 0;
      z-index: var(${u.frozenCellZindex}, 1);

      // Render the shadow on a frozen row
      &[data-shadowed~='row'] {
        &::after {
          pointer-events: none;
          content: '';
          display: block;
          position: absolute;
          height: 5px;
          top: 100%;
          left: 0;
          width: 100%;
          opacity: var(${s.h.frozenCellVertShadowOpacity}, 0);
          transition: all 200ms ease-in-out;
          background: linear-gradient(
            180deg,
            rgba(0, 0, 0, 0.1),
            rgba(0, 0, 0, 0)
          );
        }
      }
    }
  `}),TableTd=e=>(0,o.U)("td",{css:[c.root,e.className],"data-freeze":e.freeze,"data-shadowed":e.shadowed,headers:e.headers,role:"cell"},e.children)},80438:function(e,t,n){"use strict";n.d(t,{c:function(){return TableTh}});var r=n(10355),i=n(58833);let TableTh=({children:e,className:t,freeze:n,headers:o,id:a,scope:s,shadowed:u,role:c="columnheader"})=>(0,r.U)("th",{css:[i.z.root,t],"data-freeze":n,"data-shadowed":u,headers:o,id:a,role:c,scope:s},e)},40113:function(e,t,n){"use strict";n.d(t,{l:function(){return TableTitle},z:function(){return TableTitleArea}});var r=n(50773),i=n(56283),o=n(10355),a=n(29927),s=n(73584),u=n(43773);let c=(0,i.B)("TableTitleArea",{root:r.iv`
    display: grid;
    grid-template-columns: 1fr max-content;
    gap: 20px;
    align-items: center;
    background-color: ${a.w.neutral100};

    &[data-kind='standard'] {
      padding: 5px 10px;
    }
  `,title:r.iv`
    color: ${a.w.neutral800};
    ${s.ZT.sectionHeader3};
  `}),TableTitle=e=>(0,o.U)(u.X,{css:c.title},e.children),TableTitleArea=({children:e,kind:t="standard"})=>(0,o.U)("header",{css:c.root,"data-kind":t},e)},45274:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(23241);let i=(0,r.F)("Table",["frozenCellHorzShadowOpacity","frozenCellVertShadowOpacity"])},7710:function(e,t,n){"use strict";n.d(t,{K:function(){return BooleanInput}});var r=n(50773),i=n(56283),o=n(33817),a=n(10355),s=n(32165),u=n(29927),c=n(64186);let l=(0,i.B)("BooleanInput",{root:()=>[(0,r.iv)({position:"relative",display:"inline-block"})],inner:e=>[(0,r.iv)({display:"block",position:"relative",zIndex:1,border:`2px solid ${u.w.neutral600}`,backgroundColor:"transparent",cursor:"pointer",transition:`all ${c.f.transitionDuration} ease-in-out`}),"checkbox"===e.type&&[(0,o.Q)("checkbox",(0,r.iv)({width:18,height:18,borderRadius:3,color:u.w.neutral100})),e.checked&&(0,o.Q)("checked",(0,r.iv)({backgroundColor:u.w.blue,borderColor:"transparent"})),e.isErrored&&(0,o.Q)("errored",(0,r.iv)({backgroundColor:e.checked?u.w.error:"transparent",borderColor:u.w.error})),e.disabled&&(0,o.Q)("disabled",(0,r.iv)({backgroundColor:e.checked?u.w.neutral500:"transparent",borderColor:u.w.neutral500,cursor:"not-allowed"}))],"radio"===e.type&&[(0,o.Q)("radio",(0,r.iv)({color:"transparent",width:20,height:20,borderRadius:20})),e.checked&&(0,o.Q)("checked",(0,r.iv)({borderColor:u.w.blue,color:u.w.blue})),e.isErrored&&(0,o.Q)("errored",(0,r.iv)({borderColor:u.w.error,color:u.w.error})),e.disabled&&(0,o.Q)("disabled",(0,r.iv)({borderColor:u.w.neutral500,color:u.w.neutral500,cursor:"not-allowed"}))]],layer:(0,r.iv)({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:-2,left:-2,width:"calc(100% + 4px)",height:"calc(100% + 4px)"})}),BooleanInput=({type:e,ariaLabel:t,checked:n=!1,disabled:r,id:i,isErrored:o,isRequired:u,name:c,onChange:f=()=>{},tabIndex:h=0,value:d})=>(0,a.U)("span",{css:l.root()},(0,a.U)("span",{css:l.inner({type:e,ariaLabel:t,checked:n,disabled:r,id:i,isErrored:o,isRequired:u,name:c,onChange:f,tabIndex:h,value:d})},(0,a.U)("input",{"aria-label":t,checked:n,css:l.layer,disabled:r,id:i,name:c,onChange:f,required:u,tabIndex:h,type:e,value:d}),n&&(0,a.U)("span",{css:l.layer},(0,a.U)(s.J,{isBlock:!0,name:{checkbox:"formCheck",radio:"formRadioDot"}[e],size:18}))))},68154:function(e,t,n){"use strict";n.d(t,{X:function(){return Checkbox}});var r=n(10355),i=n(7710),__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let Checkbox=e=>{var{tabIndex:t=0}=e,n=__rest(e,["tabIndex"]);return(0,r.U)(i.K,Object.assign({type:"checkbox",tabIndex:t},n))}},95714:function(e,t,n){"use strict";n.d(t,{G:function(){return LabeledBooleanInput}});var r=n(50773),i=n(56283),o=n(10355),a=n(23241),s=n(64186),u=n(29927),c=n(33784),l=n(7710);let f=(0,a.F)("LabeledBooleanInput",["outlineColor"]),h=(0,i.B)("LabeledBooleanInput",{root:r.iv`
    ${f.outlineColor}: transparent;
    position: relative;
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 8px;
    align-items: center;
    padding: 10px 8px;
    min-height: 0;

    // This is the outline that renders around the label when
    // it's focused. It's a pseudo element to preserve transparency
    // between the edge of the label and the edge of the outline.
    // It's defined here vs only in ':focus-with' so that it can transition
    // between states.
    &::before {
      content: '';
      position: absolute;
      pointer-events: none;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      border: 2px solid var(${f.outlineColor});
      border-radius: 3px;
      transition: ${s.f.transitionValue};
    }

    &:focus-within {
      ${f.outlineColor}: ${u.w.blue};

      &[data-errored] {
        ${f.outlineColor}: ${u.w.error};
      }
    }
  `}),LabeledBooleanInput=({children:e,type:t,value:n,ariaLabel:r,id:i,isDisabled:a,isErrored:s,isRequired:u,name:f,checked:d=!1,onChange:p=()=>{},tabIndex:m=0})=>(0,o.U)(c.l,{isDisabled:a,isErrored:s,isRequired:u,isSelected:d,justifyContent:"stretch"},(0,o.U)("span",{css:h.root,"data-errored":s?"":void 0},(0,o.U)(l.K,{ariaLabel:r,checked:d,disabled:a,id:i,isErrored:s,name:f,onChange:p,tabIndex:m,type:t,value:n}),e))},29522:function(e,t,n){"use strict";n.d(t,{F:function(){return LabeledRadio}});var r=n(10355),i=n(95714),__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let LabeledRadio=e=>{var{disabled:t,isDisabled:n}=e,o=__rest(e,["disabled","isDisabled"]);return(0,r.U)(i.G,Object.assign({},o,{isDisabled:t||n,type:"radio"}))}},33784:function(e,t,n){"use strict";n.d(t,{l:function(){return FormLabel}});var r=n(50773),i=n(56283),o=n(10355),a=n(29927),s=n(73584);let u=(0,i.B)("FormLabelRequiredText",{root:Object.assign(Object.assign({},s.ZT.smallPrint1),{color:a.w.neutral700,textTransform:"lowercase","&::before":{content:'"("'},"&::after":{content:'")"'},'&[data-state="disabled"]':{color:a.w.neutral500}})}),FormLabelRequiredText=({children:e="Required",isDisabled:t=!1})=>(0,o.U)("span",{"aria-hidden":"true",css:u.root,"data-state":t?"disabled":void 0},e),c=(0,i.B)("FormLabel",{root:r.iv`
    display: grid;
    justify-content: start;
    grid-gap: 5px;
    grid-auto-flow: column;
    grid-auto-columns: auto;
    cursor: pointer;
    color: ${a.w.neutral700};

    &[data-align-items='center'] {
      align-items: center;
    }

    &[data-align-items='start'] {
      align-items: start;
    }

    &[data-justify-content='start'] {
      justify-content: start;
    }

    &[data-justify-content='stretch'] {
      justify-content: stretch;
    }

    &[data-state~='selected'] {
      color: ${a.w.blue};
    }

    &[data-state~='errored'] {
      color: ${a.w.error400};
    }

    &[data-state~='disabled'] {
      cursor: not-allowed;
    }

    &[data-state~='disabled'] {
      color: ${a.w.neutral500};
    }

    &[data-size='small'] {
      ${s.ZT.smallPrint1Semibold};
    }

    &[data-size='medium'] {
      ${s.ZT.paragraph3Medium};
    }

    &[data-size='medium'][data-state='selected'] {
      ${s.ZT.paragraph3Semibold}
    }
  `}),FormLabel=({children:e,alignItems:t="center",htmlFor:n,isDisabled:r,isErrored:i,isRequired:a,isSelected:s,justifyContent:u="start",requiredText:l,size:f="medium"})=>(0,o.U)("label",{css:c.root,"data-align-items":t,"data-justify-content":u,"data-size":f,"data-state":[s&&"selected",i&&"errored",r&&"disabled"].filter(Boolean).join(" ")||void 0,htmlFor:n},a&&"*",e,a?l?(0,o.U)(FormLabelRequiredText,{isDisabled:r},l):(0,o.U)(FormLabelRequiredText,{isDisabled:r}):null)},68889:function(e,t,n){"use strict";n.d(t,{v:function(){return Menu}});var r=n(18234),i=n(56283),o=n(10355);let a=(0,i.B)("Menu",{root:{overflow:"auto"}}),Menu=e=>(0,o.U)("ul",Object.assign({css:a.root,role:e.role},(0,r.v)(e)),e.children)},85625:function(e,t,n){"use strict";n.d(t,{s:function(){return MenuItem}});var r=n(56283),i=n(33817),o=n(10355),a=n(65535),s=n(73584),u=n(29927);let c=(0,r.B)("MenuItem",{content:e=>[Object.assign(Object.assign({},s.ZT.paragraph3Medium),{alignItems:"center",borderRadius:3,color:u.w.neutral700,display:"flex",height:44,lineHeight:"44px",padding:"0 10px",textDecoration:"none",outline:"none",width:"100%","&:not([disabled]):hover, &:not([disabled]):focus":{backgroundColor:u.w.blue10,color:u.w.blue,fontWeight:e.isSelected?600:500},"&[disabled]":{color:u.w.neutral500,cursor:"not-allowed"}}),e.isSelected&&(0,i.Q)("selected",{backgroundColor:u.w.neutral200,fontWeight:600})],text:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}),MenuItem=e=>{let t=e.href&&!e.disabled?a.r:"button",n=t===a.r,r=e.isSelected?`${e.ariaLabel||e.children}, selected`:e.ariaLabel,i=n?{ariaLabel:r,href:e.href,rel:e.rel}:{"aria-label":r,type:"button",disabled:e.disabled},s=e.role?{role:"none"}:null;return(0,o.U)("li",Object.assign({},s),(0,o.U)(t,Object.assign({},i,{component:n?e.component:void 0,color:n?null:void 0,css:c.content(e),href:e.href,onClick:e.onClick,role:e.role}),(0,o.U)("span",{css:c.text},e.children)))}},46565:function(e,t,n){"use strict";n.d(t,{h:function(){return IconButton}});var r=n(10355),i=n(32165),o=n(84295),a=n(38813),__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function BaseIconButton(e){var{icon:t,iconSize:n,isCircle:s,label:u,shouldCorrectTooltipPosition:c,tooltipId:l,tooltipPosition:f}=e,h=__rest(e,["icon","iconSize","isCircle","label","shouldCorrectTooltipPosition","tooltipId","tooltipPosition"]);return(0,r.U)(o.p,{content:u,position:f,shouldCorrectPosition:c,showTooltipOnTouchDevices:!1,tooltipId:l},({childProps:e})=>(0,r.U)(a.Y,Object.assign({ariaLabel:u},h,e,{isPill:s,isSquare:!0}),(0,r.U)(i.J,{canAcceptPointerEvents:!1,isBlock:!0,name:t,size:24})))}var IconButton_rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function IconButton(e){var{color:t="icon-primary",size:n="small",tooltipPosition:i="south"}=e,o=IconButton_rest(e,["color","size","tooltipPosition"]);return(0,r.U)(BaseIconButton,Object.assign({color:t,size:n,tooltipPosition:i},o))}},53249:function(e,t,n){"use strict";function assign(e,t){if(null==e)throw TypeError("assign requires that input parameter not be null or undefined");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}n.d(t,{Z:function(){return assign}})},22893:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r,i={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function buildFormatLongFn(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}var o={date:buildFormatLongFn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:buildFormatLongFn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},a={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function buildLocalizeFn(e){return function(t,n){var r;if("formatting"===(null!=n&&n.context?String(n.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=null!=n&&n.width?String(n.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var a=e.defaultWidth,s=null!=n&&n.width?String(n.width):e.defaultWidth;r=e.values[s]||e.values[a]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function buildMatchFn(e){return function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.width,o=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],a=t.match(o);if(!a)return null;var s=a[0],u=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(u)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(u,function(e){return e.test(s)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(u,function(e){return e.test(s)});return n=e.valueCallback?e.valueCallback(c):c,{value:n=r.valueCallback?r.valueCallback(n):n,rest:t.slice(s.length)}}}var s={code:"en-US",formatDistance:function(e,t,n){var r,o=i[e];return(r="string"==typeof o?o:1===t?o.one:o.other.replace("{{count}}",t.toString()),null!=n&&n.addSuffix)?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:o,formatRelative:function(e,t,n,r){return a[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:buildLocalizeFn({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:buildLocalizeFn({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:buildLocalizeFn({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:buildLocalizeFn({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(r={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(r.matchPattern);if(!n)return null;var i=n[0],o=e.match(r.parsePattern);if(!o)return null;var a=r.valueCallback?r.valueCallback(o[0]):o[0];return{value:a=t.valueCallback?t.valueCallback(a):a,rest:e.slice(i.length)}}),era:buildMatchFn({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:buildMatchFn({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}}},52288:function(e,t,n){"use strict";n.d(t,{j:function(){return getDefaultOptions}});var r={};function getDefaultOptions(){return r}},90715:function(e,t,n){"use strict";function getTimezoneOffsetInMilliseconds(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}n.d(t,{Z:function(){return getTimezoneOffsetInMilliseconds}})},4175:function(e,t,n){"use strict";function requiredArgs(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{Z:function(){return requiredArgs}})},15754:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return differenceInCalendarMonths}});var r=n(80800),i=n(4175);function differenceInCalendarMonths(e,t){(0,i.Z)(2,arguments);var n=(0,r.default)(e),o=(0,r.default)(t);return 12*(n.getFullYear()-o.getFullYear())+(n.getMonth()-o.getMonth())}},34189:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return endOfDay}});var r=n(80800),i=n(4175);function endOfDay(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e);return t.setHours(23,59,59,999),t}},51050:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return endOfMonth}});var r=n(80800),i=n(4175);function endOfMonth(e){(0,i.Z)(1,arguments);var t=(0,r.default)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}},71125:function(e,t,n){"use strict";n.d(t,{Z:function(){return formatDistanceToNow}});var r=n(52288),i=n(80800),o=n(4175);function compareAsc(e,t){(0,o.Z)(2,arguments);var n=(0,i.default)(e),r=(0,i.default)(t),a=n.getTime()-r.getTime();return a<0?-1:a>0?1:a}var a=n(15754),s=n(34189),u=n(51050),c={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(e){return e<0?Math.ceil(e):Math.floor(e)}},l=n(22893),f=n(53249),h=n(90715);function formatDistanceToNow(e,t){return(0,o.Z)(1,arguments),function(e,t,n){(0,o.Z)(2,arguments);var d,p,m,g,y,v=(0,r.j)(),b=null!==(d=null!==(p=null==n?void 0:n.locale)&&void 0!==p?p:v.locale)&&void 0!==d?d:l.Z;if(!b.formatDistance)throw RangeError("locale must contain formatDistance property");var S=compareAsc(e,t);if(isNaN(S))throw RangeError("Invalid time value");var T=(0,f.Z)((0,f.Z)({},n),{addSuffix:!!(null==n?void 0:n.addSuffix),comparison:S});S>0?(m=(0,i.default)(t),g=(0,i.default)(e)):(m=(0,i.default)(e),g=(0,i.default)(t));var C=function(e,t,n){(0,o.Z)(2,arguments);var r,a=function(e,t){return(0,o.Z)(2,arguments),(0,i.default)(e).getTime()-(0,i.default)(t).getTime()}(e,t)/1e3;return((r=null==n?void 0:n.roundingMethod)?c[r]:c.trunc)(a)}(g,m),E=Math.round((C-((0,h.Z)(g)-(0,h.Z)(m))/1e3)/60);if(E<2){if(null!=n&&n.includeSeconds){if(C<5)return b.formatDistance("lessThanXSeconds",5,T);if(C<10)return b.formatDistance("lessThanXSeconds",10,T);if(C<20)return b.formatDistance("lessThanXSeconds",20,T);if(C<40)return b.formatDistance("halfAMinute",0,T);else if(C<60)return b.formatDistance("lessThanXMinutes",1,T);else return b.formatDistance("xMinutes",1,T)}return 0===E?b.formatDistance("lessThanXMinutes",1,T):b.formatDistance("xMinutes",E,T)}if(E<45)return b.formatDistance("xMinutes",E,T);if(E<90)return b.formatDistance("aboutXHours",1,T);if(E<1440){var _=Math.round(E/60);return b.formatDistance("aboutXHours",_,T)}if(E<2520)return b.formatDistance("xDays",1,T);if(E<43200){var w=Math.round(E/1440);return b.formatDistance("xDays",w,T)}if(E<86400)return y=Math.round(E/43200),b.formatDistance("aboutXMonths",y,T);if((y=function(e,t){(0,o.Z)(2,arguments);var n,r=(0,i.default)(e),c=(0,i.default)(t),l=compareAsc(r,c),f=Math.abs((0,a.default)(r,c));if(f<1)n=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-l*f);var h=compareAsc(r,c)===-l;(function(e){(0,o.Z)(1,arguments);var t=(0,i.default)(e);return(0,s.default)(t).getTime()===(0,u.default)(t).getTime()})((0,i.default)(e))&&1===f&&1===compareAsc(e,c)&&(h=!1),n=l*(f-Number(h))}return 0===n?0:n}(g,m))<12){var k=Math.round(E/43200);return b.formatDistance("xMonths",k,T)}var M=y%12,I=Math.floor(y/12);return M<3?b.formatDistance("aboutXYears",I,T):M<9?b.formatDistance("overXYears",I,T):b.formatDistance("almostXYears",I+1,T)}(e,Date.now(),t)}},80800:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return toDate}});var r=n(4175);function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function toDate(e){(0,r.Z)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===_typeof(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(Error().stack)),new Date(NaN))}},59512:function(e){e.exports=function(e){return e.split("")}},77379:function(e){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},3237:function(e,t,n){var r=n(77379);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},63932:function(e){var t=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},15233:function(e,t,n){var r=n(59512),i=n(63932),o=n(45699);e.exports=function(e){return i(e)?o(e):r(e)}},45699:function(e){var t="\ud800-\udfff",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\ud83c[\udffb-\udfff]",i="[^"+t+"]",o="(?:\ud83c[\udde6-\uddff]){2}",a="[\ud800-\udbff][\udc00-\udfff]",s="(?:"+n+"|"+r+")?",u="[\\ufe0e\\ufe0f]?",c="(?:\\u200d(?:"+[i,o,a].join("|")+")"+u+s+")*",l=RegExp(r+"(?="+r+")|(?:"+[i+n+"?",n,o,a,"["+t+"]"].join("|")+")"+(u+s+c),"g");e.exports=function(e){return e.match(l)||[]}},7534:function(e){e.exports=function(e){return null===e}},59659:function(e,t,n){var r=n(25048),i=n(51309),o=r(function(e,t,n){return e+(n?" ":"")+i(t)});e.exports=o},52015:function(e){"use strict";let t=self.fetch.bind(self);e.exports=t,e.exports.default=e.exports}}]);
//# sourceMappingURL=177-198648caba626c44.js.map