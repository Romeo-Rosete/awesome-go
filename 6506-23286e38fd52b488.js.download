(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6506],{84153:function(n,r,o){"use strict";o.d(r,{v:function(){return en}});var s,u,l,d,f,h,g,y,b,S,_,w,C,E,k,R,A,I,N,x,O,L,M,P,D,U,F,z,B={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},V=console,H={};Object.keys(B).forEach(function(n){H[n]=V[n]});var j="Datadog Browser SDK:",q={debug:H.debug.bind(V,j),log:H.log.bind(V,j),info:H.info.bind(V,j),warn:H.warn.bind(V,j),error:H.error.bind(V,j)};function catchUserErrors(n,r){return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];try{return n.apply(void 0,o)}catch(n){q.error(r,n)}}}var __spreadArray=function(n,r,o){if(o||2==arguments.length)for(var s,u=0,l=r.length;u<l;u++)!s&&u in r||(s||(s=Array.prototype.slice.call(r,0,u)),s[u]=r[u]);return n.concat(s||Array.prototype.slice.call(r))},G=!1;function startMonitorErrorCollection(n){d=n}function setDebugMode(n){G=n}function monitor(n){return function(){return callMonitored(n,this,arguments)}}function callMonitored(n,r,o){try{return n.apply(r,o)}catch(n){if(displayIfDebugEnabled(n),d)try{d(n)}catch(n){displayIfDebugEnabled(n)}}}function displayIfDebugEnabled(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];G&&q.error.apply(q,__spreadArray(["[MONITOR]"],n,!1))}function includes(n,r){return -1!==n.indexOf(r)}function arrayFrom(n){if(Array.from)return Array.from(n);var r=[];if(n instanceof Set)n.forEach(function(n){return r.push(n)});else for(var o=0;o<n.length;o++)r.push(n[o]);return r}function find(n,r){for(var o=0;o<n.length;o+=1){var s=n[o];if(r(s,o))return s}}function findLast(n,r){for(var o=n.length-1;o>=0;o-=1){var s=n[o];if(r(s,o,n))return s}}function forEach(n,r){Array.prototype.forEach.call(n,r)}function objectValues(n){return Object.keys(n).map(function(r){return n[r]})}function objectEntries(n){return Object.keys(n).map(function(r){return[r,n[r]]})}function startsWith(n,r){return n.slice(0,r.length)===r}function endsWith(n,r){return n.slice(-r.length)===r}function elementMatches(n,r){return n.matches?n.matches(r):!!n.msMatchesSelector&&n.msMatchesSelector(r)}function cssEscape(n){return window.CSS&&window.CSS.escape?window.CSS.escape(n):n.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(n,r){return r?"\x00"===n?"ï¿½":"".concat(n.slice(0,-1),"\\").concat(n.charCodeAt(n.length-1).toString(16)," "):"\\".concat(n)})}function polyfills_assign(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return r.forEach(function(r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}),n}function makePublicApi(n){var r=polyfills_assign({version:"5.4.0",onReady:function(n){n()}},n);return Object.defineProperty(r,"_setDebug",{get:function(){return setDebugMode},enumerable:!1}),r}function defineGlobal(n,r,o){var s=n[r];n[r]=o,s&&s.q&&s.q.forEach(function(n){return catchUserErrors(n,"onReady callback threw an error:")()})}function getGlobalObject(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var n=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof n&&(n="object"==typeof self?self:"object"==typeof window?window:{}),n}var W=/[^\u0000-\u007F]/;function computeBytesCount(n){return W.test(n)?void 0!==window.TextEncoder?new TextEncoder().encode(n).length:new Blob([n]).size:n.length}function concatBuffers(n){for(var r=n.reduce(function(n,r){return n+r.length},0),o=new Uint8Array(r),s=0,u=0;u<n.length;u++){var l=n[u];o.set(l,s),s+=l.length}return o}function getZoneJsOriginalValue(n,r){var o,s=getGlobalObject();return s.Zone&&"function"==typeof s.Zone.__symbol__&&(o=n[s.Zone.__symbol__(r)]),o||(o=n[r]),o}function timer_setTimeout(n,r){return getZoneJsOriginalValue(getGlobalObject(),"setTimeout")(monitor(n),r)}function timer_clearTimeout(n){getZoneJsOriginalValue(getGlobalObject(),"clearTimeout")(n)}function timer_setInterval(n,r){return getZoneJsOriginalValue(getGlobalObject(),"setInterval")(monitor(n),r)}function timer_clearInterval(n){getZoneJsOriginalValue(getGlobalObject(),"clearInterval")(n)}function throttle(n,r,o){var s,u,l=!o||void 0===o.leading||o.leading,d=!o||void 0===o.trailing||o.trailing,f=!1;return{throttled:function(){for(var o=[],h=0;h<arguments.length;h++)o[h]=arguments[h];if(f){s=o;return}l?n.apply(void 0,o):s=o,f=!0,u=timer_setTimeout(function(){d&&s&&n.apply(void 0,s),f=!1,s=void 0},r)},cancel:function(){timer_clearTimeout(u),f=!1,s=void 0}}}function noop(){}function getType(n){return null===n?"null":Array.isArray(n)?"array":typeof n}function mergeInto(n,r,o){if(void 0===o&&(o=createCircularReferenceChecker()),void 0===r)return n;if("object"!=typeof r||null===r)return r;if(r instanceof Date)return new Date(r.getTime());if(r instanceof RegExp){var s=r.flags||[r.global?"g":"",r.ignoreCase?"i":"",r.multiline?"m":"",r.sticky?"y":"",r.unicode?"u":""].join("");return new RegExp(r.source,s)}if(!o.hasAlreadyBeenSeen(r)){if(Array.isArray(r)){for(var u=Array.isArray(n)?n:[],l=0;l<r.length;++l)u[l]=mergeInto(u[l],r[l],o);return u}var d="object"===getType(n)?n:{};for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(d[f]=mergeInto(d[f],r[f],o));return d}}function deepClone(n){return mergeInto(void 0,n)}function combine(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];for(var s=0;s<r.length;s++){var u=r[s];null!=u&&(n=mergeInto(n,u))}return n}function createCircularReferenceChecker(){if("undefined"!=typeof WeakSet){var n=new WeakSet;return{hasAlreadyBeenSeen:function(r){var o=n.has(r);return o||n.add(r),o}}}var r=[];return{hasAlreadyBeenSeen:function(n){var o=r.indexOf(n)>=0;return o||r.push(n),o}}}function jsonStringify(n,r,o){if("object"!=typeof n||null===n)return JSON.stringify(n);var s=detachToJsonMethod(Object.prototype),u=detachToJsonMethod(Array.prototype),l=detachToJsonMethod(Object.getPrototypeOf(n)),d=detachToJsonMethod(n);try{return JSON.stringify(n,r,o)}catch(n){return"<error: unable to serialize object>"}finally{s(),u(),l(),d()}}function detachToJsonMethod(n){var r=n.toJSON;return r?(delete n.toJSON,function(){n.toJSON=r}):noop}function sanitize(n,r){void 0===r&&(r=225280);var o,s=detachToJsonMethod(Object.prototype),u=detachToJsonMethod(Array.prototype),l=[],d=new WeakMap,f=sanitizeProcessor(n,"$",void 0,l,d),h=(null===(o=JSON.stringify(f))||void 0===o?void 0:o.length)||0;if(h>r){warnOverCharacterLimit(r,"discarded",n);return}for(;l.length>0&&h<r;){var g=l.shift(),y=0;if(Array.isArray(g.source))for(var b=0;b<g.source.length;b++){var S=sanitizeProcessor(g.source[b],g.path,b,l,d);if(void 0!==S?h+=JSON.stringify(S).length:h+=4,h+=y,y=1,h>r){warnOverCharacterLimit(r,"truncated",n);break}g.target[b]=S}else for(var b in g.source)if(Object.prototype.hasOwnProperty.call(g.source,b)){var S=sanitizeProcessor(g.source[b],g.path,b,l,d);if(void 0!==S&&(h+=JSON.stringify(S).length+y+b.length+3,y=1),h>r){warnOverCharacterLimit(r,"truncated",n);break}g.target[b]=S}}return s(),u(),f}function sanitizeProcessor(n,r,o,s,u){var l=tryToApplyToJSON(n);if(!l||"object"!=typeof l)return sanitizePrimitivesAndFunctions(l);var d=sanitizeObjects(l);if("[Object]"!==d&&"[Array]"!==d&&"[Error]"!==d)return d;if(u.has(n))return"[Reference seen at ".concat(u.get(n),"]");var f=void 0!==o?"".concat(r,".").concat(o):r,h=Array.isArray(l)?[]:{};return u.set(n,f),s.push({source:l,target:h,path:f}),h}function sanitizePrimitivesAndFunctions(n){return"bigint"==typeof n?"[BigInt] ".concat(n.toString()):"function"==typeof n?"[Function] ".concat(n.name||"unknown"):"symbol"==typeof n?"[Symbol] ".concat(n.description||n.toString()):n}function sanitizeObjects(n){try{if(n instanceof Event)return{isTrusted:n.isTrusted};var r=Object.prototype.toString.call(n).match(/\[object (.*)\]/);if(r&&r[1])return"[".concat(r[1],"]")}catch(n){}return"[Unserializable]"}function tryToApplyToJSON(n){if(n&&"function"==typeof n.toJSON)try{return n.toJSON()}catch(n){}return n}function warnOverCharacterLimit(n,r,o){q.warn("The data provided has been ".concat(r," as it is over the limit of ").concat(n," characters:"),o)}var Z=function(){function Observable(n){this.onFirstSubscribe=n,this.observers=[]}return Observable.prototype.subscribe=function(n){var r=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(n),{unsubscribe:function(){r.observers=r.observers.filter(function(r){return n!==r}),!r.observers.length&&r.onLastUnsubscribe&&r.onLastUnsubscribe()}}},Observable.prototype.notify=function(n){this.observers.forEach(function(r){return r(n)})},Observable}();function mergeObservables(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=new Z(function(){var r=n.map(function(n){return n.subscribe(function(n){return o.notify(n)})});return function(){return r.forEach(function(n){return n.unsubscribe()})}});return o}var K=((f={})[0]="feature flag evaluation",f[1]="user",f[2]="global context",f[3]="logger context",f);function warnIfCustomerDataLimitReached(n,r){return n>3072&&(q.warn("The ".concat(K[r]," data exceeds the recommended ").concat(3,"KiB threshold. More details: https://docs.datadoghq.com/real_user_monitoring/browser/troubleshooting/#customer-data-exceeds-the-recommended-3kib-warning")),!0)}function createContextManager(n,r){void 0===r&&(r=computeBytesCount);var o,s={},u=!1,l=new Z,d=throttle(function(s){o=r(jsonStringify(s)),u||(u=warnIfCustomerDataLimitReached(o,n))},200).throttled,f={getBytesCount:function(){return o},getContext:function(){return deepClone(s)},setContext:function(n){"object"===getType(n)?d(s=sanitize(n)):f.clearContext(),l.notify()},setContextProperty:function(n,r){s[n]=sanitize(r),d(s),l.notify()},removeContextProperty:function(n){delete s[n],d(s),l.notify()},clearContext:function(){s={},o=0,l.notify()},changeObservable:l};return f}var Y=function(){function BoundedBuffer(){this.buffer=[]}return BoundedBuffer.prototype.add=function(n){this.buffer.push(n)>500&&this.buffer.splice(0,1)},BoundedBuffer.prototype.drain=function(){this.buffer.forEach(function(n){return n()}),this.buffer.length=0},BoundedBuffer}();function performDraw(n){return 0!==n&&100*Math.random()<=n}function round(n,r){return+n.toFixed(r)}function isPercentage(n){return isNumber(n)&&n>=0&&n<=100}function isNumber(n){return"number"==typeof n}function relativeToClocks(n){return{relative:n,timeStamp:getCorrectedTimeStamp(n)}}function getCorrectedTimeStamp(n){var r=dateNow()-performance.now();return r>getNavigationStart()?Math.round(r+n):getTimeStamp(n)}function currentDrift(){var n;return Math.round(dateNow()-(getNavigationStart()+performance.now()))}function toServerDuration(n){return isNumber(n)?round(1e6*n,0):n}function dateNow(){return new Date().getTime()}function timeStampNow(){return dateNow()}function relativeNow(){return performance.now()}function clocksNow(){return{relative:relativeNow(),timeStamp:timeStampNow()}}function clocksOrigin(){return{relative:0,timeStamp:getNavigationStart()}}function getTimeStamp(n){return Math.round(getNavigationStart()+n)}function looksLikeRelativeTime(n){return n<31536e6}function getNavigationStart(){return void 0===h&&(h=performance.timing.navigationStart),h}function generateUUID(n){return n?(parseInt(n,10)^16*Math.random()>>parseInt(n,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,generateUUID)}var X=/([\w-]+)\s*=\s*([^;]+)/g;function findCommaSeparatedValue(n,r){for(X.lastIndex=0;;){var o=X.exec(n);if(o){if(o[1]===r)return o[2]}else break}}function findCommaSeparatedValues(n){var r=new Map;for(X.lastIndex=0;;){var o=X.exec(n);if(o)r.set(o[1],o[2]);else break}return r}function safeTruncate(n,r,o){void 0===o&&(o="");var s=n.charCodeAt(r-1),u=s>=55296&&s<=56319?r+1:r;return n.length<=u?n:"".concat(n.slice(0,u)).concat(o)}function setCookie(n,r,o,s){var u=new Date;u.setTime(u.getTime()+o);var l="expires=".concat(u.toUTCString()),d=s&&s.crossSite?"none":"strict",f=s&&s.domain?";domain=".concat(s.domain):"",h=s&&s.secure?";secure":"";document.cookie="".concat(n,"=").concat(r,";").concat(l,";path=/;samesite=").concat(d).concat(f).concat(h)}function getCookie(n){return findCommaSeparatedValue(document.cookie,n)}function getInitCookie(n){return g||(g=findCommaSeparatedValues(document.cookie)),g.get(n)}function deleteCookie(n,r){setCookie(n,"",0,r)}function areCookiesAuthorized(n){if(void 0===document.cookie||null===document.cookie)return!1;try{var r="dd_cookie_test_".concat(generateUUID()),o="test";setCookie(r,o,6e4,n);var s=getCookie(r)===o;return deleteCookie(r,n),s}catch(n){return q.error(n),!1}}function getCurrentSite(){if(void 0===y){for(var n="dd_site_test_".concat(generateUUID()),r=window.location.hostname.split("."),o=r.pop();r.length&&!getCookie(n);)setCookie(n,"test",1e3,{domain:o="".concat(r.pop(),".").concat(o)});deleteCookie(n,{domain:o}),y=o}return y}function willSyntheticsInjectRum(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||getInitCookie("datadog-synthetics-injects-rum"))}function getSyntheticsTestId(){var n=window._DATADOG_SYNTHETICS_PUBLIC_ID||getInitCookie("datadog-synthetics-public-id");return"string"==typeof n?n:void 0}function getSyntheticsResultId(){var n=window._DATADOG_SYNTHETICS_RESULT_ID||getInitCookie("datadog-synthetics-result-id");return"string"==typeof n?n:void 0}function getEventBridge(){var n=getEventBridgeGlobal();if(n)return{getAllowedWebViewHosts:function(){return JSON.parse(n.getAllowedWebViewHosts())},send:function(r,o){n.send(JSON.stringify({eventType:r,event:o}))}}}function canUseEventBridge(n){void 0===n&&(n=null===(r=getGlobalObject().location)||void 0===r?void 0:r.hostname);var r,o=getEventBridge();return!!o&&o.getAllowedWebViewHosts().some(function(r){return n===r||endsWith(n,".".concat(r))})}function getEventBridgeGlobal(){return getGlobalObject().DatadogEventBridge}function addEventListener(n,r,o,s,u){return addEventListeners(n,r,[o],s,u)}function addEventListeners(n,r,o,s,u){var l=void 0===u?{}:u,d=l.once,f=l.capture,h=l.passive,g=monitor(function(r){(r.isTrusted||r.__ddIsTrusted||n.allowUntrustedEvents)&&(d&&stop(),s(r))}),y=h?{capture:f,passive:h}:f,b=getZoneJsOriginalValue(r,"addEventListener");function stop(){var n=getZoneJsOriginalValue(r,"removeEventListener");o.forEach(function(o){return n.call(r,o,g,y)})}return o.forEach(function(n){return b.call(r,n,g,y)}),{stop:stop}}(s=b||(b={})).BEFORE_UNLOAD="beforeunload",s.CLICK="click",s.DBL_CLICK="dblclick",s.KEY_DOWN="keydown",s.LOAD="load",s.POP_STATE="popstate",s.SCROLL="scroll",s.TOUCH_START="touchstart",s.TOUCH_END="touchend",s.TOUCH_MOVE="touchmove",s.VISIBILITY_CHANGE="visibilitychange",s.PAGE_SHOW="pageshow",s.FREEZE="freeze",s.RESUME="resume",s.DOM_CONTENT_LOADED="DOMContentLoaded",s.POINTER_DOWN="pointerdown",s.POINTER_UP="pointerup",s.POINTER_CANCEL="pointercancel",s.HASH_CHANGE="hashchange",s.PAGE_HIDE="pagehide",s.MOUSE_DOWN="mousedown",s.MOUSE_UP="mouseup",s.MOUSE_MOVE="mousemove",s.FOCUS="focus",s.BLUR="blur",s.CONTEXT_MENU="contextmenu",s.RESIZE="resize",s.CHANGE="change",s.INPUT="input",s.PLAY="play",s.PAUSE="pause",s.SECURITY_POLICY_VIOLATION="securitypolicyviolation",s.SELECTION_CHANGE="selectionchange",s.STORAGE="storage";var J=[];function createStoredContextManager(n,r,o,s){void 0===s&&(s=computeBytesCount);var u=buildStorageKey(r,o),l=createContextManager(o,s);return synchronizeWithStorage(),J.push(addEventListener(n,window,b.STORAGE,function(n){u===n.key&&synchronizeWithStorage()})),l.changeObservable.subscribe(dumpToStorage),l;function synchronizeWithStorage(){var n=localStorage.getItem(u),r=null!==n?JSON.parse(n):{};l.setContext(r)}function dumpToStorage(){localStorage.setItem(u,JSON.stringify(l.getContext()))}}function buildStorageKey(n,r){return"".concat("_dd_c","_").concat(n,"_").concat(r)}function createIdentityEncoder(){var n="",r=0;return{isAsync:!1,get isEmpty(){return!n},write:function(o,s){var u=computeBytesCount(o);r+=u,n+=o,s&&s(u)},finish:function(n){n(this.finishSync())},finishSync:function(){var o={output:n,outputBytesCount:r,rawBytesCount:r,pendingData:""};return n="",r=0,o},estimateEncodedBytesCount:function(n){return n.length}}}function computeStackTrace(n){var r=[],o=tryToGetString(n,"stack"),s=String(n);return o&&startsWith(o,s)&&(o=o.slice(s.length)),o&&o.split("\n").forEach(function(n){var o=parseChromeLine(n)||parseChromeAnonymousLine(n)||parseWinLine(n)||parseGeckoLine(n);o&&(!o.func&&o.line&&(o.func="?"),r.push(o))}),{message:tryToGetString(n,"message"),name:tryToGetString(n,"name"),stack:r}}var $="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Q="(?::(\\d+))",tt=RegExp("^\\s*at (.*?) ?\\(".concat($).concat(Q,"?").concat(Q,"?\\)?\\s*$"),"i"),te=new RegExp("\\((\\S*)".concat(Q).concat(Q,"\\)"));function parseChromeLine(n){var r=tt.exec(n);if(r){var o=r[2]&&0===r[2].indexOf("native"),s=r[2]&&0===r[2].indexOf("eval"),u=te.exec(r[2]);return s&&u&&(r[2]=u[1],r[3]=u[2],r[4]=u[3]),{args:o?[r[2]]:[],column:r[4]?+r[4]:void 0,func:r[1]||"?",line:r[3]?+r[3]:void 0,url:o?void 0:r[2]}}}var tn=RegExp("^\\s*at ?".concat($).concat(Q,"?").concat(Q,"??\\s*$"),"i");function parseChromeAnonymousLine(n){var r=tn.exec(n);if(r)return{args:[],column:r[3]?+r[3]:void 0,func:"?",line:r[2]?+r[2]:void 0,url:r[1]}}var tr=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function parseWinLine(n){var r=tr.exec(n);if(r)return{args:[],column:r[4]?+r[4]:void 0,func:r[1]||"?",line:+r[3],url:r[2]}}var ti=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,to=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function parseGeckoLine(n){var r=ti.exec(n);if(r){var o=r[3]&&r[3].indexOf(" > eval")>-1,s=to.exec(r[3]);return o&&s&&(r[3]=s[1],r[4]=s[2],r[5]=void 0),{args:r[2]?r[2].split(","):[],column:r[5]?+r[5]:void 0,func:r[1]||"?",line:r[4]?+r[4]:void 0,url:r[3]}}}function tryToGetString(n,r){if("object"==typeof n&&n&&r in n){var o=n[r];return"string"==typeof o?o:void 0}}function computeStackTraceFromOnErrorMessage(n,r,o,s){var u=tryToParseMessage(n);return{name:u.name,message:u.message,stack:[{url:r,column:s,line:o}]}}var ta=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function tryToParseMessage(n){var r,o,s;return"[object String]"===({}).toString.call(n)&&(o=(r=ta.exec(n))[1],s=r[2]),{name:o,message:s}}var ts="No stack, consider using an instance of Error";function computeRawError(n){var r=n.stackTrace,o=n.originalError,s=n.handlingStack,u=n.startClocks,l=n.nonErrorPrefix,d=n.source,f=n.handling,h=o instanceof Error,g=computeMessage(r,h,l,o),y=hasUsableStack(h,r)?toStackTraceString(r):ts,b=h?flattenErrorCauses(o,d):void 0,S=null==r?void 0:r.name,_=tryToGetFingerprint(o);return{startClocks:u,source:d,handling:f,handlingStack:s,originalError:o,type:S,message:g,stack:y,causes:b,fingerprint:_}}function computeMessage(n,r,o,s){return(null==n?void 0:n.message)&&(null==n?void 0:n.name)?n.message:r?"Empty message":"".concat(o," ").concat(jsonStringify(sanitize(s)))}function hasUsableStack(n,r){return void 0!==r&&(!!n||r.stack.length>0&&(r.stack.length>1||void 0!==r.stack[0].url))}function tryToGetFingerprint(n){return n instanceof Error&&"dd_fingerprint"in n?String(n.dd_fingerprint):void 0}function toStackTraceString(n){var r=formatErrorMessage(n);return n.stack.forEach(function(n){var o="?"===n.func?"<anonymous>":n.func,s=n.args&&n.args.length>0?"(".concat(n.args.join(", "),")"):"",u=n.line?":".concat(n.line):"",l=n.line&&n.column?":".concat(n.column):"";r+="\n  at ".concat(o).concat(s," @ ").concat(n.url).concat(u).concat(l)}),r}function formatErrorMessage(n){return"".concat(n.name||"Error",": ").concat(n.message)}function createHandlingStack(){var n,r=Error();if(!r.stack)try{throw r}catch(n){}return callMonitored(function(){var o=computeStackTrace(r);o.stack=o.stack.slice(2),n=toStackTraceString(o)}),n}function flattenErrorCauses(n,r){for(var o=n,s=[];(null==o?void 0:o.cause)instanceof Error&&s.length<10;){var u=computeStackTrace(o.cause);s.push({message:o.cause.message,source:r,type:null==u?void 0:u.name,stack:u&&toStackTraceString(u)}),o=o.cause}return s.length?s:void 0}function sanitizeUser(n){var r=polyfills_assign({},n);return["id","name","email"].forEach(function(n){n in r&&(r[n]=String(r[n]))}),r}function checkUser(n){var r="object"===getType(n);return r||q.error("Unsupported user:",n),r}(u=S||(S={})).PAGEHIDE="pagehide",u.FEATURE_FLAGS="feature_flags",u.RESOURCE_PAGE_STATES="resource_page_states",u.COLLECT_FLUSH_REASON="collect_flush_reason",u.SCROLLMAP="scrollmap",u.DISABLE_REPLAY_INLINE_CSS="disable_replay_inline_css";var tu=new Set;function addExperimentalFeatures(n){n.forEach(function(n){tu.add(n)})}function isExperimentalFeatureEnabled(n){return tu.has(n)}function getExperimentalFeatures(){return tu}function shallowClone(n){return polyfills_assign({},n)}function objectHasValue(n,r){return Object.keys(n).some(function(o){return n[o]===r})}function isEmptyObject(n){return 0===Object.keys(n).length}function mapValues(n,r){for(var o={},s=0,u=Object.keys(n);s<u.length;s++){var l=u[s];o[l]=r(n[l])}return o}function isIE(){return 0===detectBrowserCached()}function isChromium(){return 1===detectBrowserCached()}function isSafari(){return 2===detectBrowserCached()}function detectBrowserCached(){return null!=_?_:_=detectBrowser()}function detectBrowser(n){void 0===n&&(n=window);var r,o=n.navigator.userAgent;return n.chrome||/HeadlessChrome/.test(o)?1:(null===(r=n.navigator.vendor)||void 0===r?void 0:r.indexOf("Apple"))===0||/safari/i.test(o)&&!/chrome|android/i.test(o)?2:n.document.documentMode?0:3}var tc="_dd_s",tl=/^([a-z]+)=([a-z0-9-]+)$/;function expandSessionState(n){n.expire=String(dateNow()+9e5)}function toSessionString(n){return objectEntries(n).map(function(n){var r=n[0],o=n[1];return"".concat(r,"=").concat(o)}).join("&")}function toSessionState(n){var r={};return isValidSessionString(n)&&n.split("&").forEach(function(n){var o=tl.exec(n);if(null!==o){var s=o[1],u=o[2];r[s]=u}}),r}function isValidSessionString(n){return!!n&&(-1!==n.indexOf("&")||tl.test(n))}function tryOldCookiesMigration(n){if(!getInitCookie(tc)){var r=getInitCookie("_dd"),o=getInitCookie("_dd_r"),s=getInitCookie("_dd_l"),u={};r&&(u.id=r),s&&/^[01]$/.test(s)&&(u.logs=s),o&&/^[012]$/.test(o)&&(u.rum=o),isEmptyObject(u)||(expandSessionState(u),n.persistSession(u))}}function selectCookieStrategy(n){var r=buildCookieOptions(n);return areCookiesAuthorized(r)?{type:"Cookie",cookieOptions:r}:void 0}function initCookieStrategy(n){var r={isLockEnabled:isChromium(),persistSession:persistSessionCookie(n),retrieveSession:retrieveSessionCookie,clearSession:deleteSessionCookie(n)};return tryOldCookiesMigration(r),r}function persistSessionCookie(n){return function(r){setCookie(tc,toSessionString(r),9e5,n)}}function retrieveSessionCookie(){return toSessionState(getCookie(tc))}function deleteSessionCookie(n){return function(){deleteCookie(tc,n)}}function buildCookieOptions(n){var r={};return r.secure=!!n.useSecureSessionCookie||!!n.useCrossSiteSessionCookie,r.crossSite=!!n.useCrossSiteSessionCookie,n.trackSessionAcrossSubdomains&&(r.domain=getCurrentSite()),r}function selectLocalStorageStrategy(){try{var n=generateUUID(),r="".concat("_dd_test_").concat(n);localStorage.setItem(r,n);var o=localStorage.getItem(r);return localStorage.removeItem(r),n===o?{type:"LocalStorage"}:void 0}catch(n){return}}function initLocalStorageStrategy(){return{isLockEnabled:!1,persistSession:persistInLocalStorage,retrieveSession:retrieveSessionFromLocalStorage,clearSession:clearSessionFromLocalStorage}}function persistInLocalStorage(n){localStorage.setItem(tc,toSessionString(n))}function retrieveSessionFromLocalStorage(){return toSessionState(localStorage.getItem(tc))}function clearSessionFromLocalStorage(){localStorage.removeItem(tc)}var td=[];function processSessionStoreOperations(n,r,o){void 0===o&&(o=0);var s,u,l=r.isLockEnabled,d=r.retrieveSession,f=r.persistSession,h=r.clearSession;if(w||(w=n),n!==w){td.push(n);return}if(l&&o>=100){next(r);return}var g=d();if(l&&(g.lock||(u=generateUUID(),g.lock=u,f(g),(g=d()).lock!==u))){retryLater(n,r,o);return}var y=n.process(g);if(l&&(g=d()).lock!==u){retryLater(n,r,o);return}if(y&&(isEmptyObject(y)?h():(expandSessionState(y),f(y))),l&&!(y&&isEmptyObject(y))){if((g=d()).lock!==u){retryLater(n,r,o);return}delete g.lock,f(g),y=g}null===(s=n.after)||void 0===s||s.call(n,y||g),next(r)}function retryLater(n,r,o){timer_setTimeout(function(){processSessionStoreOperations(n,r,o+1)},10)}function next(n){w=void 0;var r=td.shift();r&&processSessionStoreOperations(r,n)}function selectSessionStoreStrategyType(n){var r=selectCookieStrategy(n);return!r&&n.allowFallbackToLocalStorage&&(r=selectLocalStorageStrategy()),r}function startSessionStore(n,r,o){var s=new Z,u=new Z,l="Cookie"===n.type?initCookieStrategy(n.cookieOptions):initLocalStorageStrategy(),d=l.clearSession,f=l.retrieveSession,h=timer_setInterval(watchSession,1e3),g=retrieveActiveSession();function expandSession(){processSessionStoreOperations({process:function(n){return hasSessionInCache()?synchronizeSession(n):void 0}},l)}function watchSession(){processSessionStoreOperations({process:function(n){return isActiveSession(n)?void 0:{}},after:synchronizeSession},l)}function synchronizeSession(n){return isActiveSession(n)||(n={}),hasSessionInCache()&&(isSessionInCacheOutdated(n)?expireSessionInCache():g=n),n}function expandOrRenewSessionState(n){var s=o(n[r]),u=s.trackingType,l=s.isTracked;return n[r]=u,l&&!n.id&&(n.id=generateUUID(),n.created=String(dateNow())),l}function hasSessionInCache(){return void 0!==g[r]}function isSessionInCacheOutdated(n){return g.id!==n.id||g[r]!==n[r]}function expireSessionInCache(){g={},u.notify()}function renewSessionInCache(n){g=n,s.notify()}function retrieveActiveSession(){var n=f();return isActiveSession(n)?n:{}}function isActiveSession(n){return(void 0===n.created||dateNow()-Number(n.created)<144e5)&&(void 0===n.expire||dateNow()<Number(n.expire))}return{expandOrRenewSession:throttle(function(){var n;processSessionStoreOperations({process:function(r){var o=synchronizeSession(r);return n=expandOrRenewSessionState(o),o},after:function(r){n&&!hasSessionInCache()&&renewSessionInCache(r),g=r}},l)},1e3).throttled,expandSession:expandSession,getSession:function(){return g},renewObservable:s,expireObservable:u,expire:function(){d(),synchronizeSession({})},stop:function(){timer_clearInterval(h)}}}function normalizeUrl(n){return buildUrl(n,getLocationOrigin()).href}function isValidUrl(n){try{return!!buildUrl(n)}catch(n){return!1}}function getPathName(n){var r=buildUrl(n).pathname;return"/"===r[0]?r:"/".concat(r)}function buildUrl(n,r){var o=getSupportedUrl();if(o)try{return void 0!==r?new o(n,r):new o(n)}catch(o){throw Error("Failed to construct URL: ".concat(String(o)," ").concat(jsonStringify({url:n,base:r})))}if(void 0===r&&!/:/.test(n))throw Error("Invalid URL: '".concat(n,"'"));var s=document,u=s.createElement("a");if(void 0!==r){var l=(s=document.implementation.createHTMLDocument("")).createElement("base");l.href=r,s.head.appendChild(l),s.body.appendChild(u)}return u.href=n,u}var tf=URL;function getSupportedUrl(){if(void 0===C)try{var n=new tf("http://test/path");C="http://test/path"===n.href}catch(n){C=!1}return C?tf:void 0}function getLocationOrigin(){return getLinkElementOrigin(window.location)}function getLinkElementOrigin(n){if(n.origin&&"null"!==n.origin)return n.origin;var r=n.host.replace(/(:80|:443)$/,"");return"".concat(n.protocol,"//").concat(r)}var tp="datad0g.com",tm="datadoghq.com";function createEndpointBuilder(n,r,o){var s=createEndpointUrlWithParametersBuilder(n,r);return{build:function(u,l){return s(buildEndpointParameters(n,r,o,u,l))},urlPrefix:s(""),trackType:r}}function createEndpointUrlWithParametersBuilder(n,r){var o="/api/v2/".concat(r),s=n.proxy;if("string"==typeof s){var u=normalizeUrl(s);return function(n){return"".concat(u,"?ddforward=").concat(encodeURIComponent("".concat(o,"?").concat(n)))}}if("function"==typeof s)return function(n){return s({path:o,parameters:n})};var l=buildEndpointHost(n);return function(n){return"https://".concat(l).concat(o,"?").concat(n)}}function buildEndpointHost(n){var r=n.site,o=void 0===r?tm:r,s=n.internalAnalyticsSubdomain;if(s&&o===tm)return"".concat(s,".").concat(tm);var u=o.split("."),l=u.pop();return"browser-intake-".concat(u.join("-"),".").concat(l)}function buildEndpointParameters(n,r,o,s,u){var l=n.clientToken,d=n.internalAnalyticsSubdomain,f=u.retry,h=u.flushReason,g=u.encoding,y=["sdk_version:".concat("5.4.0"),"api:".concat(s)].concat(o);h&&isExperimentalFeatureEnabled(S.COLLECT_FLUSH_REASON)&&y.push("flush_reason:".concat(h)),f&&y.push("retry_count:".concat(f.count),"retry_after:".concat(f.lastFailureStatus));var b=["ddsource=browser","ddtags=".concat(encodeURIComponent(y.join(","))),"dd-api-key=".concat(l),"dd-evp-origin-version=".concat(encodeURIComponent("5.4.0")),"dd-evp-origin=browser","dd-request-id=".concat(generateUUID())];return g&&b.push("dd-evp-encoding=".concat(g)),"rum"===r&&b.push("batch_time=".concat(timeStampNow())),d&&b.reverse(),b.join("&")}function buildTags(n){var r=n.env,o=n.service,s=n.version,u=n.datacenter,l=[];return r&&l.push(buildTag("env",r)),o&&l.push(buildTag("service",o)),s&&l.push(buildTag("version",s)),u&&l.push(buildTag("datacenter",u)),l}var tv=/[^a-z0-9_:./-]/;function buildTag(n,r){var o=200-n.length-1;(r.length>o||tv.test(r))&&q.warn("".concat(n," value doesn't meet tag requirements and will be sanitized"));var s=r.replace(/,/g,"_");return"".concat(n,":").concat(s)}function computeTransportConfiguration(n){var r=buildTags(n),o=computeEndpointBuilders(n,r),s=objectValues(o).map(function(n){return n.urlPrefix});return polyfills_assign({isIntakeUrl:function(n){return s.some(function(r){return 0===n.indexOf(r)})},replica:computeReplicaConfiguration(n,s,r),site:n.site||tm},o)}function computeEndpointBuilders(n,r){return{logsEndpointBuilder:createEndpointBuilder(n,"logs",r),rumEndpointBuilder:createEndpointBuilder(n,"rum",r),sessionReplayEndpointBuilder:createEndpointBuilder(n,"replay",r)}}function computeReplicaConfiguration(n,r,o){if(n.replica){var s=polyfills_assign({},n,{site:tm,clientToken:n.replica.clientToken}),u={logsEndpointBuilder:createEndpointBuilder(s,"logs",o),rumEndpointBuilder:createEndpointBuilder(s,"rum",o)};return r.push.apply(r,objectValues(u).map(function(n){return n.urlPrefix})),polyfills_assign({applicationId:n.replica.applicationId},u)}}var th={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"};function validateAndBuildConfiguration(n){var r,o,s;if(!n||!n.clientToken){q.error("Client Token is not configured, we will not send any data.");return}if(void 0!==n.sessionSampleRate&&!isPercentage(n.sessionSampleRate)){q.error("Session Sample Rate should be a number between 0 and 100");return}if(void 0!==n.telemetrySampleRate&&!isPercentage(n.telemetrySampleRate)){q.error("Telemetry Sample Rate should be a number between 0 and 100");return}if(void 0!==n.telemetryConfigurationSampleRate&&!isPercentage(n.telemetryConfigurationSampleRate)){q.error("Telemetry Configuration Sample Rate should be a number between 0 and 100");return}return Array.isArray(n.enableExperimentalFeatures)&&addExperimentalFeatures(n.enableExperimentalFeatures.filter(function(n){return objectHasValue(S,n)})),polyfills_assign({beforeSend:n.beforeSend&&catchUserErrors(n.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:selectSessionStoreStrategyType(n),sessionSampleRate:null!==(r=n.sessionSampleRate)&&void 0!==r?r:100,telemetrySampleRate:null!==(o=n.telemetrySampleRate)&&void 0!==o?o:20,telemetryConfigurationSampleRate:null!==(s=n.telemetryConfigurationSampleRate)&&void 0!==s?s:5,service:n.service,silentMultipleInit:!!n.silentMultipleInit,allowUntrustedEvents:!!n.allowUntrustedEvents,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},computeTransportConfiguration(n))}function serializeConfiguration(n){return{session_sample_rate:n.sessionSampleRate,telemetry_sample_rate:n.telemetrySampleRate,telemetry_configuration_sample_rate:n.telemetryConfigurationSampleRate,use_before_send:!!n.beforeSend,use_cross_site_session_cookie:n.useCrossSiteSessionCookie,use_secure_session_cookie:n.useSecureSessionCookie,use_proxy:!!n.proxy,silent_multiple_init:n.silentMultipleInit,track_session_across_subdomains:n.trackSessionAcrossSubdomains,allow_fallback_to_local_storage:!!n.allowFallbackToLocalStorage,store_contexts_across_pages:!!n.storeContextsAcrossPages,allow_untrusted_events:!!n.allowUntrustedEvents}}function isMatchOption(n){var r=getType(n);return"string"===r||"function"===r||n instanceof RegExp}function matchList(n,r,o){return void 0===o&&(o=!1),n.some(function(n){try{if("function"==typeof n)return n(r);if(n instanceof RegExp)return n.test(r);if("string"==typeof n)return o?startsWith(r,n):n===r}catch(n){q.error(n)}return!1})}function isTracingOption(n){return"object"===getType(n)&&isMatchOption(n.match)&&Array.isArray(n.propagatorTypes)}function clearTracingIfNeeded(n){0!==n.status||n.isAborted||(n.traceId=void 0,n.spanId=void 0,n.traceSampled=void 0)}function startTracer(n,r){return{clearTracingIfNeeded:clearTracingIfNeeded,traceFetch:function(o){return injectHeadersIfTracingAllowed(n,o,r,function(n){var r;if(o.input instanceof Request&&!(null===(r=o.init)||void 0===r?void 0:r.headers))o.input=new Request(o.input),Object.keys(n).forEach(function(r){o.input.headers.append(r,n[r])});else{o.init=shallowClone(o.init);var s=[];o.init.headers instanceof Headers?o.init.headers.forEach(function(n,r){s.push([r,n])}):Array.isArray(o.init.headers)?o.init.headers.forEach(function(n){s.push(n)}):o.init.headers&&Object.keys(o.init.headers).forEach(function(n){s.push([n,o.init.headers[n]])}),o.init.headers=s.concat(objectEntries(n))}})},traceXhr:function(o,s){return injectHeadersIfTracingAllowed(n,o,r,function(n){Object.keys(n).forEach(function(r){s.setRequestHeader(r,n[r])})})}}}function injectHeadersIfTracingAllowed(n,r,o,s){if(isTracingSupported()&&o.findTrackedSession()){var u=find(n.allowedTracingUrls,function(n){return matchList([n.match],r.url,!0)});u&&(r.traceId=new tg,r.spanId=new tg,r.traceSampled=!isNumber(n.traceSampleRate)||performDraw(n.traceSampleRate),s(makeTracingHeaders(r.traceId,r.spanId,r.traceSampled,u.propagatorTypes)))}}function isTracingSupported(){return void 0!==getCrypto()}function getCrypto(){return window.crypto||window.msCrypto}function makeTracingHeaders(n,r,o,s){var u={};return s.forEach(function(s){switch(s){case"datadog":polyfills_assign(u,{"x-datadog-origin":"rum","x-datadog-parent-id":r.toDecimalString(),"x-datadog-sampling-priority":o?"1":"0","x-datadog-trace-id":n.toDecimalString()});break;case"tracecontext":polyfills_assign(u,{traceparent:"00-0000000000000000".concat(n.toPaddedHexadecimalString(),"-").concat(r.toPaddedHexadecimalString(),"-0").concat(o?"1":"0")});break;case"b3":polyfills_assign(u,{b3:"".concat(n.toPaddedHexadecimalString(),"-").concat(r.toPaddedHexadecimalString(),"-").concat(o?"1":"0")});break;case"b3multi":polyfills_assign(u,{"X-B3-TraceId":n.toPaddedHexadecimalString(),"X-B3-SpanId":r.toPaddedHexadecimalString(),"X-B3-Sampled":o?"1":"0"})}}),u}var tg=function(){function TraceIdentifier(){this.buffer=new Uint8Array(8),getCrypto().getRandomValues(this.buffer),this.buffer[0]=127&this.buffer[0]}return TraceIdentifier.prototype.toString=function(n){var r=this.readInt32(0),o=this.readInt32(4),s="";do{var u=r%n*4294967296+o;r=Math.floor(r/n),o=Math.floor(u/n),s=(u%n).toString(n)+s}while(r||o);return s},TraceIdentifier.prototype.toDecimalString=function(){return this.toString(10)},TraceIdentifier.prototype.toPaddedHexadecimalString=function(){var n=this.toString(16);return Array(17-n.length).join("0")+n},TraceIdentifier.prototype.readInt32=function(n){return 16777216*this.buffer[n]+(this.buffer[n+1]<<16)+(this.buffer[n+2]<<8)+this.buffer[n+3]},TraceIdentifier}(),ty=["tracecontext","datadog"];function validateAndBuildRumConfiguration(n){if(!n.applicationId){q.error("Application ID is not configured, no RUM data will be collected.");return}if(void 0!==n.sessionReplaySampleRate&&!isPercentage(n.sessionReplaySampleRate)){q.error("Session Replay Sample Rate should be a number between 0 and 100");return}if(void 0!==n.traceSampleRate&&!isPercentage(n.traceSampleRate)){q.error("Trace Sample Rate should be a number between 0 and 100");return}if(void 0!==n.excludedActivityUrls&&!Array.isArray(n.excludedActivityUrls)){q.error("Excluded Activity Urls should be an array");return}var r,o,s=validateAndBuildTracingOptions(n);if(s){var u=validateAndBuildConfiguration(n);if(u)return polyfills_assign({applicationId:n.applicationId,version:n.version,actionNameAttribute:n.actionNameAttribute,sessionReplaySampleRate:null!==(r=n.sessionReplaySampleRate)&&void 0!==r?r:0,startSessionReplayRecordingManually:!!n.startSessionReplayRecordingManually,traceSampleRate:n.traceSampleRate,allowedTracingUrls:s,excludedActivityUrls:null!==(o=n.excludedActivityUrls)&&void 0!==o?o:[],workerUrl:n.workerUrl,compressIntakeRequests:!!n.compressIntakeRequests,trackUserInteractions:!!n.trackUserInteractions,trackViewsManually:!!n.trackViewsManually,trackResources:!!n.trackResources,trackLongTasks:!!n.trackLongTasks,subdomain:n.subdomain,defaultPrivacyLevel:objectHasValue(th,n.defaultPrivacyLevel)?n.defaultPrivacyLevel:th.MASK,customerDataTelemetrySampleRate:1},u)}}function validateAndBuildTracingOptions(n){if(void 0!==n.allowedTracingUrls){if(!Array.isArray(n.allowedTracingUrls)){q.error("Allowed Tracing URLs should be an array");return}if(0!==n.allowedTracingUrls.length&&void 0===n.service){q.error("Service needs to be configured when tracing is enabled");return}var r=[];return n.allowedTracingUrls.forEach(function(n){isMatchOption(n)?r.push({match:n,propagatorTypes:ty}):isTracingOption(n)?r.push(n):q.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",n)}),r}return[]}function getSelectedTracingPropagators(n){var r=new Set;return Array.isArray(n.allowedTracingUrls)&&n.allowedTracingUrls.length>0&&n.allowedTracingUrls.forEach(function(n){isMatchOption(n)?ty.forEach(function(n){return r.add(n)}):"object"===getType(n)&&Array.isArray(n.propagatorTypes)&&n.propagatorTypes.forEach(function(n){return r.add(n)})}),arrayFrom(r)}function serializeRumConfiguration(n){var r=serializeConfiguration(n);return polyfills_assign({session_replay_sample_rate:n.sessionReplaySampleRate,start_session_replay_recording_manually:n.startSessionReplayRecordingManually,trace_sample_rate:n.traceSampleRate,action_name_attribute:n.actionNameAttribute,use_allowed_tracing_urls:Array.isArray(n.allowedTracingUrls)&&n.allowedTracingUrls.length>0,selected_tracing_propagators:getSelectedTracingPropagators(n),default_privacy_level:n.defaultPrivacyLevel,use_excluded_activity_urls:Array.isArray(n.excludedActivityUrls)&&n.excludedActivityUrls.length>0,use_worker_url:!!n.workerUrl,compress_intake_requests:n.compressIntakeRequests,track_views_manually:n.trackViewsManually,track_user_interactions:n.trackUserInteractions,track_resources:n.trackResources,track_long_task:n.trackLongTasks},r)}function buildCommonContext(n,r,o){return{context:n.getContext(),user:r.getContext(),hasReplay:!!o.isRecording()||void 0}}function makeRumPublicApi(n,r,o){var s,u=void 0===o?{}:o,l=u.ignoreInitIfSyntheticsWillInjectRum,d=void 0===l||l,f=u.startDeflateWorker,h=u.createDeflateEncoder,g=!1,y=createContextManager(2),b=createContextManager(1),getInternalContextStrategy=function(){},getInitConfigurationStrategy=function(){},S=noop,getSessionReplayLinkStrategy=function(){},_=new Y,addTimingStrategy=function(n,r){void 0===r&&(r=timeStampNow()),_.add(function(){return addTimingStrategy(n,r)})},startViewStrategy=function(n,r){void 0===r&&(r=clocksNow()),_.add(function(){return startViewStrategy(n,r)})},addActionStrategy=function(n,o){void 0===o&&(o=buildCommonContext(y,b,r)),_.add(function(){return addActionStrategy(n,o)})},addErrorStrategy=function(n,o){void 0===o&&(o=buildCommonContext(y,b,r)),_.add(function(){return addErrorStrategy(n,o)})},recorderStartStrategy=function(){_.add(function(){return recorderStartStrategy()})},recorderStopStrategy=function(){_.add(function(){return recorderStopStrategy()})},addFeatureFlagEvaluationStrategy=function(n,r){_.add(function(){return addFeatureFlagEvaluationStrategy(n,r)})};function initRum(n){if(!n){q.error("Missing configuration");return}if(getInitConfigurationStrategy=function(){return deepClone(n)},!(d&&willSyntheticsInjectRum())){var r=canUseEventBridge();if(r&&(n=overrideInitConfigurationForBridge(n)),canInitRum(n)){var o=validateAndBuildRumConfiguration(n);if(o){if(!r&&!o.sessionStoreStrategyType){q.warn("No storage available for session. We will not send any data.");return}if(!o.compressIntakeRequests||r||!f||(s=f(o,"Datadog RUM",noop))){if(o.trackViewsManually){var u=_;_=new Y,startViewStrategy=function(r){doStartRum(n,o,r)},u.drain()}else doStartRum(n,o);g=!0}}}}}function doStartRum(o,u,l){if(o.storeContextsAcrossPages){var d=y.getContext();(y=createStoredContextManager(u,"rum",2)).setContext(combine(y.getContext(),d));var f=b.getContext();(b=createStoredContextManager(u,"rum",1)).setContext(combine(b.getContext(),f))}var g=n(o,u,r,y,b,l,s&&h?function(n){return h(u,s,n)}:createIdentityEncoder);getSessionReplayLinkStrategy=function(){return r.getSessionReplayLink(u,g.session,g.viewContexts)},recorderStartStrategy=r.start,recorderStopStrategy=r.stop,startViewStrategy=g.startView,addActionStrategy=g.addAction,addErrorStrategy=g.addError,addTimingStrategy=g.addTiming,addFeatureFlagEvaluationStrategy=g.addFeatureFlagEvaluation,getInternalContextStrategy=g.getInternalContext,S=g.stopSession,r.onRumStart(g.lifeCycle,u,g.session,g.viewContexts,s),_.drain()}var w=monitor(function(n){startViewStrategy("object"==typeof n?n:{name:n})});return makePublicApi({init:monitor(initRum),setGlobalContextProperty:monitor(function(n,r){return y.setContextProperty(n,r)}),removeGlobalContextProperty:monitor(function(n){return y.removeContextProperty(n)}),getGlobalContext:monitor(function(){return y.getContext()}),setGlobalContext:monitor(function(n){return y.setContext(n)}),clearGlobalContext:monitor(function(){return y.clearContext()}),getInternalContext:monitor(function(n){return getInternalContextStrategy(n)}),getInitConfiguration:monitor(function(){return getInitConfigurationStrategy()}),addAction:monitor(function(n,r){addActionStrategy({name:sanitize(n),context:sanitize(r),startClocks:clocksNow(),type:"custom"})}),addError:function(n,r){var o=createHandlingStack();callMonitored(function(){addErrorStrategy({error:n,handlingStack:o,context:sanitize(r),startClocks:clocksNow()})})},addTiming:monitor(function(n,r){addTimingStrategy(sanitize(n),r)}),setUser:monitor(function(n){checkUser(n)&&b.setContext(sanitizeUser(n))}),getUser:monitor(function(){return b.getContext()}),setUserProperty:monitor(function(n,r){var o,s=sanitizeUser(((o={})[n]=r,o))[n];b.setContextProperty(n,s)}),removeUserProperty:monitor(function(n){return b.removeContextProperty(n)}),clearUser:monitor(function(){return b.clearContext()}),startView:w,stopSession:monitor(function(){S()}),startSessionReplayRecording:monitor(function(){return recorderStartStrategy()}),stopSessionReplayRecording:monitor(function(){return recorderStopStrategy()}),addFeatureFlagEvaluation:monitor(function(n,r){addFeatureFlagEvaluationStrategy(sanitize(n),sanitize(r))}),getSessionReplayLink:monitor(function(){return getSessionReplayLinkStrategy()})});function canInitRum(n){return!g||(n.silentMultipleInit||q.error("DD_RUM is already initialized."),!1)}function overrideInitConfigurationForBridge(n){return polyfills_assign({},n,{applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100})}}function sendToExtension(n,r){var o=window.__ddBrowserSdkExtensionCallback;o&&o({type:n,payload:r})}var tb={log:"log",configuration:"configuration"},tS=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],t_=["ddog-gov.com"],tw={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1};function startTelemetry(n,r){var o,s=new Z;tw.telemetryEnabled=!includes(t_,r.site)&&performDraw(r.telemetrySampleRate),tw.telemetryConfigurationEnabled=tw.telemetryEnabled&&performDraw(r.telemetryConfigurationSampleRate);var u=getRuntimeEnvInfo();function toTelemetryEvent(n,r,s){return combine({type:"telemetry",date:timeStampNow(),service:n,version:"5.4.0",source:"browser",_dd:{format_version:2},telemetry:combine(r,{runtime_env:s}),experimental_features:arrayFrom(getExperimentalFeatures())},void 0!==o?o():{})}return E=function(r){if(tw.telemetryEnabled){var o=toTelemetryEvent(n,r,u);s.notify(o),sendToExtension("telemetry",o)}},startMonitorErrorCollection(addTelemetryError),polyfills_assign(tw,{maxEventsPerPage:r.maxTelemetryEventsPerPage,sentEventCount:0}),{setContextProvider:function(n){o=n},observable:s,enabled:tw.telemetryEnabled}}function getRuntimeEnvInfo(){return{is_local_file:"file:"===window.location.protocol,is_worker:"WorkerGlobalScope"in self}}function isTelemetryReplicationAllowed(n){return n.site===tp}function addTelemetryDebug(n,r){displayIfDebugEnabled(B.debug,n,r),addTelemetry(polyfills_assign({type:tb.log,message:n,status:"debug"},r))}function addTelemetryError(n,r){addTelemetry(polyfills_assign({type:tb.log,status:"error"},formatError(n),r))}function addTelemetryConfiguration(n){tw.telemetryConfigurationEnabled&&addTelemetry({type:tb.configuration,configuration:n})}function addTelemetry(n){E&&tw.sentEventCount<tw.maxEventsPerPage&&(tw.sentEventCount+=1,E(n))}function formatError(n){if(n instanceof Error){var r=computeStackTrace(n);return{error:{kind:r.name,stack:toStackTraceString(scrubCustomerFrames(r))},message:r.message}}return{error:{stack:ts},message:"".concat("Uncaught"," ").concat(jsonStringify(n))}}function scrubCustomerFrames(n){return n.stack=n.stack.filter(function(n){return!n.url||tS.some(function(r){return startsWith(n.url,r)})}),n}var tC={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function createPageExitObservable(n){var r=new Z(function(){var o=isExperimentalFeatureEnabled(S.PAGEHIDE),s=addEventListeners(n,window,[b.VISIBILITY_CHANGE,b.FREEZE,b.PAGE_HIDE],function(n){n.type===b.PAGE_HIDE&&o?r.notify({reason:tC.PAGEHIDE}):n.type===b.VISIBILITY_CHANGE&&"hidden"===document.visibilityState?r.notify({reason:tC.HIDDEN}):n.type===b.FREEZE&&r.notify({reason:tC.FROZEN})},{capture:!0}).stop,u=noop;return o||(u=addEventListener(n,window,b.BEFORE_UNLOAD,function(){r.notify({reason:tC.UNLOADING})}).stop),function(){s(),u()}});return r}function createDOMMutationObservable(){var n=getMutationObserverConstructor(),r=new Z(function(){if(n){var o=new n(monitor(function(){return r.notify()}));return o.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),function(){return o.disconnect()}}});return r}function getMutationObserverConstructor(){var n,r=window;if(r.Zone&&(n=getZoneJsOriginalValue(r,"MutationObserver"),r.MutationObserver&&n===r.MutationObserver)){var o=getZoneJsOriginalValue(new r.MutationObserver(noop),"originalInstance");n=o&&o.constructor}return n||(n=r.MutationObserver),n}function runOnReadyState(n,r,o){if(document.readyState===r||"complete"===document.readyState)o();else{var s="complete"===r?b.LOAD:b.DOM_CONTENT_LOADED;addEventListener(n,window,s,o,{once:!0})}}var tE="initial_document",tT=[["document",function(n){return tE===n}],["xhr",function(n){return"xmlhttprequest"===n}],["fetch",function(n){return"fetch"===n}],["beacon",function(n){return"beacon"===n}],["css",function(n,r){return/\.css$/i.test(r)}],["js",function(n,r){return/\.js$/i.test(r)}],["image",function(n,r){return includes(["image","img","icon"],n)||null!==/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(r)}],["font",function(n,r){return null!==/\.(woff|eot|woff2|ttf)$/i.exec(r)}],["media",function(n,r){return includes(["audio","video"],n)||null!==/\.(mp3|mp4)$/i.exec(r)}]];function computeResourceKind(n){var r=n.name;if(!isValidUrl(r))return addTelemetryDebug('Failed to construct URL for "'.concat(n.name,'"')),"other";for(var o=getPathName(r),s=0;s<tT.length;s++){var u=tT[s],l=u[0];if((0,u[1])(n.initiatorType,o))return l}return"other"}function areInOrder(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var o=1;o<n.length;o+=1)if(n[o-1]>n[o])return!1;return!0}function isRequestKind(n){return"xmlhttprequest"===n.initiatorType||"fetch"===n.initiatorType}function computePerformanceResourceDuration(n){var r=n.duration,o=n.startTime,s=n.responseEnd;return 0===r&&o<s?toServerDuration(s-o):toServerDuration(r)}function computePerformanceResourceDetails(n){var r=toValidEntry(n);if(r){var o=r.startTime,s=r.fetchStart,u=r.redirectStart,l=r.redirectEnd,d=r.domainLookupStart,f=r.domainLookupEnd,h=r.connectStart,g=r.secureConnectionStart,y=r.connectEnd,b=r.requestStart,S=r.responseStart,_={download:formatTiming(o,S,r.responseEnd),first_byte:formatTiming(o,b,S)};return y!==s&&(_.connect=formatTiming(o,h,y),areInOrder(h,g,y)&&(_.ssl=formatTiming(o,g,y))),f!==s&&(_.dns=formatTiming(o,d,f)),hasRedirection(n)&&(_.redirect=formatTiming(o,u,l)),_}}function toValidEntry(n){if(areInOrder(n.startTime,n.fetchStart,n.domainLookupStart,n.domainLookupEnd,n.connectStart,n.connectEnd,n.requestStart,n.responseStart,n.responseEnd)){if(!hasRedirection(n))return n;var r=n.redirectStart,o=n.redirectEnd;if(r<n.startTime&&(r=n.startTime),o<n.startTime&&(o=n.fetchStart),areInOrder(n.startTime,r,o,n.fetchStart))return polyfills_assign({},n,{redirectEnd:o,redirectStart:r})}}function hasRedirection(n){return n.fetchStart!==n.startTime}function formatTiming(n,r,o){return{duration:toServerDuration(o-r),start:toServerDuration(r-n)}}function computeSize(n){if(n.startTime<n.responseStart)return n.decodedBodySize}function isAllowedRequestUrl(n,r){return r&&!n.isIntakeUrl(r)}function isTextNode(n){return n.nodeType===Node.TEXT_NODE}function isCommentNode(n){return n.nodeType===Node.COMMENT_NODE}function isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}function isNodeShadowHost(n){return isElementNode(n)&&!!n.shadowRoot}function isNodeShadowRoot(n){return!!n.host&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&isElementNode(n.host)}function hasChildNodes(n){return n.childNodes.length>0||isNodeShadowHost(n)}function forEachChildNodes(n,r){n.childNodes.forEach(r),isNodeShadowHost(n)&&r(n.shadowRoot)}function getParentNode(n){return isNodeShadowRoot(n)?n.host:n.parentNode}function getDocumentTraceId(n){var r=getDocumentTraceDataFromMeta(n)||getDocumentTraceDataFromComment(n);if(!(!r||r.traceTime<=dateNow()-12e4))return r.traceId}function getDocumentTraceDataFromMeta(n){var r=n.querySelector("meta[name=dd-trace-id]"),o=n.querySelector("meta[name=dd-trace-time]");return createDocumentTraceData(r&&r.content,o&&o.content)}function getDocumentTraceDataFromComment(n){var r=findTraceComment(n);if(r)return createDocumentTraceData(findCommaSeparatedValue(r,"trace-id"),findCommaSeparatedValue(r,"trace-time"))}function createDocumentTraceData(n,r){var o=r&&Number(r);if(n&&o)return{traceId:n,traceTime:o}}function findTraceComment(n){for(var r=0;r<n.childNodes.length;r+=1){var o=getTraceCommentFromNode(n.childNodes[r]);if(o)return o}if(n.body)for(var r=n.body.childNodes.length-1;r>=0;r-=1){var s=n.body.childNodes[r],o=getTraceCommentFromNode(s);if(o)return o;if(!isTextNode(s))break}}function getTraceCommentFromNode(n){if(n&&isCommentNode(n)){var r=/^\s*DATADOG;(.*?)\s*$/.exec(n.data);if(r)return r[1]}}function supportPerformanceObject(){return void 0!==window.performance&&"getEntries"in performance}function supportPerformanceTimingEvent(n){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes(n)}function startPerformanceCollection(n,r){if(retrieveInitialDocumentResourceTiming(r,function(o){handleRumPerformanceEntries(n,r,[o])}),supportPerformanceObject()){var o=performance.getEntries();timer_setTimeout(function(){return handleRumPerformanceEntries(n,r,o)})}if(window.PerformanceObserver){var s=monitor(function(o){return handleRumPerformanceEntries(n,r,o.getEntries())}),u=[k.RESOURCE,k.NAVIGATION,k.LONG_TASK,k.PAINT],l=[k.LARGEST_CONTENTFUL_PAINT,k.FIRST_INPUT,k.LAYOUT_SHIFT,k.EVENT];try{l.forEach(function(n){new window.PerformanceObserver(s).observe({type:n,buffered:!0,durationThreshold:40})})}catch(n){u.push.apply(u,l)}new PerformanceObserver(s).observe({entryTypes:u}),supportPerformanceObject()&&"addEventListener"in performance&&addEventListener(r,performance,"resourcetimingbufferfull",function(){performance.clearResourceTimings()})}supportPerformanceTimingEvent(k.NAVIGATION)||retrieveNavigationTiming(r,function(o){handleRumPerformanceEntries(n,r,[o])}),supportPerformanceTimingEvent(k.FIRST_INPUT)||retrieveFirstInputTiming(r,function(o){handleRumPerformanceEntries(n,r,[o])})}function retrieveInitialDocumentResourceTiming(n,r){runOnReadyState(n,"interactive",function(){var n,o={entryType:k.RESOURCE,initiatorType:tE,traceId:getDocumentTraceId(document),toJSON:function(){return polyfills_assign({},n,{toJSON:void 0})}};if(supportPerformanceTimingEvent(k.NAVIGATION)&&performance.getEntriesByType(k.NAVIGATION).length>0)n=polyfills_assign(performance.getEntriesByType(k.NAVIGATION)[0].toJSON(),o);else{var s=computeRelativePerformanceTiming();n=polyfills_assign(s,{decodedBodySize:0,duration:s.responseEnd,name:window.location.href,startTime:0},o)}r(n)})}function retrieveNavigationTiming(n,r){function sendFakeTiming(){r(polyfills_assign(computeRelativePerformanceTiming(),{entryType:k.NAVIGATION}))}runOnReadyState(n,"complete",function(){timer_setTimeout(sendFakeTiming)})}function retrieveFirstInputTiming(n,r){var o=dateNow(),s=!1,u=addEventListeners(n,window,[b.CLICK,b.MOUSE_DOWN,b.KEY_DOWN,b.TOUCH_START,b.POINTER_DOWN],function(r){if(r.cancelable){var o={entryType:k.FIRST_INPUT,processingStart:relativeNow(),processingEnd:relativeNow(),startTime:r.timeStamp,duration:0,name:""};r.type===b.POINTER_DOWN?sendTimingIfPointerIsNotCancelled(n,o):sendTiming(o)}},{passive:!0,capture:!0}).stop;function sendTimingIfPointerIsNotCancelled(n,r){addEventListeners(n,window,[b.POINTER_UP,b.POINTER_CANCEL],function(n){n.type===b.POINTER_UP&&sendTiming(r)},{once:!0})}function sendTiming(n){if(!s){s=!0,u();var l=n.processingStart-n.startTime;l>=0&&l<dateNow()-o&&r(n)}}}function computeRelativePerformanceTiming(){var n={},r=performance.timing;for(var o in r)if(isNumber(r[o])){var s=r[o];n[o]=0===s?0:s-getNavigationStart()}return n}function handleRumPerformanceEntries(n,r,o){var s=o.filter(function(n){return objectHasValue(k,n.entryType)}).filter(function(n){return!isIncompleteNavigation(n)&&!isForbiddenResource(r,n)});s.length&&n.notify(0,s)}function isIncompleteNavigation(n){return n.entryType===k.NAVIGATION&&n.loadEventEnd<=0}function isForbiddenResource(n,r){return r.entryType===k.RESOURCE&&!isAllowedRequestUrl(n,r.name)}(l=k||(k={})).EVENT="event",l.FIRST_INPUT="first-input",l.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",l.LAYOUT_SHIFT="layout-shift",l.LONG_TASK="longtask",l.NAVIGATION="navigation",l.PAINT="paint",l.RESOURCE="resource";var tk={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",SOURCE:"source",REPORT:"report"};function createEventRateLimiter(n,r,o){var s=0,u=!1;return{isLimitReached:function(){if(0===s&&timer_setTimeout(function(){s=0},6e4),(s+=1)<=r||u)return u=!1,!1;if(s===r+1){u=!0;try{o({message:"Reached max number of ".concat(n,"s by minute: ").concat(r),source:tk.AGENT,startClocks:clocksNow()})}finally{u=!1}}return!0}}}function getSyntheticsContext(){var n=getSyntheticsTestId(),r=getSyntheticsResultId();if(n&&r)return{test_id:n,result_id:r,injected:willSyntheticsInjectRum()}}function getCiTestContext(){var n,r=null===(n=window.Cypress)||void 0===n?void 0:n.env("traceId");if("string"==typeof r)return{test_execution_id:r}}function limitModification(n,r,o){var s=deepClone(n),u=o(s);return objectEntries(r).forEach(function(r){var o=r[0],u=r[1],l=get(s,o),d=getType(l);d===u?set(n,o,sanitize(l)):"object"===u&&("undefined"===d||"null"===d)&&set(n,o,{})}),u}function get(n,r){for(var o=n,s=0,u=r.split(".");s<u.length;s++){var l=u[s];if(!isValidObjectContaining(o,l))return;o=o[l]}return o}function set(n,r,o){for(var s=n,u=r.split("."),l=0;l<u.length;l+=1){var d=u[l];if(!isValidObject(s))return;l!==u.length-1?s=s[d]:s[d]=o}}function isValidObject(n){return"object"===getType(n)}function isValidObjectContaining(n,r){return isValidObject(n)&&Object.prototype.hasOwnProperty.call(n,r)}var tR={"view.name":"string","view.url":"string","view.referrer":"string"},tA={context:"object"};function startRumAssembly(n,r,o,s,u,l,d,f,h){(g={}).view=tR,g.error=polyfills_assign({"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string"},tA,tR),g.resource=polyfills_assign({"resource.url":"string"},tA,tR),g.action=polyfills_assign({"action.target.name":"string"},tA,tR),g.long_task=polyfills_assign({},tA,tR),R=g;var g,y,b=((y={}).error=createEventRateLimiter("error",n.eventRateLimiterThreshold,h),y.action=createEventRateLimiter("action",n.eventRateLimiterThreshold,h),y),S=getSyntheticsContext(),_=getCiTestContext();r.subscribe(10,function(h){var g=h.startTime,y=h.rawRumEvent,w=h.domainContext,C=h.savedCommonContext,E=h.customerContext,k=s.findView(g),R=u.findUrl(g),A=o.findTrackedSession(g);if(A&&k&&R){var I=C||f(),N=l.findActionId(g),x=combine({_dd:{format_version:2,drift:currentDrift(),configuration:{session_sample_rate:round(n.sessionSampleRate,3),session_replay_sample_rate:round(n.sessionReplaySampleRate,3)},browser_sdk_version:canUseEventBridge()?"5.4.0":void 0},application:{id:n.applicationId},date:timeStampNow(),service:k.service||n.service,version:k.version||n.version,source:"browser",session:{id:A.id,type:S?"synthetics":_?"ci_test":"user"},view:{id:k.id,name:k.name,url:R.url,referrer:R.referrer},action:needToAssembleWithAction(y)&&N?{id:N}:void 0,synthetics:S,ci_test:_,display:d.get()},y);x.context=combine(I.context,E),"has_replay"in x.session||(x.session.has_replay=I.hasReplay),"view"===x.type&&(x.session.sampled_for_replay=A.sessionReplayAllowed),isEmptyObject(I.user)||(x.usr=I.user),shouldSend(x,n.beforeSend,w,b)&&(isEmptyObject(x.context)&&delete x.context,r.notify(11,x))}})}function shouldSend(n,r,o,s){if(r){var u,l=limitModification(n,R[n.type],function(n){return r(n,o)});if(!1===l&&"view"!==n.type)return!1;!1===l&&q.warn("Can't dismiss view events using beforeSend!")}return!(null===(u=s[n.type])||void 0===u?void 0:u.isLimitReached())}function needToAssembleWithAction(n){return -1!==["error","resource","long_task"].indexOf(n.type)}function startInternalContext(n,r,o,s,u){return{get:function(l){var d=o.findView(l),f=u.findUrl(l),h=r.findTrackedSession(l);if(h&&d&&f){var g=s.findActionId(l);return{application_id:n,session_id:h.id,user_action:g?{id:g}:void 0,view:{id:d.id,name:d.name,referrer:f.referrer,url:f.url}}}}}}var tI=function(){function AbstractLifeCycle(){this.callbacks={}}return AbstractLifeCycle.prototype.notify=function(n,r){var o=this.callbacks[n];o&&o.forEach(function(n){return n(r)})},AbstractLifeCycle.prototype.subscribe=function(n,r){var o=this;return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(r),{unsubscribe:function(){o.callbacks[n]=o.callbacks[n].filter(function(n){return r!==n})}}},AbstractLifeCycle}(),tN=1/0,tx=function(){function ValueHistory(n,r){var o=this;this.expireDelay=n,this.maxEntries=r,this.entries=[],this.clearOldValuesInterval=timer_setInterval(function(){return o.clearOldValues()},6e4)}return ValueHistory.prototype.add=function(n,r){var o=this,s={value:n,startTime:r,endTime:tN,remove:function(){var n=o.entries.indexOf(s);n>=0&&o.entries.splice(n,1)},close:function(n){s.endTime=n}};return this.maxEntries&&this.entries.length>=this.maxEntries&&this.entries.pop(),this.entries.unshift(s),s},ValueHistory.prototype.find=function(n){void 0===n&&(n=tN);for(var r=0,o=this.entries;r<o.length;r++){var s=o[r];if(s.startTime<=n){if(n<=s.endTime)return s.value;break}}},ValueHistory.prototype.closeActive=function(n){var r=this.entries[0];r&&r.endTime===tN&&r.close(n)},ValueHistory.prototype.findAll=function(n,r){void 0===n&&(n=tN),void 0===r&&(r=0);var o=n+r;return this.entries.filter(function(r){return r.startTime<=o&&n<=r.endTime}).map(function(n){return n.value})},ValueHistory.prototype.reset=function(){this.entries=[]},ValueHistory.prototype.stop=function(){timer_clearInterval(this.clearOldValuesInterval)},ValueHistory.prototype.clearOldValues=function(){for(var n=relativeNow()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<n;)this.entries.pop()},ValueHistory}();function startViewContexts(n){var r=new tx(144e5);function buildViewContext(n){return{service:n.service,version:n.version,id:n.id,name:n.name,startClocks:n.startClocks}}return n.subscribe(2,function(n){r.add(buildViewContext(n),n.startClocks.relative)}),n.subscribe(4,function(n){var o=n.endClocks;r.closeActive(o.relative)}),n.subscribe(8,function(){r.reset()}),{findView:function(n){return r.find(n)},stop:function(){r.stop()}}}function instrumentMethod(n,r,o){var s=n[r],u=o(s),instrumentationWrapper=function(){if("function"==typeof u)return u.apply(this,arguments)};return n[r]=instrumentationWrapper,{stop:function(){n[r]===instrumentationWrapper?n[r]=s:u=s}}}function instrumentMethodAndCallOriginal(n,r,o){var s=o.before,u=o.after;return instrumentMethod(n,r,function(n){return function(){var r,o=arguments;return s&&callMonitored(s,this,o),"function"==typeof n&&(r=n.apply(this,o)),u&&callMonitored(u,this,o),r}})}function instrumentSetter(n,r,o){var s=Object.getOwnPropertyDescriptor(n,r);if(!s||!s.set||!s.configurable)return{stop:noop};var instrumentation=function(n,r){timer_setTimeout(function(){o(n,r)},0)},instrumentationWrapper=function(n){s.set.call(this,n),instrumentation(this,n)};return Object.defineProperty(n,r,{set:instrumentationWrapper}),{stop:function(){var o;(null===(o=Object.getOwnPropertyDescriptor(n,r))||void 0===o?void 0:o.set)===instrumentationWrapper?Object.defineProperty(n,r,s):instrumentation=noop}}}var tO=new WeakMap;function initXhrObservable(n){return A||(A=createXhrObservable(n)),A}function createXhrObservable(n){var r=new Z(function(){var o=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"open",{before:openXhr}).stop,s=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"send",{before:function(){sendXhr.call(this,n,r)}}).stop,u=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"abort",{before:abortXhr}).stop;return function(){o(),s(),u()}});return r}function openXhr(n,r){tO.set(this,{state:"open",method:n.toUpperCase(),url:normalizeUrl(String(r))})}function sendXhr(n,r){var o=this,s=tO.get(this);if(s){s.state="start",s.startClocks=clocksNow(),s.isAborted=!1,s.xhr=this;var u=!1,l=instrumentMethodAndCallOriginal(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&onEnd()}}).stop,onEnd=function(){var n;d(),l(),u||(u=!0,s.state="complete",s.duration=(n=s.startClocks.timeStamp,timeStampNow()-n),s.status=o.status,r.notify(shallowClone(s)))},d=addEventListener(n,this,"loadend",onEnd).stop;r.notify(s)}}function abortXhr(){var n=tO.get(this);n&&(n.isAborted=!0)}function initFetchObservable(){return I||(I=createFetchObservable()),I}function createFetchObservable(){var n=new Z(function(){if(window.fetch)return instrumentMethod(window,"fetch",function(r){return function(o,s){var u,l=callMonitored(beforeSend,null,[n,o,s]);return l?callMonitored(afterSend,null,[n,u=r.call(this,l.input,l.init),l]):u=r.call(this,o,s),u}}).stop});return n}function beforeSend(n,r,o){var s=o&&o.method||r instanceof Request&&r.method,u=s?s.toUpperCase():"GET",l=r instanceof Request?r.url:normalizeUrl(String(r)),d={state:"start",init:o,input:r,method:u,startClocks:clocksNow(),url:l};return n.notify(d),d}function afterSend(n,r,o){var reportFetch=function(r){o.state="resolve","stack"in r||r instanceof Error?(o.status=0,o.isAborted=r instanceof DOMException&&r.code===DOMException.ABORT_ERR,o.error=r):"status"in r&&(o.response=r,o.responseType=r.type,o.status=r.status,o.isAborted=!1),n.notify(o)};r.then(monitor(reportFetch),monitor(reportFetch))}function isServerError(n){return n>=500}function tryToClone(n){try{return n.clone()}catch(n){return}}function readBytesFromStream(n,r,o){var s=n.getReader(),u=[],l=0;function readMore(){s.read().then(monitor(function(n){if(n.done){onDone();return}o.collectStreamBody&&u.push(n.value),(l+=n.value.length)>o.bytesLimit?onDone():readMore()}),monitor(function(n){return r(n)}))}function onDone(){if(s.cancel().catch(noop),o.collectStreamBody){if(1===u.length)f=u[0];else{f=new Uint8Array(l);var n,d,f,h=0;u.forEach(function(n){f.set(n,h),h+=n.length})}n=f.slice(0,o.bytesLimit),d=f.length>o.bytesLimit}r(void 0,n,d)}readMore()}var tL=1;function startRequestCollection(n,r,o){var s=startTracer(r,o);trackXhr(n,r,s),trackFetch(n,r,s)}function trackXhr(n,r,o){var s=initXhrObservable(r).subscribe(function(s){if(isAllowedRequestUrl(r,s.url))switch(s.state){case"start":o.traceXhr(s,s.xhr),s.requestIndex=getNextRequestIndex(),n.notify(5,{requestIndex:s.requestIndex,url:s.url});break;case"complete":o.clearTracingIfNeeded(s),n.notify(6,{duration:s.duration,method:s.method,requestIndex:s.requestIndex,spanId:s.spanId,startClocks:s.startClocks,status:s.status,traceId:s.traceId,traceSampled:s.traceSampled,type:"xhr",url:s.url,xhr:s.xhr})}});return{stop:function(){return s.unsubscribe()}}}function trackFetch(n,r,o){var s=initFetchObservable().subscribe(function(s){if(isAllowedRequestUrl(r,s.url))switch(s.state){case"start":o.traceFetch(s),s.requestIndex=getNextRequestIndex(),n.notify(5,{requestIndex:s.requestIndex,url:s.url});break;case"resolve":waitForResponseToComplete(s,function(r){o.clearTracingIfNeeded(s),n.notify(6,{duration:r,method:s.method,requestIndex:s.requestIndex,responseType:s.responseType,spanId:s.spanId,startClocks:s.startClocks,status:s.status,traceId:s.traceId,traceSampled:s.traceSampled,type:"fetch",url:s.url,response:s.response,init:s.init,input:s.input})})}});return{stop:function(){return s.unsubscribe()}}}function getNextRequestIndex(){var n=tL;return tL+=1,n}function waitForResponseToComplete(n,r){var o,s=n.response&&tryToClone(n.response);s&&s.body?readBytesFromStream(s.body,function(){var o;r((o=n.startClocks.timeStamp,timeStampNow()-o))},{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1}):r((o=n.startClocks.timeStamp,timeStampNow()-o))}function trackEventCounts(n){var r=n.lifeCycle,o=n.isChildEvent,s=n.onChange,u=void 0===s?noop:s,l={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},d=r.subscribe(11,function(n){var r;if("view"!==n.type&&o(n))switch(n.type){case"error":l.errorCount+=1,u();break;case"action":l.actionCount+=1,n.action.frustration&&(l.frustrationCount+=n.action.frustration.type.length),u();break;case"long_task":l.longTaskCount+=1,u();break;case"resource":(null===(r=n._dd)||void 0===r?void 0:r.discarded)||(l.resourceCount+=1,u())}});return{stop:function(){d.unsubscribe()},eventCounts:l}}function doWaitPageActivityEnd(n,r,o){var s,u=!1,l=timer_setTimeout(monitor(function(){return complete({hadActivity:!1})}),100),d=void 0!==o?timer_setTimeout(monitor(function(){return complete({hadActivity:!0,end:timeStampNow()})}),o):void 0,f=n.subscribe(function(n){var r=n.isBusy;timer_clearTimeout(l),timer_clearTimeout(s);var o=timeStampNow();r||(s=timer_setTimeout(monitor(function(){return complete({hadActivity:!0,end:o})}),100))}),stop=function(){u=!0,timer_clearTimeout(l),timer_clearTimeout(s),timer_clearTimeout(d),f.unsubscribe()};function complete(n){u||(stop(),r(n))}return{stop:stop}}function createPageActivityObservable(n,r,o){var s=new Z(function(){var u,l=[],d=0;l.push(r.subscribe(notifyPageActivity),n.subscribe(0,function(n){n.some(function(n){return n.entryType===k.RESOURCE&&!isExcludedUrl(o,n.name)})&&notifyPageActivity()}),n.subscribe(5,function(n){isExcludedUrl(o,n.url)||(void 0===u&&(u=n.requestIndex),d+=1,notifyPageActivity())}),n.subscribe(6,function(n){isExcludedUrl(o,n.url)||void 0===u||n.requestIndex<u||(d-=1,notifyPageActivity())}));var f=trackWindowOpen(notifyPageActivity).stop;return function(){f(),l.forEach(function(n){return n.unsubscribe()})};function notifyPageActivity(){s.notify({isBusy:d>0})}});return s}function isExcludedUrl(n,r){return matchList(n.excludedActivityUrls,r)}function trackWindowOpen(n){return instrumentMethodAndCallOriginal(window,"open",{before:n})}var tM="data-dd-action-name";function getActionNameFromElement(n,r){return getActionNameFromElementProgrammatically(n,tM)||r&&getActionNameFromElementProgrammatically(n,r)||getActionNameFromElementForStrategies(n,r,tP)||getActionNameFromElementForStrategies(n,r,tD)||""}function getActionNameFromElementProgrammatically(n,r){if(supportsElementClosest())o=n.closest("[".concat(r,"]"));else for(var o,s=n;s;){if(s.hasAttribute(r)){o=s;break}s=s.parentElement}if(o)return truncate(normalizeWhitespace(o.getAttribute(r).trim()))}var tP=[function(n,r){if(supportsLabelProperty()){if("labels"in n&&n.labels&&n.labels.length>0)return getTextualContent(n.labels[0],r)}else if(n.id){var o=n.ownerDocument&&find(n.ownerDocument.querySelectorAll("label"),function(r){return r.htmlFor===n.id});return o&&getTextualContent(o,r)}},function(n){if("INPUT"===n.nodeName){var r=n.getAttribute("type");if("button"===r||"submit"===r||"reset"===r)return n.value}},function(n,r){if("BUTTON"===n.nodeName||"LABEL"===n.nodeName||"button"===n.getAttribute("role"))return getTextualContent(n,r)},function(n){return n.getAttribute("aria-label")},function(n,r){var o=n.getAttribute("aria-labelledby");if(o)return o.split(/\s+/).map(function(r){return getElementById(n,r)}).filter(function(n){return!!n}).map(function(n){return getTextualContent(n,r)}).join(" ")},function(n){return n.getAttribute("alt")},function(n){return n.getAttribute("name")},function(n){return n.getAttribute("title")},function(n){return n.getAttribute("placeholder")},function(n,r){if("options"in n&&n.options.length>0)return getTextualContent(n.options[0],r)}],tD=[function(n,r){return getTextualContent(n,r)}];function getActionNameFromElementForStrategies(n,r,o){for(var s=n,u=0;u<=10&&s&&"BODY"!==s.nodeName&&"HTML"!==s.nodeName&&"HEAD"!==s.nodeName;){for(var l=0;l<o.length;l++){var d=(0,o[l])(s,r);if("string"==typeof d){var f=d.trim();if(f)return truncate(normalizeWhitespace(f))}}if("FORM"===s.nodeName)break;s=s.parentElement,u+=1}}function normalizeWhitespace(n){return n.replace(/\s+/g," ")}function truncate(n){return n.length>100?"".concat(safeTruncate(n,100)," [...]"):n}function getElementById(n,r){return n.ownerDocument?n.ownerDocument.getElementById(r):null}function getTextualContent(n,r){if(!n.isContentEditable){if("innerText"in n){var o=n.innerText,removeTextFromElements=function(r){for(var s=n.querySelectorAll(r),u=0;u<s.length;u+=1){var l=s[u];if("innerText"in l){var d=l.innerText;d&&d.trim().length>0&&(o=o.replace(d,""))}}};return supportsInnerTextScriptAndStyleRemoval()||removeTextFromElements("script, style"),removeTextFromElements("[".concat(tM,"]")),r&&removeTextFromElements("[".concat(r,"]")),o}return n.textContent}}function supportsInnerTextScriptAndStyleRemoval(){return!isIE()}function supportsLabelProperty(){return void 0===N&&(N="labels"in HTMLInputElement.prototype),N}function supportsElementClosest(){return void 0===x&&(x="closest"in HTMLElement.prototype),x}var tU=[tM,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],tF=[getStableAttributeSelector,getIDSelector],tz=[getStableAttributeSelector,getClassSelector,getTagNameSelector];function getSelectorFromElement(n,r){for(var o="",s=n;s&&"HTML"!==s.nodeName;){var u=findSelector(s,tF,isSelectorUniqueGlobally,r,o);if(u)return u;o=findSelector(s,tz,isSelectorUniqueAmongSiblings,r,o)||combineSelector(getPositionSelector(s),o),s=s.parentElement}return o}function isGeneratedValue(n){return/[0-9]/.test(n)}function getIDSelector(n){if(n.id&&!isGeneratedValue(n.id))return"#".concat(cssEscape(n.id))}function getClassSelector(n){if("BODY"!==n.tagName&&n.classList.length>0)for(var r=0;r<n.classList.length;r+=1){var o=n.classList[r];if(!isGeneratedValue(o))return"".concat(cssEscape(n.tagName),".").concat(cssEscape(o))}}function getTagNameSelector(n){return cssEscape(n.tagName)}function getStableAttributeSelector(n,r){if(r){var o=getAttributeSelector(r);if(o)return o}for(var s=0;s<tU.length;s++){var o=getAttributeSelector(tU[s]);if(o)return o}function getAttributeSelector(r){if(n.hasAttribute(r))return"".concat(cssEscape(n.tagName),"[").concat(r,'="').concat(cssEscape(n.getAttribute(r)),'"]')}}function getPositionSelector(n){for(var r=n.parentElement.firstElementChild,o=1;r&&r!==n;)r.tagName===n.tagName&&(o+=1),r=r.nextElementSibling;return"".concat(cssEscape(n.tagName),":nth-of-type(").concat(o,")")}function findSelector(n,r,o,s,u){for(var l=0;l<r.length;l++){var d=(0,r[l])(n,s);if(d){var f=combineSelector(d,u);if(o(n,f))return f}}}function isSelectorUniqueGlobally(n,r){return 1===n.ownerDocument.querySelectorAll(r).length}function isSelectorUniqueAmongSiblings(n,r){return 1===n.parentElement.querySelectorAll(supportScopeSelector()?combineSelector(":scope",r):r).length}function combineSelector(n,r){return r?"".concat(n,">").concat(r):n}function supportScopeSelector(){if(void 0===O)try{document.querySelector(":scope"),O=!0}catch(n){O=!1}return O}function createClickChain(n,r){var o,s=[],u=0;function appendClick(n){n.stopObservable.subscribe(tryFinalize),s.push(n),timer_clearTimeout(o),o=timer_setTimeout(dontAcceptMoreClick,1e3)}function tryFinalize(){1===u&&s.every(function(n){return n.isStopped()})&&(u=2,r(s))}function dontAcceptMoreClick(){timer_clearTimeout(o),0===u&&(u=1,tryFinalize())}return appendClick(n),{tryAppend:function(n){return 0===u&&(s.length>0&&!areEventsSimilar(s[s.length-1].event,n.event)?(dontAcceptMoreClick(),!1):(appendClick(n),!0))},stop:function(){dontAcceptMoreClick()}}}function areEventsSimilar(n,r){return n.target===r.target&&100>=mouseEventDistance(n,r)&&n.timeStamp-r.timeStamp<=1e3}function mouseEventDistance(n,r){return Math.sqrt(Math.pow(n.clientX-r.clientX,2)+Math.pow(n.clientY-r.clientY,2))}function listenActionEvents(n,r){var o,s,u=r.onPointerDown,l=r.onPointerUp,d={selection:!1,input:!1},f=[addEventListener(n,window,b.POINTER_DOWN,function(n){isValidPointerEvent(n)&&(o=isSelectionEmpty(),d={selection:!1,input:!1},s=u(n))},{capture:!0}),addEventListener(n,window,b.SELECTION_CHANGE,function(){o&&isSelectionEmpty()||(d.selection=!0)},{capture:!0}),addEventListener(n,window,b.POINTER_UP,function(n){if(isValidPointerEvent(n)&&s){var r=d;l(s,n,function(){return r}),s=void 0}},{capture:!0}),addEventListener(n,window,b.INPUT,function(){d.input=!0},{capture:!0})];return{stop:function(){f.forEach(function(n){return n.stop()})}}}function isSelectionEmpty(){var n=window.getSelection();return!n||n.isCollapsed}function isValidPointerEvent(n){return n.target instanceof Element&&!1!==n.isPrimary}function computeFrustration(n,r){if(isRage(n))return r.addFrustration("rage_click"),n.some(isDead)&&r.addFrustration("dead_click"),r.hasError&&r.addFrustration("error_click"),{isRage:!0};var o=n.some(function(n){return n.getUserActivity().selection});return n.forEach(function(n){n.hasError&&n.addFrustration("error_click"),isDead(n)&&!o&&n.addFrustration("dead_click")}),{isRage:!1}}function isRage(n){if(n.some(function(n){return n.getUserActivity().selection}))return!1;for(var r=0;r<n.length-2;r+=1)if(n[r+3-1].event.timeStamp-n[r].event.timeStamp<=1e3)return!0;return!1}function isDead(n){return!n.hasPageActivity&&!n.getUserActivity().input&&!elementMatches(n.event.target,'input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *')}function trackClickActions(n,r,o){var s,u=new tx(3e5),l=new Z;n.subscribe(8,function(){u.reset()}),n.subscribe(4,stopClickChain);var d=listenActionEvents(o,{onPointerDown:function(s){return processPointerDown(o,n,r,s)},onPointerUp:function(s,d,f){return startClickAction(o,n,r,u,l,appendClickToClickChain,s.clickActionBase,d,f,s.hadActivityOnPointerDown)}}).stop;return{stop:function(){stopClickChain(),l.notify(),d()},actionContexts:{findActionId:function(n){return u.findAll(n)}}};function appendClickToClickChain(n){if(!s||!s.tryAppend(n)){var r=n.clone();s=createClickChain(n,function(n){finalizeClicks(n,r)})}}function stopClickChain(){s&&s.stop()}}function processPointerDown(n,r,o,s){var u=computeClickActionBase(s,n.actionNameAttribute),l=!1;return doWaitPageActivityEnd(createPageActivityObservable(r,o,n),function(n){l=n.hadActivity},100),{clickActionBase:u,hadActivityOnPointerDown:function(){return l}}}function startClickAction(n,r,o,s,u,l,d,f,h,g){var y=newClick(r,s,h,d,f);l(y);var b=doWaitPageActivityEnd(createPageActivityObservable(r,o,n),function(n){n.hadActivity&&n.end<y.startClocks.timeStamp?y.discard():n.hadActivity?y.stop(n.end):g()?y.stop(y.startClocks.timeStamp):y.stop()},1e4).stop,S=r.subscribe(4,function(n){var r=n.endClocks;y.stop(r.timeStamp)}),_=u.subscribe(function(){y.stop()});y.stopObservable.subscribe(function(){S.unsubscribe(),b(),_.unsubscribe()})}function computeClickActionBase(n,r){var o=n.target.getBoundingClientRect();return{type:"click",target:{width:Math.round(o.width),height:Math.round(o.height),selector:getSelectorFromElement(n.target,r)},position:{x:Math.round(n.clientX-o.left),y:Math.round(n.clientY-o.top)},name:getActionNameFromElement(n.target,r)}}function newClick(n,r,o,s,u){var l,d=generateUUID(),f=clocksNow(),h=r.add(d,f.relative),g=trackEventCounts({lifeCycle:n,isChildEvent:function(n){return void 0!==n.action&&(Array.isArray(n.action.id)?includes(n.action.id,d):n.action.id===d)}}),y=0,b=[],S=new Z;function stop(n){0===y&&((y=1,l=n)?h.close(l-getNavigationStart()):h.remove(),g.stop(),S.notify())}return{event:u,stop:stop,stopObservable:S,get hasError(){return g.eventCounts.errorCount>0},get hasPageActivity(){return void 0!==l},getUserActivity:o,addFrustration:function(n){b.push(n)},startClocks:f,isStopped:function(){return 1===y||2===y},clone:function(){return newClick(n,r,o,s,u)},validate:function(r){if(stop(),1===y){var o,h=g.eventCounts,S=h.resourceCount,_=h.errorCount,w=h.longTaskCount,C=polyfills_assign({type:"click",duration:l&&(o=f.timeStamp,l-o),startClocks:f,id:d,frustrationTypes:b,counts:{resourceCount:S,errorCount:_,longTaskCount:w},events:null!=r?r:[u],event:u},s);n.notify(1,C),y=2}},discard:function(){stop(),y=2}}}function finalizeClicks(n,r){computeFrustration(n,r).isRage?(n.forEach(function(n){return n.discard()}),r.stop(timeStampNow()),r.validate(n.map(function(n){return n.event}))):(r.discard(),n.forEach(function(n){return n.validate()}))}function startActionCollection(n,r,o,s){n.subscribe(1,function(r){return n.notify(10,processAction(r,s))});var u={findActionId:noop};return o.trackUserInteractions&&(u=trackClickActions(n,r,o).actionContexts),{addAction:function(r,o){n.notify(10,polyfills_assign({savedCommonContext:o},processAction(r,s)))},actionContexts:u}}function processAction(n,r){var o=isAutoAction(n)?{action:{id:n.id,loading_time:toServerDuration(n.duration),frustration:{type:n.frustrationTypes},error:{count:n.counts.errorCount},long_task:{count:n.counts.longTaskCount},resource:{count:n.counts.resourceCount}},_dd:{action:{target:n.target,position:n.position}}}:void 0;return{customerContext:isAutoAction(n)?void 0:n.context,rawRumEvent:combine({action:{id:generateUUID(),target:{name:n.name},type:n.type},date:n.startClocks.timeStamp,type:"action",view:{in_foreground:r.isInActivePageStateAt(n.startClocks.relative)}},o),startTime:n.startClocks.relative,domainContext:isAutoAction(n)?{events:n.events}:{}}}function isAutoAction(n){return"custom"!==n.type}function trackRuntimeError(n){var handleRuntimeError=function(r,o){var s=computeRawError({stackTrace:r,originalError:o,startClocks:clocksNow(),nonErrorPrefix:"Uncaught",source:tk.SOURCE,handling:"unhandled"});n.notify(s)},r=instrumentOnError(handleRuntimeError).stop,o=instrumentUnhandledRejection(handleRuntimeError).stop;return{stop:function(){r(),o()}}}function instrumentOnError(n){return instrumentMethodAndCallOriginal(window,"onerror",{before:function(r,o,s,u,l){n(l instanceof Error?computeStackTrace(l):computeStackTraceFromOnErrorMessage(r,o,s,u),null!=l?l:r)}})}function instrumentUnhandledRejection(n){return instrumentMethodAndCallOriginal(window,"onunhandledrejection",{before:function(r){var o=r.reason||"Empty reason";n(computeStackTrace(o),o)}})}var tB={};function initConsoleObservable(n){var r=n.map(function(n){return tB[n]||(tB[n]=createConsoleObservable(n)),tB[n]});return mergeObservables.apply(void 0,r)}function createConsoleObservable(n){var r=new Z(function(){var o=V[n];return V[n]=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];o.apply(console,s);var l=createHandlingStack();callMonitored(function(){r.notify(buildConsoleLog(s,n,l))})},function(){V[n]=o}});return r}function buildConsoleLog(n,r,o){var s,u,l=n.map(function(n){return formatConsoleParameters(n)}).join(" ");if(r===B.error){var d=find(n,function(n){return n instanceof Error});s=d?toStackTraceString(computeStackTrace(d)):void 0,u=tryToGetFingerprint(d)}return{api:r,message:l,stack:s,handlingStack:o,fingerprint:u}}function formatConsoleParameters(n){return"string"==typeof n?sanitize(n):n instanceof Error?formatErrorMessage(computeStackTrace(n)):jsonStringify(sanitize(n),void 0,2)}function trackConsoleError(n){var r=initConsoleObservable([B.error]).subscribe(function(r){return n.notify({startClocks:clocksNow(),message:r.message,stack:r.stack,fingerprint:r.fingerprint,source:tk.CONSOLE,handling:"handled",handlingStack:r.handlingStack})});return{stop:function(){r.unsubscribe()}}}var tV={intervention:"intervention",cspViolation:"csp_violation"};function initReportObservable(n,r){var o=[];includes(r,tV.cspViolation)&&o.push(createCspViolationReportObservable(n));var s=r.filter(function(n){return n!==tV.cspViolation});return s.length&&o.push(createReportObservable(s)),mergeObservables.apply(void 0,o)}function createReportObservable(n){var r=new Z(function(){if(window.ReportingObserver){var o=monitor(function(n,o){return n.forEach(function(n){r.notify(buildRawReportFromReport(n))})}),s=new window.ReportingObserver(o,{types:n,buffered:!0});return s.observe(),function(){s.disconnect()}}});return r}function createCspViolationReportObservable(n){var r=new Z(function(){return addEventListener(n,document,b.SECURITY_POLICY_VIOLATION,function(n){r.notify(buildRawReportFromCspViolation(n))}).stop});return r}function buildRawReportFromReport(n){var r=n.type,o=n.body;return{type:r,subtype:o.id,message:"".concat(r,": ").concat(o.message),stack:buildStack(o.id,o.message,o.sourceFile,o.lineNumber,o.columnNumber)}}function buildRawReportFromCspViolation(n){var r=tV.cspViolation,o="'".concat(n.blockedURI,"' blocked by '").concat(n.effectiveDirective,"' directive");return{type:tV.cspViolation,subtype:n.effectiveDirective,message:"".concat(r,": ").concat(o),stack:buildStack(n.effectiveDirective,n.originalPolicy?"".concat(o,' of the policy "').concat(safeTruncate(n.originalPolicy,100,"..."),'"'):"no policy",n.sourceFile,n.lineNumber,n.columnNumber)}}function buildStack(n,r,o,s,u){return o?toStackTraceString({name:n,message:r,stack:[{func:"?",url:o,line:null!=s?s:void 0,column:null!=u?u:void 0}]}):void 0}function trackReportError(n,r){var o=initReportObservable(n,[tV.cspViolation,tV.intervention]).subscribe(function(n){return r.notify({startClocks:clocksNow(),message:n.message,stack:n.stack,type:n.subtype,source:tk.REPORT,handling:"unhandled"})});return{stop:function(){o.unsubscribe()}}}function startErrorCollection(n,r,o,s){var u=new Z;return trackConsoleError(u),trackRuntimeError(u),trackReportError(r,u),u.subscribe(function(r){return n.notify(12,{error:r})}),doStartErrorCollection(n,o,s)}function doStartErrorCollection(n,r,o){return n.subscribe(12,function(s){var u=s.error,l=s.customerContext,d=s.savedCommonContext;n.notify(10,polyfills_assign({customerContext:l,savedCommonContext:d},processError(u,r,o)))}),{addError:function(r,o){var s=r.error,u=r.handlingStack,l=r.startClocks,d=r.context,f=computeRawError({stackTrace:s instanceof Error?computeStackTrace(s):void 0,originalError:s,handlingStack:u,startClocks:l,nonErrorPrefix:"Provided",source:tk.CUSTOM,handling:"handled"});n.notify(12,{customerContext:d,savedCommonContext:o,error:f})}}}function processError(n,r,o){var s={date:n.startClocks.timeStamp,error:{id:generateUUID(),message:n.message,source:n.source,stack:n.stack,handling_stack:n.handlingStack,type:n.type,handling:n.handling,causes:n.causes,source_type:"browser",fingerprint:n.fingerprint},type:"error",view:{in_foreground:r.isInActivePageStateAt(n.startClocks.relative)}},u=o.findFeatureFlagEvaluations(n.startClocks.relative);return u&&!isEmptyObject(u)&&(s.feature_flags=u),{rawRumEvent:s,startTime:n.startClocks.relative,domainContext:{error:n.originalError}}}function startLongTaskCollection(n,r,o){n.subscribe(0,function(s){for(var u=0;u<s.length;u++){var l=s[u];if(l.entryType!==k.LONG_TASK||!o.findTrackedSession(l.startTime)||!r.trackLongTasks)break;var d=relativeToClocks(l.startTime),f={date:d.timeStamp,long_task:{id:generateUUID(),duration:toServerDuration(l.duration)},type:"long_task",_dd:{discarded:!1}};n.notify(10,{rawRumEvent:f,startTime:d.relative,domainContext:{performanceEntry:l}})}})}function matchRequestTiming(n){if(performance&&"getEntriesByName"in performance){var r=performance.getEntriesByName(n.url,"resource");if(r.length&&"toJSON"in r[0]){var o=r.map(function(n){return n.toJSON()}).filter(toValidEntry).filter(function(r){return isBetween(r,n.startClocks.relative,endTime({startTime:n.startClocks.relative,duration:n.duration}))});if(1===o.length)return o[0]}}}function endTime(n){return n.startTime+n.duration}function isBetween(n,r,o){return n.startTime>=r-1&&endTime(n)<=o+1}function startResourceCollection(n,r,o,s){n.subscribe(6,function(u){var l=processRequest(u,r,o,s);l&&n.notify(10,l)}),n.subscribe(0,function(u){for(var l=0;l<u.length;l++){var d=u[l];if(d.entryType===k.RESOURCE&&!isRequestKind(d)){var f=processResourceEntry(d,r,o,s);f&&n.notify(10,f)}}})}function processRequest(n,r,o,s){var u,l=matchRequestTiming(n),d=l?relativeToClocks(l.startTime):n.startClocks,f=shouldIndexResource(r,o,d),h=computeRequestTracingInfo(n,r);if(f||h){var g="xhr"===n.type?"xhr":"fetch",y=l?computePerformanceEntryMetrics(l):void 0,b=computeRequestDuration(s,d,n.duration),S=computePageStateInfo(s,d,null!==(u=null==l?void 0:l.duration)&&void 0!==u?u:n.duration),_=combine({date:d.timeStamp,resource:{id:generateUUID(),type:g,duration:b,method:n.method,status_code:n.status,url:n.url},type:"resource",_dd:{discarded:!f}},h,y,S);return{startTime:d.relative,rawRumEvent:_,domainContext:{performanceEntry:l,xhr:n.xhr,response:n.response,requestInput:n.input,requestInit:n.init,error:n.error}}}}function processResourceEntry(n,r,o,s){var u=relativeToClocks(n.startTime),l=shouldIndexResource(r,o,u),d=computeEntryTracingInfo(n,r);if(l||d){var f=computeResourceKind(n),h=computePerformanceEntryMetrics(n),g=computePageStateInfo(s,u,n.duration),y=combine({date:u.timeStamp,resource:{id:generateUUID(),type:f,url:n.name},type:"resource",_dd:{discarded:!l}},d,h,g);return{startTime:u.relative,rawRumEvent:y,domainContext:{performanceEntry:n}}}}function shouldIndexResource(n,r,o){return n.trackResources&&r.findTrackedSession(o.relative)}function computePerformanceEntryMetrics(n){return{resource:polyfills_assign({duration:computePerformanceResourceDuration(n),size:computeSize(n)},computePerformanceResourceDetails(n))}}function computeRequestTracingInfo(n,r){if(n.traceSampled&&n.traceId&&n.spanId)return{_dd:{span_id:n.spanId.toDecimalString(),trace_id:n.traceId.toDecimalString(),rule_psr:getRulePsr(r)}}}function computeEntryTracingInfo(n,r){if(n.traceId)return{_dd:{trace_id:n.traceId,rule_psr:getRulePsr(r)}}}function getRulePsr(n){return isNumber(n.traceSampleRate)?n.traceSampleRate/100:void 0}function computePageStateInfo(n,r,o){if(isExperimentalFeatureEnabled(S.RESOURCE_PAGE_STATES))return{_dd:{page_states:n.findAll(r.relative,o),page_was_discarded:String(document.wasDiscarded)}}}function computeRequestDuration(n,r,o){var s;return(null===(s=n.findAll(r.relative,o))||void 0===s?void 0:s.some(function(n){return"frozen"===n.state}))?void 0:toServerDuration(o)}function trackViewEventCounts(n,r,o){var s=trackEventCounts({lifeCycle:n,isChildEvent:function(n){return n.view.id===r},onChange:o});return{stop:s.stop,eventCounts:s.eventCounts}}function trackFirstContentfulPaint(n,r,o){return{stop:n.subscribe(0,function(n){var s=find(n,function(n){return n.entryType===k.PAINT&&"first-contentful-paint"===n.name&&n.startTime<r.timeStamp&&n.startTime<6e5});s&&o(s.startTime)}).unsubscribe}}function trackFirstInput(n,r,o,s){return{stop:n.subscribe(0,function(n){var u=find(n,function(n){return n.entryType===k.FIRST_INPUT&&n.startTime<o.timeStamp});if(u){var l,d=(l=u.startTime,u.processingStart-l),f=void 0;u.target&&isElementNode(u.target)&&(f=getSelectorFromElement(u.target,r.actionNameAttribute)),s({delay:d>=0?d:0,time:u.startTime,targetSelector:f})}}).unsubscribe}}function trackNavigationTimings(n,r){return{stop:n.subscribe(0,function(n){for(var o=0;o<n.length;o++){var s=n[o];s.entryType===k.NAVIGATION&&r({domComplete:s.domComplete,domContentLoaded:s.domContentLoadedEventEnd,domInteractive:s.domInteractive,loadEvent:s.loadEventEnd,firstByte:s.responseStart>=0&&s.responseStart<=relativeNow()?s.responseStart:void 0})}}).unsubscribe}}function trackLargestContentfulPaint(n,r,o,s,u){var l=1/0,d=addEventListeners(r,s,[b.POINTER_DOWN,b.KEY_DOWN],function(n){l=n.timeStamp},{capture:!0,once:!0}).stop,f=n.subscribe(0,function(n){var s=findLast(n,function(n){return n.entryType===k.LARGEST_CONTENTFUL_PAINT&&n.startTime<l&&n.startTime<o.timeStamp&&n.startTime<6e5});if(s){var d=void 0;s.element&&(d=getSelectorFromElement(s.element,r.actionNameAttribute)),u({value:s.startTime,targetSelector:d})}}).unsubscribe;return{stop:function(){d(),f()}}}function trackFirstHidden(n,r){var o,s;return void 0===r&&(r=window),"hidden"===document.visibilityState?o=0:(o=1/0,s=addEventListeners(n,r,[b.PAGE_HIDE,b.VISIBILITY_CHANGE],function(n){(n.type===b.PAGE_HIDE||"hidden"===document.visibilityState)&&(o=n.timeStamp,s())},{capture:!0}).stop),{get timeStamp(){return o},stop:function(){null==s||s()}}}function trackInitialViewMetrics(n,r,o,s){var u={},l=trackNavigationTimings(n,function(n){o(n.loadEvent),u.navigationTimings=n,s()}).stop,d=trackFirstHidden(r),f=trackFirstContentfulPaint(n,d,function(n){u.firstContentfulPaint=n,s()}).stop,h=trackLargestContentfulPaint(n,r,d,window,function(n){u.largestContentfulPaint=n,s()}).stop,g=trackFirstInput(n,r,d,function(n){u.firstInput=n,s()}).stop;return{stop:function(){l(),f(),h(),g(),d.stop()},initialViewMetrics:u}}function trackCumulativeLayoutShift(n,r,o){if(!isLayoutShiftSupported())return{stop:noop};var s=0;o({value:0});var u=slidingSessionWindow();return{stop:r.subscribe(0,function(r){for(var l=0;l<r.length;l++){var d=r[l];if(d.entryType===k.LAYOUT_SHIFT&&!d.hadRecentInput&&(u.update(d),u.value()>s)){var f=round(s=u.value(),4),h=u.largestLayoutShiftTarget(),g=void 0;h&&h.isConnected&&(g=getSelectorFromElement(h,n.actionNameAttribute)),o({value:f,targetSelector:g})}}}).unsubscribe}}function slidingSessionWindow(){var n,r,o,s,u=0,l=0;return{update:function(d){var f,h;void 0===n||d.startTime-r>=1e3||d.startTime-n>=5e3?(n=r=d.startTime,u=d.value,l=0,o=void 0):(u+=d.value,r=d.startTime),d.value>l&&(l=d.value,s=d.startTime,o=(null===(f=d.sources)||void 0===f?void 0:f.length)?null===(h=find(d.sources,function(n){return!!n.node&&isElementNode(n.node)}))||void 0===h?void 0:h.node:void 0)},value:function(){return u},largestLayoutShiftTarget:function(){return o},largestLayoutShiftTime:function(){return s}}}function isLayoutShiftSupported(){return supportPerformanceTimingEvent(k.LAYOUT_SHIFT)}var tH=0,tj=1/0,tq=0;function initInteractionCountPolyfill(){"interactionCount"in performance||L||(L=new window.PerformanceObserver(monitor(function(n){n.getEntries().forEach(function(n){n.interactionId&&(tj=Math.min(tj,n.interactionId),tH=((tq=Math.max(tq,n.interactionId))-tj)/7+1)})}))).observe({type:"event",buffered:!0,durationThreshold:0})}var getInteractionCount=function(){return L?tH:window.performance.interactionCount||0};function trackInteractionToNextPaint(n,r,o,s){if(!isInteractionToNextPaintSupported())return{getInteractionToNextPaint:function(){},setViewEnd:noop,stop:noop};var u,l=trackViewInteractionCount(o),d=l.getViewInteractionCount,f=l.stopViewInteractionCount,h=1/0,g=trackLongestInteractions(d),y=-1;return{getInteractionToNextPaint:function(){return y>=0?{value:Math.min(y,6e4),targetSelector:u}:d()?{value:0}:void 0},setViewEnd:function(n){h=n,f()},stop:s.subscribe(0,function(o){for(var s=0;s<o.length;s++){var l=o[s];(l.entryType===k.EVENT||l.entryType===k.FIRST_INPUT)&&l.interactionId&&l.startTime>=r&&l.startTime<=h&&g.process(l)}var d=g.estimateP98Interaction();d&&(y=d.duration,u=d.target&&isElementNode(d.target)?getSelectorFromElement(d.target,n.actionNameAttribute):void 0)}).unsubscribe}}function trackLongestInteractions(n){var r=[];function sortAndTrimLongestInteractions(){r.sort(function(n,r){return r.duration-n.duration}).splice(10)}return{process:function(n){var o=r.findIndex(function(r){return n.interactionId===r.interactionId}),s=r[r.length-1];-1!==o?n.duration>r[o].duration&&(r[o]=n,sortAndTrimLongestInteractions()):(r.length<10||n.duration>s.duration)&&(r.push(n),sortAndTrimLongestInteractions())},estimateP98Interaction:function(){var o=Math.min(r.length-1,Math.floor(n()/50));return r[o]}}}function trackViewInteractionCount(n){initInteractionCountPolyfill();var r="initial_load"===n?0:getInteractionCount(),o={stopped:!1};return{getViewInteractionCount:function(){return o.stopped?o.interactionCount:getInteractionCount()-r},stopViewInteractionCount:function(){o={stopped:!0,interactionCount:getInteractionCount()-r}}}}function isInteractionToNextPaintSupported(){return supportPerformanceTimingEvent(k.EVENT)&&window.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype}function trackLoadingTime(n,r,o,s,u,l){var d="initial_load"===s,f=!0,h=[];function invokeCallbackIfAllCandidatesAreReceived(){f||d||!(h.length>0)||l(Math.max.apply(Math,h))}return{stop:doWaitPageActivityEnd(createPageActivityObservable(n,r,o),function(n){if(f){if(f=!1,n.hadActivity){var r;h.push((r=u.timeStamp,n.end-r))}invokeCallbackIfAllCandidatesAreReceived()}},void 0).stop,setLoadEvent:function(n){d&&(d=!1,h.push(n),invokeCallbackIfAllCandidatesAreReceived())}}}function getScrollX(){var n=window.visualViewport;return Math.round(n?n.pageLeft-n.offsetLeft:void 0!==window.scrollX?window.scrollX:window.pageXOffset||0)}function getScrollY(){var n=window.visualViewport;return Math.round(n?n.pageTop-n.offsetTop:void 0!==window.scrollY?window.scrollY:window.pageYOffset||0)}function createViewportObservable(n){var r=new Z(function(){var o=throttle(function(){r.notify(getViewportDimension())},200).throttled;return addEventListener(n,window,b.RESIZE,o,{capture:!0,passive:!0}).stop});return r}function getViewportDimension(){var n=window.visualViewport;return n?{width:Number(n.width*n.scale),height:Number(n.height*n.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}function trackScrollMetrics(n,r,o,s){void 0===s&&(s=createScrollValuesObservable(n));var u=0,l=0,d=0,f=s.subscribe(function(n){var s=n.scrollDepth,f=n.scrollTop,h=n.scrollHeight,g=!1;s>u&&(u=s,g=!0),h>l&&(l=h,d=relativeNow()-r.relative,g=!0),g&&o({maxDepth:Math.min(u,l),maxDepthScrollTop:f,maxScrollHeight:l,maxScrollHeightTime:d})});return{stop:function(){return f.unsubscribe()}}}function computeScrollValues(){var n=getScrollY(),r=getViewportDimension().height;return{scrollHeight:Math.round((document.scrollingElement||document.documentElement).scrollHeight),scrollDepth:Math.round(r+n),scrollTop:n}}function createScrollValuesObservable(n,r){void 0===r&&(r=1e3);var o=new Z(function(){function notify(){o.notify(computeScrollValues())}if(window.ResizeObserver){var s=throttle(notify,r,{leading:!1,trailing:!0}),u=document.scrollingElement||document.documentElement,l=new ResizeObserver(monitor(s.throttled));l.observe(u);var d=addEventListener(n,window,b.SCROLL,s.throttled,{passive:!0});return function(){s.cancel(),l.unobserve(u),d.stop()}}});return o}function trackCommonViewMetrics(n,r,o,s,u,l){var d={},f=trackLoadingTime(n,r,o,u,l,function(n){d.loadingTime=n,s()}),h=f.stop,g=f.setLoadEvent,y=trackScrollMetrics(o,l,function(n){d.scroll=n}).stop,b=trackCumulativeLayoutShift(o,n,function(n){d.cumulativeLayoutShift=n,s()}).stop,S=trackInteractionToNextPaint(o,l.relative,u,n),_=S.stop,w=S.getInteractionToNextPaint;return{stop:function(){h(),b(),y()},stopINPTracking:_,setLoadEvent:g,setViewEnd:S.setViewEnd,getCommonViewMetrics:function(){return d.interactionToNextPaint=w(),d}}}function trackViews(n,r,o,s,u,l,d){var f,h=new Set,g=startNewView("initial_load",clocksOrigin(),d);function startNewView(u,l,d){var f=newView(r,o,s,n,u,l,d);return h.add(f),f.stopObservable.subscribe(function(){h.delete(f)}),f}function renewViewOnLocationChange(n){return n.subscribe(function(n){areDifferentLocation(n.oldLocation,n.newLocation)&&(g.end(),g=startNewView("route_change"))})}return r.subscribe(8,function(){g=startNewView("route_change",void 0,{name:g.name,service:g.service,version:g.version})}),r.subscribe(7,function(){g.end({sessionIsActive:!1})}),r.subscribe(9,function(n){(n.reason===tC.UNLOADING||n.reason===tC.PAGEHIDE)&&g.end()}),l&&(f=renewViewOnLocationChange(u)),{addTiming:function(n,r){void 0===r&&(r=timeStampNow()),g.addTiming(n,r)},startView:function(n,r){g.end({endClocks:r}),g=startNewView("route_change",r,n)},stop:function(){null==f||f.unsubscribe(),g.end(),h.forEach(function(n){return n.stop()})}}}function newView(n,r,o,s,u,l,d){void 0===l&&(l=clocksNow());var f,h,g,y,b=generateUUID(),S=new Z,_={},w=0,C=shallowClone(s),E=!0;d&&(h=d.name,g=d.service,y=d.version),n.notify(2,{id:b,name:h,startClocks:l,service:g,version:y});var k=throttle(triggerViewUpdate,3e3,{leading:!1}),R=k.throttled,A=k.cancel,I=trackCommonViewMetrics(n,r,o,R,u,l),N=I.setLoadEvent,x=I.setViewEnd,O=I.stop,L=I.stopINPTracking,M=I.getCommonViewMetrics,P="initial_load"===u?trackInitialViewMetrics(n,o,N,R):{stop:noop,initialViewMetrics:{}},D=P.stop,U=P.initialViewMetrics,F=trackViewEventCounts(n,b,R),z=F.stop,B=F.eventCounts,V=timer_setInterval(triggerViewUpdate,3e5);function triggerViewUpdate(){A(),w+=1;var r=void 0===f?timeStampNow():f.timeStamp;n.notify(3,{customTimings:_,documentVersion:w,id:b,name:h,service:g,version:y,loadingType:u,location:C,startClocks:l,commonViewMetrics:M(),initialViewMetrics:U,duration:r-l.timeStamp,isActive:void 0===f,sessionIsActive:E,eventCounts:B})}return triggerViewUpdate(),{name:h,service:g,version:y,stopObservable:S,end:function(r){var o,s,u=this;void 0===r&&(r={}),f||(f=null!==(o=r.endClocks)&&void 0!==o?o:clocksNow(),E=null===(s=r.sessionIsActive)||void 0===s||s,n.notify(4,{endClocks:f}),timer_clearInterval(V),x(f.relative),O(),triggerViewUpdate(),timer_setTimeout(function(){u.stop()},3e5))},stop:function(){D(),z(),L(),S.notify()},addTiming:function(n,r){if(!f){var o=looksLikeRelativeTime(r)?r:r-l.timeStamp;_[sanitizeTiming(n)]=o,R()}}}}function sanitizeTiming(n){var r=n.replace(/[^a-zA-Z0-9-_.@$]/g,"_");return r!==n&&q.warn("Invalid timing name: ".concat(n,", sanitized to: ").concat(r)),r}function areDifferentLocation(n,r){return n.pathname!==r.pathname||!isHashAnAnchor(r.hash)&&getPathFromHash(r.hash)!==getPathFromHash(n.hash)}function isHashAnAnchor(n){var r=n.substring(1);return""!==r&&!!document.getElementById(r)}function getPathFromHash(n){var r=n.indexOf("?");return r<0?n:n.slice(0,r)}function startViewCollection(n,r,o,s,u,l,d,f,h){return n.subscribe(3,function(o){return n.notify(10,processViewUpdate(o,r,l,f,d))}),trackViews(o,n,s,r,u,!r.trackViewsManually,h)}function processViewUpdate(n,r,o,s,u){var l,d,f,h,g,y,b,S,_,w,C,E,k,R,A=s.getReplayStats(n.id),I=o.findFeatureFlagEvaluations(n.startClocks.relative),N=u.findAll(n.startClocks.relative,n.duration),x={_dd:{document_version:n.documentVersion,replay_stats:A,page_states:N,configuration:{start_session_replay_recording_manually:r.startSessionReplayRecordingManually}},date:n.startClocks.timeStamp,type:"view",view:{action:{count:n.eventCounts.actionCount},frustration:{count:n.eventCounts.frustrationCount},cumulative_layout_shift:null===(l=n.commonViewMetrics.cumulativeLayoutShift)||void 0===l?void 0:l.value,cumulative_layout_shift_target_selector:null===(d=n.commonViewMetrics.cumulativeLayoutShift)||void 0===d?void 0:d.targetSelector,first_byte:toServerDuration(null===(f=n.initialViewMetrics.navigationTimings)||void 0===f?void 0:f.firstByte),dom_complete:toServerDuration(null===(h=n.initialViewMetrics.navigationTimings)||void 0===h?void 0:h.domComplete),dom_content_loaded:toServerDuration(null===(g=n.initialViewMetrics.navigationTimings)||void 0===g?void 0:g.domContentLoaded),dom_interactive:toServerDuration(null===(y=n.initialViewMetrics.navigationTimings)||void 0===y?void 0:y.domInteractive),error:{count:n.eventCounts.errorCount},first_contentful_paint:toServerDuration(n.initialViewMetrics.firstContentfulPaint),first_input_delay:toServerDuration(null===(b=n.initialViewMetrics.firstInput)||void 0===b?void 0:b.delay),first_input_time:toServerDuration(null===(S=n.initialViewMetrics.firstInput)||void 0===S?void 0:S.time),first_input_target_selector:null===(_=n.initialViewMetrics.firstInput)||void 0===_?void 0:_.targetSelector,interaction_to_next_paint:toServerDuration(null===(w=n.commonViewMetrics.interactionToNextPaint)||void 0===w?void 0:w.value),interaction_to_next_paint_target_selector:null===(C=n.commonViewMetrics.interactionToNextPaint)||void 0===C?void 0:C.targetSelector,is_active:n.isActive,name:n.name,largest_contentful_paint:toServerDuration(null===(E=n.initialViewMetrics.largestContentfulPaint)||void 0===E?void 0:E.value),largest_contentful_paint_target_selector:null===(k=n.initialViewMetrics.largestContentfulPaint)||void 0===k?void 0:k.targetSelector,load_event:toServerDuration(null===(R=n.initialViewMetrics.navigationTimings)||void 0===R?void 0:R.loadEvent),loading_time:discardNegativeDuration(toServerDuration(n.commonViewMetrics.loadingTime)),loading_type:n.loadingType,long_task:{count:n.eventCounts.longTaskCount},resource:{count:n.eventCounts.resourceCount},time_spent:toServerDuration(n.duration)},feature_flags:I&&!isEmptyObject(I)?I:void 0,display:n.commonViewMetrics.scroll?{scroll:{max_depth:n.commonViewMetrics.scroll.maxDepth,max_depth_scroll_top:n.commonViewMetrics.scroll.maxDepthScrollTop,max_scroll_height:n.commonViewMetrics.scroll.maxScrollHeight,max_scroll_height_time:toServerDuration(n.commonViewMetrics.scroll.maxScrollHeightTime)}}:void 0,session:{has_replay:!!A||void 0,is_active:!!n.sessionIsActive&&void 0},privacy:{replay_level:r.defaultPrivacyLevel}};return isEmptyObject(n.customTimings)||(x.view.custom_timings=mapValues(n.customTimings,toServerDuration)),{rawRumEvent:x,startTime:n.startClocks.relative,domainContext:{location:n.location}}}function discardNegativeDuration(n){return isNumber(n)&&n<0?void 0:n}var tG=[];function startSessionManager(n,r,o){var s=startSessionStore(n.sessionStoreStrategyType,r,o);tG.push(function(){return s.stop()});var u=new tx(144e5);function buildSessionContext(){return{id:s.getSession().id,trackingType:s.getSession()[r]}}return tG.push(function(){return u.stop()}),s.renewObservable.subscribe(function(){u.add(buildSessionContext(),relativeNow())}),s.expireObservable.subscribe(function(){u.closeActive(relativeNow())}),s.expandOrRenewSession(),u.add(buildSessionContext(),clocksOrigin().relative),trackActivity(n,function(){return s.expandOrRenewSession()}),trackVisibility(n,function(){return s.expandSession()}),{findActiveSession:function(n){return u.find(n)},renewObservable:s.renewObservable,expireObservable:s.expireObservable,expire:s.expire}}function trackActivity(n,r){var o=addEventListeners(n,window,[b.CLICK,b.TOUCH_START,b.KEY_DOWN,b.SCROLL],r,{capture:!0,passive:!0}).stop;tG.push(o)}function trackVisibility(n,r){var expandSessionWhenVisible=function(){"visible"===document.visibilityState&&r()},o=addEventListener(n,document,b.VISIBILITY_CHANGE,expandSessionWhenVisible).stop;tG.push(o);var s=timer_setInterval(expandSessionWhenVisible,6e4);tG.push(function(){timer_clearInterval(s)})}function startRumSessionManager(n,r){var o=startSessionManager(n,"rum",function(r){return computeSessionState(n,r)});return o.expireObservable.subscribe(function(){r.notify(7)}),o.renewObservable.subscribe(function(){r.notify(8)}),{findTrackedSession:function(n){var r=o.findActiveSession(n);if(r&&isTypeTracked(r.trackingType))return{id:r.id,sessionReplayAllowed:"1"===r.trackingType}},expire:o.expire,expireObservable:o.expireObservable}}function startRumSessionManagerStub(){var n={id:"00000000-aaaa-0000-aaaa-000000000000",sessionReplayAllowed:!1};return{findTrackedSession:function(){return n},expire:noop,expireObservable:new Z}}function computeSessionState(n,r){var o;return{trackingType:o=hasValidRumSession(r)?r:performDraw(n.sessionSampleRate)?performDraw(n.sessionReplaySampleRate)?"1":"2":"0",isTracked:isTypeTracked(o)}}function hasValidRumSession(n){return"0"===n||"1"===n||"2"===n}function isTypeTracked(n){return"2"===n||"1"===n}var tW=function(){function Batch(n,r,o,s){var u=this;this.encoder=n,this.request=r,this.flushController=o,this.messageBytesLimit=s,this.upsertBuffer={},this.flushSubscription=this.flushController.flushObservable.subscribe(function(n){return u.flush(n)})}return Batch.prototype.add=function(n){this.addOrUpdate(n)},Batch.prototype.upsert=function(n,r){this.addOrUpdate(n,r)},Batch.prototype.stop=function(){this.flushSubscription.unsubscribe()},Batch.prototype.flush=function(n){var r,o=objectValues(this.upsertBuffer).join("\n");this.upsertBuffer={};var s=(r=n.reason,includes(objectValues(tC),r)),u=s?this.request.sendOnExit:this.request.send;if(s&&this.encoder.isAsync){var l=this.encoder.finishSync();l.outputBytesCount&&u(formatPayloadFromEncoder(l,n));var d=[l.pendingData,o].filter(Boolean).join("\n");d&&u({data:d,bytesCount:computeBytesCount(d),flushReason:n.reason})}else o&&this.encoder.write(this.encoder.isEmpty?o:"\n".concat(o)),this.encoder.finish(function(r){u(formatPayloadFromEncoder(r,n))})},Batch.prototype.addOrUpdate=function(n,r){var o=jsonStringify(n),s=this.encoder.estimateEncodedBytesCount(o);if(s>=this.messageBytesLimit){q.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));return}this.hasMessageFor(r)&&this.remove(r),this.push(o,s,r)},Batch.prototype.push=function(n,r,o){var s=this;this.flushController.notifyBeforeAddMessage(r),void 0!==o?(this.upsertBuffer[o]=n,this.flushController.notifyAfterAddMessage()):this.encoder.write(this.encoder.isEmpty?n:"\n".concat(n),function(n){s.flushController.notifyAfterAddMessage(n-r)})},Batch.prototype.remove=function(n){var r=this.upsertBuffer[n];delete this.upsertBuffer[n];var o=this.encoder.estimateEncodedBytesCount(r);this.flushController.notifyAfterRemoveMessage(o)},Batch.prototype.hasMessageFor=function(n){return void 0!==n&&void 0!==this.upsertBuffer[n]},Batch}();function formatPayloadFromEncoder(n,r){return{data:"string"==typeof n.output?n.output:new Blob([n.output],{type:"text/plain"}),bytesCount:n.outputBytesCount,encoding:n.encoding,flushReason:r.reason}}function sendWithRetryStrategy(n,r,o,s,u){0===r.transportStatus&&0===r.queuedPayloads.size()&&r.bandwidthMonitor.canHandle(n)?send(n,r,o,{onSuccess:function(){return retryQueuedPayloads(0,r,o,s,u)},onFailure:function(){r.queuedPayloads.enqueue(n),scheduleRetry(r,o,s,u)}}):r.queuedPayloads.enqueue(n)}function scheduleRetry(n,r,o,s){2===n.transportStatus&&timer_setTimeout(function(){send(n.queuedPayloads.first(),n,r,{onSuccess:function(){n.queuedPayloads.dequeue(),n.currentBackoffTime=1e3,retryQueuedPayloads(1,n,r,o,s)},onFailure:function(){n.currentBackoffTime=Math.min(6e4,2*n.currentBackoffTime),scheduleRetry(n,r,o,s)}})},n.currentBackoffTime)}function send(n,r,o,s){var u=s.onSuccess,l=s.onFailure;r.bandwidthMonitor.add(n),o(n,function(o){r.bandwidthMonitor.remove(n),shouldRetryRequest(o)?(r.transportStatus=r.bandwidthMonitor.ongoingRequestCount>0?1:2,n.retry={count:n.retry?n.retry.count+1:1,lastFailureStatus:o.status},l()):(r.transportStatus=0,u())})}function retryQueuedPayloads(n,r,o,s,u){0===n&&r.queuedPayloads.isFull()&&!r.queueFullReported&&(u({message:"Reached max ".concat(s," events size queued for upload: ").concat(3,"MiB"),source:tk.AGENT,startClocks:clocksNow()}),r.queueFullReported=!0);var l=r.queuedPayloads;for(r.queuedPayloads=newPayloadQueue();l.size()>0;)sendWithRetryStrategy(l.dequeue(),r,o,s,u)}function shouldRetryRequest(n){return"opaque"!==n.type&&(0===n.status&&!navigator.onLine||408===n.status||429===n.status||isServerError(n.status))}function newRetryState(){return{transportStatus:0,currentBackoffTime:1e3,bandwidthMonitor:newBandwidthMonitor(),queuedPayloads:newPayloadQueue(),queueFullReported:!1}}function newPayloadQueue(){var n=[];return{bytesCount:0,enqueue:function(r){this.isFull()||(n.push(r),this.bytesCount+=r.bytesCount)},first:function(){return n[0]},dequeue:function(){var r=n.shift();return r&&(this.bytesCount-=r.bytesCount),r},size:function(){return n.length},isFull:function(){return this.bytesCount>=3145728}}}function newBandwidthMonitor(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(n){return 0===this.ongoingRequestCount||this.ongoingByteCount+n.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(n){this.ongoingRequestCount+=1,this.ongoingByteCount+=n.bytesCount},remove:function(n){this.ongoingRequestCount-=1,this.ongoingByteCount-=n.bytesCount}}}function createHttpRequest(n,r,o,s){var u=newRetryState(),sendStrategyForRetry=function(s,u){return fetchKeepAliveStrategy(n,r,o,s,u)};return{send:function(n){sendWithRetryStrategy(n,u,sendStrategyForRetry,r.trackType,s)},sendOnExit:function(s){sendBeaconStrategy(n,r,o,s)}}}function sendBeaconStrategy(n,r,o,s){if(navigator.sendBeacon&&s.bytesCount<o)try{var u=r.build("beacon",s);if(navigator.sendBeacon(u,s.data))return}catch(n){reportBeaconError(n)}sendXHR(n,r.build("xhr",s),s.data)}var tZ=!1;function reportBeaconError(n){tZ||(tZ=!0,addTelemetryError(n))}function fetchKeepAliveStrategy(n,r,o,s,u){if(isKeepAliveSupported()&&s.bytesCount<o){var l=r.build("fetch",s);fetch(l,{method:"POST",body:s.data,keepalive:!0,mode:"cors"}).then(monitor(function(n){return null==u?void 0:u({status:n.status,type:n.type})}),monitor(function(){sendXHR(n,r.build("xhr",s),s.data,u)}))}else sendXHR(n,r.build("xhr",s),s.data,u)}function isKeepAliveSupported(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(n){return!1}}function sendXHR(n,r,o,s){var u=new XMLHttpRequest;u.open("POST",r,!0),o instanceof Blob&&u.setRequestHeader("Content-Type",o.type),addEventListener(n,u,"loadend",function(){null==s||s({status:u.status})},{once:!0}),u.send(o)}function createFlushController(n){var r,o=n.messagesLimit,s=n.bytesLimit,u=n.durationLimit,l=n.pageExitObservable,d=n.sessionExpireObservable,f=l.subscribe(function(n){return flush(n.reason)}),h=d.subscribe(function(){return flush("session_expire")}),g=new Z(function(){return function(){f.unsubscribe(),h.unsubscribe()}}),y=0,b=0;function flush(n){if(0!==b){var r=b,o=y;b=0,y=0,cancelDurationLimitTimeout(),g.notify({reason:n,messagesCount:r,bytesCount:o})}}function scheduleDurationLimitTimeout(){void 0===r&&(r=timer_setTimeout(function(){flush("duration_limit")},u))}function cancelDurationLimitTimeout(){timer_clearTimeout(r),r=void 0}return{flushObservable:g,get messagesCount(){return b},notifyBeforeAddMessage:function(n){y+n>=s&&flush("bytes_limit"),b+=1,y+=n,scheduleDurationLimitTimeout()},notifyAfterAddMessage:function(n){void 0===n&&(n=0),y+=n,b>=o?flush("messages_limit"):y>=s&&flush("bytes_limit")},notifyAfterRemoveMessage:function(n){y-=n,0==(b-=1)&&cancelDurationLimitTimeout()}}}function startBatchWithReplica(n,r,o,s,u,l){var d=createBatch(n,r),f=o&&createBatch(n,o);function createBatch(n,r){var o=r.endpoint;return new tW(r.encoder,createHttpRequest(n,o,n.batchBytesLimit,s),createFlushController({messagesLimit:n.batchMessagesLimit,bytesLimit:n.batchBytesLimit,durationLimit:n.flushTimeout,pageExitObservable:u,sessionExpireObservable:l}),n.messageBytesLimit)}return{flushObservable:d.flushController.flushObservable,add:function(n,r){void 0===r&&(r=!0),d.add(n),f&&r&&f.add(o.transformMessage?o.transformMessage(n):n)},upsert:function(n,r){d.upsert(n,r),f&&f.upsert(o.transformMessage?o.transformMessage(n):n,r)},stop:function(){d.stop(),null==f||f.stop()}}}function startRumBatch(n,r,o,s,u,l,d){var f=n.replica,h=startBatchWithReplica(n,{endpoint:n.rumEndpointBuilder,encoder:d(2)},f&&{endpoint:f.rumEndpointBuilder,transformMessage:function(n){return combine(n,{application:{id:f.applicationId}})},encoder:d(3)},s,u,l);return r.subscribe(11,function(n){"view"===n.type?h.upsert(n,n.view.id):h.add(n)}),o.subscribe(function(r){return h.add(r,isTelemetryReplicationAllowed(n))}),h}function startRumEventBridge(n){var r=getEventBridge();n.subscribe(11,function(n){r.send("rum",n)})}function startUrlContexts(n,r,o){var s,u=new tx(144e5);n.subscribe(4,function(n){var r=n.endClocks;u.closeActive(r.relative)}),n.subscribe(2,function(n){var r=n.startClocks,l=o.href;u.add(buildUrlContext({url:l,referrer:s||document.referrer}),r.relative),s=l});var l=r.subscribe(function(n){var r=n.newLocation,o=u.find();if(o){var s=relativeNow();u.closeActive(s),u.add(buildUrlContext({url:r.href,referrer:o.referrer}),s)}});function buildUrlContext(n){return{url:n.url,referrer:n.referrer}}return{findUrl:function(n){return u.find(n)},stop:function(){l.unsubscribe(),u.stop()}}}function createLocationChangeObservable(n,r){var o=shallowClone(r),s=new Z(function(){var r=trackHistory(n,onLocationChange).stop,o=trackHash(n,onLocationChange).stop;return function(){r(),o()}});function onLocationChange(){if(o.href!==r.href){var n=shallowClone(r);s.notify({newLocation:n,oldLocation:o}),o=n}}return s}function trackHistory(n,r){var o=instrumentMethodAndCallOriginal(history,"pushState",{after:r}).stop,s=instrumentMethodAndCallOriginal(history,"replaceState",{after:r}).stop,u=addEventListener(n,window,b.POP_STATE,r).stop;return{stop:function(){o(),s(),u()}}}function trackHash(n,r){return addEventListener(n,window,b.HASH_CHANGE,r)}function startFeatureFlagContexts(n,r){if(void 0===r&&(r=computeBytesCount),!isExperimentalFeatureEnabled(S.FEATURE_FLAGS))return{findFeatureFlagEvaluations:function(){},getFeatureFlagBytesCount:function(){return 0},addFeatureFlagEvaluation:noop,stop:noop};var o=new tx(144e5),s=0,u=!1;n.subscribe(4,function(n){var r=n.endClocks;o.closeActive(r.relative)}),n.subscribe(2,function(n){var r=n.startClocks;o.add({},r.relative),s=0});var l=throttle(function(n){s=r(jsonStringify(n)),u||(u=warnIfCustomerDataLimitReached(s,0))},200),d=l.throttled;return{findFeatureFlagEvaluations:function(n){return o.find(n)},getFeatureFlagBytesCount:function(){return o.find()?s:0},addFeatureFlagEvaluation:function(n,r){var s=o.find();s&&(s[n]=r,d(s))},stop:l.cancel}}function startCustomerDataTelemetry(n,r,o,s,u,l,d){r.enabled&&performDraw(n.customerDataTelemetrySampleRate)&&(initCurrentPeriodMeasures(),initCurrentBatchMeasures(),o.subscribe(11,function(n){U=!0,updateMeasure(D.globalContextBytes,isEmptyObject(s.getContext())?0:s.getBytesCount()),updateMeasure(D.userContextBytes,isEmptyObject(u.getContext())?0:u.getBytesCount());var r=l.findFeatureFlagEvaluations(),o=includes(["view","error"],n.type)&&r&&!isEmptyObject(r);updateMeasure(D.featureFlagBytes,o?l.getFeatureFlagBytesCount():0)}),d.subscribe(function(n){var r=n.bytesCount,o=n.messagesCount;U&&(P.batchCount+=1,updateMeasure(P.batchBytesCount,r),updateMeasure(P.batchMessagesCount,o),mergeMeasure(P.globalContextBytes,D.globalContextBytes),mergeMeasure(P.userContextBytes,D.userContextBytes),mergeMeasure(P.featureFlagBytes,D.featureFlagBytes),initCurrentBatchMeasures())}),timer_setInterval(sendCurrentPeriodMeasures,1e4))}function sendCurrentPeriodMeasures(){0!==P.batchCount&&(addTelemetryDebug("Customer data measures",P),initCurrentPeriodMeasures())}function createMeasure(){return{min:1/0,max:0,sum:0}}function updateMeasure(n,r){n.sum+=r,n.min=Math.min(n.min,r),n.max=Math.max(n.max,r)}function mergeMeasure(n,r){n.sum+=r.sum,n.min=Math.min(n.min,r.min),n.max=Math.max(n.max,r.max)}function initCurrentPeriodMeasures(){P={batchCount:0,batchBytesCount:createMeasure(),batchMessagesCount:createMeasure(),globalContextBytes:createMeasure(),userContextBytes:createMeasure(),featureFlagBytes:createMeasure()}}function initCurrentBatchMeasures(){U=!1,D={globalContextBytes:createMeasure(),userContextBytes:createMeasure(),featureFlagBytes:createMeasure()}}function startPageStateHistory(n,r){void 0===r&&(r=500);var o,s=new tx(144e5,4e3);addPageState(getPageState(),relativeNow());var u=addEventListeners(n,window,[b.PAGE_SHOW,b.FOCUS,b.BLUR,b.VISIBILITY_CHANGE,b.RESUME,b.FREEZE,b.PAGE_HIDE],function(n){addPageState(computePageState(n),n.timeStamp)},{capture:!0}).stop;function addPageState(n,r){void 0===r&&(r=relativeNow()),n!==o&&(o=n,s.closeActive(r),s.add({state:o,startTime:r},r))}return{findAll:function(n,o){var u=s.findAll(n,o);if(0!==u.length){for(var l=[],d=Math.max(0,u.length-r),f=u.length-1;f>=d;f--){var h=u[f],g=h.startTime-n;l.push({state:h.state,start:toServerDuration(g)})}return l}},isInActivePageStateAt:function(n){var r=s.find(n);return void 0!==r&&"active"===r.state},addPageState:addPageState,stop:function(){u(),s.stop()}}}function computePageState(n){return n.type===b.FREEZE?"frozen":n.type===b.PAGE_HIDE?n.persisted?"frozen":"terminated":getPageState()}function getPageState(){return"hidden"===document.visibilityState?"hidden":document.hasFocus()?"active":"passive"}function startDisplayContext(n){var r=getViewportDimension();return{get:function(){return{viewport:r}},stop:(M||(M=createViewportObservable(n)),M).subscribe(function(n){r=n}).unsubscribe}}function startRum(n,r,o,s,u,l,d){var f=[],h=new tI;h.subscribe(11,function(n){return sendToExtension("rum",n)});var g=startRumTelemetry(r);g.setContextProvider(function(){var n,o;return{application:{id:r.applicationId},session:{id:null===(n=_.findTrackedSession())||void 0===n?void 0:n.id},view:{id:null===(o=R.findView())||void 0===o?void 0:o.id},action:{id:N.findActionId()}}});var reportError=function(n){h.notify(12,{error:n}),addTelemetryDebug("Error reported to customer",{"error.message":n.message})},y=startFeatureFlagContexts(h),b=createPageExitObservable(r),S=b.subscribe(function(n){h.notify(9,n)});f.push(function(){return S.unsubscribe()});var _=canUseEventBridge()?startRumSessionManagerStub():startRumSessionManager(r,h);if(canUseEventBridge())startRumEventBridge(h);else{var w=startRumBatch(r,h,g.observable,reportError,b,_.expireObservable,d);f.push(function(){return w.stop()}),startCustomerDataTelemetry(r,g,h,s,u,y,w.flushObservable)}var C=createDOMMutationObservable(),E=createLocationChangeObservable(r,location),k=startRumEventCollection(h,r,location,_,E,C,function(){return buildCommonContext(s,u,o)},reportError),R=k.viewContexts,A=k.pageStateHistory,I=k.urlContexts,N=k.actionContexts,x=k.addAction,O=k.stop;f.push(O),addTelemetryConfiguration(serializeRumConfiguration(n)),startLongTaskCollection(h,r,_),startResourceCollection(h,r,_,A);var L=startViewCollection(h,r,location,C,E,y,A,o,l),M=L.addTiming,P=L.startView,D=L.stop;f.push(D);var U=startErrorCollection(h,r,A,y).addError;startRequestCollection(h,r,_),startPerformanceCollection(h,r);var F=startInternalContext(r.applicationId,_,R,N,I);return{addAction:x,addError:U,addTiming:M,addFeatureFlagEvaluation:y.addFeatureFlagEvaluation,startView:P,lifeCycle:h,viewContexts:R,session:_,stopSession:function(){return _.expire()},getInternalContext:F.get,stop:function(){f.forEach(function(n){return n()})}}}function startRumTelemetry(n){var r=startTelemetry("browser-rum-sdk",n);if(canUseEventBridge()){var o=getEventBridge();r.observable.subscribe(function(n){return o.send("internal_telemetry",n)})}return r}function startRumEventCollection(n,r,o,s,u,l,d,f){var h=startViewContexts(n),g=startUrlContexts(n,u,o),y=startPageStateHistory(r),b=startActionCollection(n,l,r,y),S=b.addAction,_=b.actionContexts,w=startDisplayContext(r);return startRumAssembly(r,n,s,h,g,_,w,d,f),{viewContexts:h,pageStateHistory:y,urlContexts:g,addAction:S,actionContexts:_,stop:function(){w.stop(),y.stop(),g.stop(),h.stop(),y.stop()}}}function getSessionReplayUrl(n,r){var o=r.session,s=r.viewContext,u=r.errorType,l=o?o.id:"no-session-id",d=[];void 0!==u&&d.push("error-type=".concat(u)),s&&(d.push("seed=".concat(s.id)),d.push("from=".concat(s.startClocks.timeStamp)));var f=getDatadogSiteUrl(n),h="/rum/replay/sessions/".concat(l);return"".concat(f).concat(h,"?").concat(d.join("&"))}function getDatadogSiteUrl(n){var r=n.site,o=n.subdomain||getSiteDefaultSubdomain(n);return"https://".concat(o?"".concat(o,"."):"").concat(r)}function getSiteDefaultSubdomain(n){switch(n.site){case tm:case"datadoghq.eu":return"app";case tp:return"dd";default:return}}var tK={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9},tY={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},tX={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},tJ={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},t$={Play:0,Pause:1};function assembleIncrementalSnapshot(n,r){return{data:polyfills_assign({source:n},r),type:tK.IncrementalSnapshot,timestamp:timeStampNow()}}var tQ={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:th.ALLOW,MASK:th.MASK,MASK_USER_INPUT:th.MASK_USER_INPUT},t0="data-dd-privacy",t1="hidden",t2={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0};function getNodePrivacyLevel(n,r){var o=getParentNode(n),s=o?getNodePrivacyLevel(o,r):r;return reducePrivacyLevel(getNodeSelfPrivacyLevel(n),s)}function reducePrivacyLevel(n,r){switch(r){case tQ.HIDDEN:case tQ.IGNORE:return r}switch(n){case tQ.ALLOW:case tQ.MASK:case tQ.MASK_USER_INPUT:case tQ.HIDDEN:case tQ.IGNORE:return n;default:return r}}function getNodeSelfPrivacyLevel(n){if(isElementNode(n)){var r=n.getAttribute(t0);if("BASE"===n.tagName)return tQ.ALLOW;if("INPUT"===n.tagName){if("password"===n.type||"email"===n.type||"tel"===n.type||"hidden"===n.type)return tQ.MASK;var o=n.getAttribute("autocomplete");if(o&&0===o.indexOf("cc-"))return tQ.MASK}return r===t1||n.classList.contains("dd-privacy-hidden")?tQ.HIDDEN:"mask"===r||n.classList.contains("dd-privacy-mask")?tQ.MASK:"mask-user-input"===r||n.classList.contains("dd-privacy-mask-user-input")?tQ.MASK_USER_INPUT:"allow"===r||n.classList.contains("dd-privacy-allow")?tQ.ALLOW:shouldIgnoreElement(n)?tQ.IGNORE:void 0}}function shouldMaskNode(n,r){switch(r){case tQ.MASK:case tQ.HIDDEN:case tQ.IGNORE:return!0;case tQ.MASK_USER_INPUT:return isTextNode(n)?isFormElement(n.parentNode):isFormElement(n);default:return!1}}function isFormElement(n){if(!n||n.nodeType!==n.ELEMENT_NODE)return!1;if("INPUT"===n.tagName)switch(n.type){case"button":case"color":case"reset":case"submit":return!1}return!!t2[n.tagName]}function getTextContent(n,r,o){var s,u=null===(s=n.parentElement)||void 0===s?void 0:s.tagName,l=n.textContent||"";if(!r||l.trim()){if("SCRIPT"===u)l="***";else if(o===tQ.HIDDEN)l="***";else if(shouldMaskNode(n,o)){if("DATALIST"===u||"SELECT"===u||"OPTGROUP"===u){if(!l.trim())return}else l="OPTION"===u?"***":l.replace(/\S/g,"x")}return l}}function shouldIgnoreElement(n){if("SCRIPT"===n.nodeName)return!0;if("LINK"===n.nodeName){var r=getLowerCaseAttribute("rel");return/preload|prefetch/i.test(r)&&"script"===getLowerCaseAttribute("as")||"shortcut icon"===r||"icon"===r}if("META"===n.nodeName){var o=getLowerCaseAttribute("name"),r=getLowerCaseAttribute("rel"),s=getLowerCaseAttribute("property");return/^msapplication-tile(image|color)$/.test(o)||"application-name"===o||"icon"===r||"apple-touch-icon"===r||"shortcut icon"===r||"keywords"===o||"description"===o||/^(og|twitter|fb):/.test(s)||/^(og|twitter):/.test(o)||"pinterest"===o||"robots"===o||"googlebot"===o||"bingbot"===o||n.hasAttribute("http-equiv")||"author"===o||"generator"===o||"framework"===o||"publisher"===o||"progid"===o||/^article:/.test(s)||/^product:/.test(s)||"google-site-verification"===o||"yandex-verification"===o||"csrf-token"===o||"p:domain_verify"===o||"verify-v1"===o||"verification"===o||"shopify-checkout-api-token"===o}function getLowerCaseAttribute(r){return(n.getAttribute(r)||"").toLowerCase()}return!1}var t5=new WeakMap;function hasSerializedNode(n){return t5.has(n)}function nodeAndAncestorsHaveSerializedNode(n){for(var r=n;r;){if(!hasSerializedNode(r)&&!isNodeShadowRoot(r))return!1;r=getParentNode(r)}return!0}function getSerializedNodeId(n){return t5.get(n)}function setSerializedNodeId(n,r){t5.set(n,r)}function getElementInputValue(n,r){var o=n.tagName,s=n.value;if(shouldMaskNode(n,r)){var u=n.type;if("INPUT"===o&&("button"===u||"submit"===u||"reset"===u))return s;if(!s||"OPTION"===o)return;return"***"}return"OPTION"===o||"SELECT"===o?n.value:"INPUT"===o||"TEXTAREA"===o?s:void 0}var t3=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,t6=/^[A-Za-z]+:|^\/\//,t4=/^data:.*,/i;function switchToAbsoluteUrl(n,r){return n.replace(t3,function(n,o,s,u,l,d){var f=s||l||d;if(!r||!f||t6.test(f)||t4.test(f))return n;var h=o||u||"";return"url(".concat(h).concat(makeUrlAbsolute(f,r)).concat(h,")")})}function makeUrlAbsolute(n,r){try{return buildUrl(n,r).href}catch(r){return n}}var t8=/[^a-z1-6-_]/;function getValidTagName(n){var r=n.toLowerCase().trim();return t8.test(r)?"div":r}function serializeStyleSheets(n){if(void 0!==n&&0!==n.length)return n.map(function(n){return{cssRules:Array.from(n.cssRules||n.rules,function(n){return n.cssText}),disabled:n.disabled||void 0,media:n.media.length>0?Array.from(n.media):void 0}})}function serializeAttribute(n,r,o,s){if(r===tQ.HIDDEN)return null;var u=n.getAttribute(o);if(r===tQ.MASK&&o!==t0&&!tU.includes(o)&&o!==s.actionNameAttribute){var l=n.tagName;switch(o){case"title":case"alt":case"placeholder":return"***"}if(("IMG"===l||"SOURCE"===l)&&("src"===o||"srcset"===o))return"data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==";if("A"===l&&"href"===o||u&&startsWith(o,"data-"))return"***"}return u&&"string"==typeof u&&u.length>1e5&&"data:"===u.slice(0,5)?"data:truncated":u}function serializeAttributes(n,r,o){if(r===tQ.HIDDEN)return{};for(var s,u,l,d={},f=getValidTagName(n.tagName),h=n.ownerDocument,g=0;g<n.attributes.length;g+=1){var y=n.attributes.item(g).name,b=serializeAttribute(n,r,y,o.configuration);null!==b&&(d[y]=b)}if(n.value&&("textarea"===f||"select"===f||"option"===f||"input"===f)){var _=getElementInputValue(n,r);void 0!==_&&(d.value=_)}if("option"===f&&r===tQ.ALLOW&&n.selected&&(d.selected=n.selected),"link"===f){var w=Array.from(h.styleSheets).find(function(r){return r.href===n.href}),C=getCssRulesString(w);C&&w&&!isExperimentalFeatureEnabled(S.DISABLE_REPLAY_INLINE_CSS)&&(d._cssText=C)}if("style"===f&&n.sheet){var C=getCssRulesString(n.sheet);C&&(d._cssText=C)}"input"===f&&("radio"===n.type||"checkbox"===n.type)&&(r===tQ.ALLOW?d.checked=!!n.checked:shouldMaskNode(n,r)&&delete d.checked),("audio"===f||"video"===f)&&(d.rr_mediaState=n.paused?"paused":"played");var E=o.serializationContext;switch(E.status){case 0:u=Math.round(n.scrollTop),l=Math.round(n.scrollLeft),(u||l)&&E.elementsScrollPositions.set(n,{scrollTop:u,scrollLeft:l});break;case 1:E.elementsScrollPositions.has(n)&&(u=(s=E.elementsScrollPositions.get(n)).scrollTop,l=s.scrollLeft)}return l&&(d.rr_scrollLeft=l),u&&(d.rr_scrollTop=u),d}function getCssRulesString(n){var r;if(!n)return null;try{r=n.rules||n.cssRules}catch(n){}return r?switchToAbsoluteUrl(Array.from(r,isSafari()?getCssRuleStringForSafari:getCssRuleString).join(""),n.href):null}function getCssRuleStringForSafari(n){return isCSSStyleRule(n)&&n.selectorText.includes(":")?n.cssText.replace(/(\[[\w-]+[^\\])(:[^\]]+\])/g,"$1\\$2"):getCssRuleString(n)}function getCssRuleString(n){return isCSSImportRule(n)&&getCssRulesString(n.styleSheet)||n.cssText}function isCSSImportRule(n){return"styleSheet"in n}function isCSSStyleRule(n){return"selectorText"in n}function serializeNodeWithId(n,r){var o=serializeNode(n,r);if(!o)return null;var s=getSerializedNodeId(n)||generateNextId();return o.id=s,setSerializedNodeId(n,s),r.serializedNodeIds&&r.serializedNodeIds.add(s),o}var t9=1;function generateNextId(){return t9++}function serializeChildNodes(n,r){var o=[];return forEachChildNodes(n,function(n){var s=serializeNodeWithId(n,r);s&&o.push(s)}),o}function serializeNode(n,r){switch(n.nodeType){case n.DOCUMENT_NODE:return serializeDocumentNode(n,r);case n.DOCUMENT_FRAGMENT_NODE:return serializeDocumentFragmentNode(n,r);case n.DOCUMENT_TYPE_NODE:return serializeDocumentTypeNode(n);case n.ELEMENT_NODE:return serializeElementNode(n,r);case n.TEXT_NODE:return serializeTextNode(n,r);case n.CDATA_SECTION_NODE:return serializeCDataNode()}}function serializeDocumentNode(n,r){return{type:tY.Document,childNodes:serializeChildNodes(n,r),adoptedStyleSheets:serializeStyleSheets(n.adoptedStyleSheets)}}function serializeDocumentFragmentNode(n,r){var o=isNodeShadowRoot(n);return o&&r.serializationContext.shadowRootsController.addShadowRoot(n),{type:tY.DocumentFragment,childNodes:serializeChildNodes(n,r),isShadowRoot:o,adoptedStyleSheets:o?serializeStyleSheets(n.adoptedStyleSheets):void 0}}function serializeDocumentTypeNode(n){return{type:tY.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId}}function serializeElementNode(n,r){var o,s=getValidTagName(n.tagName),u=isSVGElement(n)||void 0,l=reducePrivacyLevel(getNodeSelfPrivacyLevel(n),r.parentNodePrivacyLevel);if(l===tQ.HIDDEN){var d=n.getBoundingClientRect(),f=d.width,h=d.height;return{type:tY.Element,tagName:s,attributes:((o={rr_width:"".concat(f,"px"),rr_height:"".concat(h,"px")})[t0]=t1,o),childNodes:[],isSVG:u}}if(l!==tQ.IGNORE){var g=serializeAttributes(n,l,r),y=[];return hasChildNodes(n)&&"style"!==s&&(y=serializeChildNodes(n,r.parentNodePrivacyLevel===l&&r.ignoreWhiteSpace===("head"===s)?r:polyfills_assign({},r,{parentNodePrivacyLevel:l,ignoreWhiteSpace:"head"===s}))),{type:tY.Element,tagName:s,attributes:g,childNodes:y,isSVG:u}}}function isSVGElement(n){return"svg"===n.tagName||n instanceof SVGElement}function serializeTextNode(n,r){var o=getTextContent(n,r.ignoreWhiteSpace||!1,r.parentNodePrivacyLevel);if(void 0!==o)return{type:tY.Text,textContent:o}}function serializeCDataNode(){return{type:tY.CDATA,textContent:""}}function serializeDocument(n,r,o){return serializeNodeWithId(n,{serializationContext:o,parentNodePrivacyLevel:r.defaultPrivacyLevel,configuration:r})}function isTouchEvent(n){return!!n.changedTouches}function getEventTarget(n){return!0===n.composed&&isNodeShadowHost(n.target)?n.composedPath()[0]:n.target}function isVisualViewportFactoredIn(n){return Math.abs(n.pageTop-n.offsetTop-window.scrollY)>25||Math.abs(n.pageLeft-n.offsetLeft-window.scrollX)>25}var convertMouseEventToLayoutCoordinates=function(n,r){var o=window.visualViewport,s={layoutViewportX:n,layoutViewportY:r,visualViewportX:n,visualViewportY:r};return o&&(isVisualViewportFactoredIn(o)?(s.layoutViewportX=Math.round(n+o.offsetLeft),s.layoutViewportY=Math.round(r+o.offsetTop)):(s.visualViewportX=Math.round(n-o.offsetLeft),s.visualViewportY=Math.round(r-o.offsetTop))),s},getVisualViewport=function(n){return{scale:n.scale,offsetLeft:n.offsetLeft,offsetTop:n.offsetTop,pageLeft:n.pageLeft,pageTop:n.pageTop,height:n.height,width:n.width}};function initMoveObserver(n,r){var o=throttle(function(n){var o=getEventTarget(n);if(hasSerializedNode(o)){var s=tryToComputeCoordinates(n);if(!s)return;r([{id:getSerializedNodeId(o),timeOffset:0,x:s.x,y:s.y}],isTouchEvent(n)?tX.TouchMove:tX.MouseMove)}},50,{trailing:!1}).throttled;return addEventListeners(n,document,[b.MOUSE_MOVE,b.TOUCH_MOVE],o,{capture:!0,passive:!0}).stop}function tryToComputeCoordinates(n){var r=isTouchEvent(n)?n.changedTouches[0]:n,o=r.clientX,s=r.clientY;if(window.visualViewport){var u=convertMouseEventToLayoutCoordinates(o,s),l=u.visualViewportX,d=u.visualViewportY;o=l,s=d}if(!Number.isFinite(o)||!Number.isFinite(s)){n.isTrusted&&addTelemetryDebug("mouse/touch event without x/y");return}return{x:o,y:s}}function initScrollObserver(n,r,o,s){var u=throttle(function(n){var u=getEventTarget(n);if(u&&getNodePrivacyLevel(u,o)!==tQ.HIDDEN&&hasSerializedNode(u)){var l=getSerializedNodeId(u),d=u===document?{scrollTop:getScrollY(),scrollLeft:getScrollX()}:{scrollTop:Math.round(u.scrollTop),scrollLeft:Math.round(u.scrollLeft)};s.set(u,d),r({id:l,x:d.scrollLeft,y:d.scrollTop})}},100).throttled;return addEventListener(n,document,b.SCROLL,u,{capture:!0,passive:!0}).stop}var t7=((F={})[b.POINTER_UP]=tJ.MouseUp,F[b.MOUSE_DOWN]=tJ.MouseDown,F[b.CLICK]=tJ.Click,F[b.CONTEXT_MENU]=tJ.ContextMenu,F[b.DBL_CLICK]=tJ.DblClick,F[b.FOCUS]=tJ.Focus,F[b.BLUR]=tJ.Blur,F[b.TOUCH_START]=tJ.TouchStart,F[b.TOUCH_END]=tJ.TouchEnd,F);function initMouseInteractionObserver(n,r,o){return addEventListeners(n,document,Object.keys(t7),function(s){var u,l=getEventTarget(s);if(getNodePrivacyLevel(l,n.defaultPrivacyLevel)!==tQ.HIDDEN&&hasSerializedNode(l)){var d=getSerializedNodeId(l),f=t7[s.type];if(f!==tJ.Blur&&f!==tJ.Focus){var h=tryToComputeCoordinates(s);if(!h)return;u={id:d,type:f,x:h.x,y:h.y}}else u={id:d,type:f};r(polyfills_assign({id:o.getIdForEvent(s)},assembleIncrementalSnapshot(tX.MouseInteraction,u)))}},{capture:!0,passive:!0}).stop}function initInputObserver(n,r,o){void 0===o&&(o=document);var s,u=n.defaultPrivacyLevel,l=new WeakMap,d=o!==document,f=addEventListeners(n,o,d?[b.CHANGE]:[b.INPUT,b.CHANGE],function(n){var r=getEventTarget(n);(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&onElementChange(r)},{capture:!0,passive:!0}).stop;if(d)s=noop;else{var h=[instrumentSetter(HTMLInputElement.prototype,"value",onElementChange),instrumentSetter(HTMLInputElement.prototype,"checked",onElementChange),instrumentSetter(HTMLSelectElement.prototype,"value",onElementChange),instrumentSetter(HTMLTextAreaElement.prototype,"value",onElementChange),instrumentSetter(HTMLSelectElement.prototype,"selectedIndex",onElementChange)];s=function(){h.forEach(function(n){return n.stop()})}}return function(){s(),f()};function onElementChange(n){var r,o=getNodePrivacyLevel(n,u);if(o!==tQ.HIDDEN){var s=n.type;if("radio"===s||"checkbox"===s){if(shouldMaskNode(n,o))return;r={isChecked:n.checked}}else{var l=getElementInputValue(n,o);if(void 0===l)return;r={text:l}}cbWithDedup(n,r);var d=n.name;"radio"===s&&d&&n.checked&&forEach(document.querySelectorAll('input[type="radio"][name="'.concat(cssEscape(d),'"]')),function(r){r!==n&&cbWithDedup(r,{isChecked:!1})})}}function cbWithDedup(n,o){if(hasSerializedNode(n)){var s=l.get(n);s&&s.text===o.text&&s.isChecked===o.isChecked||(l.set(n,o),r(polyfills_assign({id:getSerializedNodeId(n)},o)))}}}function initStyleSheetObserver(n){function checkStyleSheetAndCallback(n,r){n&&hasSerializedNode(n.ownerNode)&&r(getSerializedNodeId(n.ownerNode))}var r=[instrumentMethodAndCallOriginal(CSSStyleSheet.prototype,"insertRule",{before:function(r,o){checkStyleSheetAndCallback(this,function(s){return n({id:s,adds:[{rule:r,index:o}]})})}}),instrumentMethodAndCallOriginal(CSSStyleSheet.prototype,"deleteRule",{before:function(r){checkStyleSheetAndCallback(this,function(o){return n({id:o,removes:[{index:r}]})})}})];function instrumentGroupingCSSRuleClass(o){r.push(instrumentMethodAndCallOriginal(o.prototype,"insertRule",{before:function(r,o){var s=this;checkStyleSheetAndCallback(this.parentStyleSheet,function(u){var l=getPathToNestedCSSRule(s);l&&(l.push(o||0),n({id:u,adds:[{rule:r,index:l}]}))})}}),instrumentMethodAndCallOriginal(o.prototype,"deleteRule",{before:function(r){var o=this;checkStyleSheetAndCallback(this.parentStyleSheet,function(s){var u=getPathToNestedCSSRule(o);u&&(u.push(r),n({id:s,removes:[{index:u}]}))})}}))}return"undefined"!=typeof CSSGroupingRule?instrumentGroupingCSSRuleClass(CSSGroupingRule):(instrumentGroupingCSSRuleClass(CSSMediaRule),instrumentGroupingCSSRuleClass(CSSSupportsRule)),function(){return r.forEach(function(n){return n.stop()})}}function getPathToNestedCSSRule(n){for(var r=[],o=n;o.parentRule;){var s=Array.from(o.parentRule.cssRules).indexOf(o);r.unshift(s),o=o.parentRule}if(o.parentStyleSheet){var u=Array.from(o.parentStyleSheet.cssRules).indexOf(o);return r.unshift(u),r}}function initMediaInteractionObserver(n,r,o){return addEventListeners(n,document,[b.PLAY,b.PAUSE],function(n){var s=getEventTarget(n);s&&getNodePrivacyLevel(s,o)!==tQ.HIDDEN&&hasSerializedNode(s)&&r({id:getSerializedNodeId(s),type:n.type===b.PLAY?t$.Play:t$.Pause})},{capture:!0,passive:!0}).stop}function initFrustrationObserver(n,r,o){return n.subscribe(10,function(n){var s,u,l;"action"===n.rawRumEvent.type&&"click"===n.rawRumEvent.action.type&&(null===(u=null===(s=n.rawRumEvent.action.frustration)||void 0===s?void 0:s.type)||void 0===u?void 0:u.length)&&"events"in n.domainContext&&(null===(l=n.domainContext.events)||void 0===l?void 0:l.length)&&r({timestamp:n.rawRumEvent.date,type:tK.FrustrationRecord,data:{frustrationTypes:n.rawRumEvent.action.frustration.type,recordIds:n.domainContext.events.map(function(n){return o.getIdForEvent(n)})}})}).unsubscribe}function initViewportResizeObserver(n,r){return(M||(M=createViewportObservable(n)),M).subscribe(r).unsubscribe}function initVisualViewportResizeObserver(n,r){var o=window.visualViewport;if(!o)return noop;var s=throttle(function(){r(getVisualViewport(o))},200,{trailing:!1}),u=s.throttled,l=s.cancel,d=addEventListeners(n,o,[b.RESIZE,b.SCROLL],u,{capture:!0,passive:!0}).stop;return function(){d(),l()}}function createMutationBatch(n){var r=noop,o=[];function flush(){r(),n(o),o=[]}return{addMutations:function(n){0===o.length&&(r=requestIdleCallback(flush,{timeout:100})),o.push.apply(o,n)},flush:flush,stop:function(){r()}}}function requestIdleCallback(n,r){if(window.requestIdleCallback&&window.cancelIdleCallback){var o=window.requestIdleCallback(monitor(n),r);return function(){return window.cancelIdleCallback(o)}}var s=window.requestAnimationFrame(monitor(n));return function(){return window.cancelAnimationFrame(s)}}function initMutationObserver(n,r,o,s){var u=getMutationObserverConstructor();if(!u)return{stop:noop,flush:noop};var l=createMutationBatch(function(s){processMutations(s.concat(d.takeRecords()),n,r,o)}),d=new u(monitor(l.addMutations));return d.observe(s,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:function(){d.disconnect(),l.stop()},flush:function(){l.flush()}}}function processMutations(n,r,o,s){n.filter(function(n){return"childList"===n.type}).forEach(function(n){n.removedNodes.forEach(function(n){traverseRemovedShadowDom(n,s.removeShadowRoot)})});var u=n.filter(function(n){return n.target.isConnected&&nodeAndAncestorsHaveSerializedNode(n.target)&&getNodePrivacyLevel(n.target,o.defaultPrivacyLevel)!==tQ.HIDDEN}),l=processChildListMutations(u.filter(function(n){return"childList"===n.type}),o,s),d=l.adds,f=l.removes,h=l.hasBeenSerialized,g=processCharacterDataMutations(u.filter(function(n){return"characterData"===n.type&&!h(n.target)}),o),y=processAttributesMutations(u.filter(function(n){return"attributes"===n.type&&!h(n.target)}),o);(g.length||y.length||f.length||d.length)&&r({adds:d,removes:f,texts:g,attributes:y})}function processChildListMutations(n,r,o){for(var s=new Set,u=new Map,_loop_1=function(n){n.addedNodes.forEach(function(n){s.add(n)}),n.removedNodes.forEach(function(r){s.has(r)||u.set(r,n.target),s.delete(r)})},l=0;l<n.length;l++)_loop_1(n[l]);var d=Array.from(s);sortAddedAndMovedNodes(d);for(var f=new Set,h=[],g=0;g<d.length;g++){var y=d[g];if(!hasBeenSerialized(y)){var b=getNodePrivacyLevel(y.parentNode,r.defaultPrivacyLevel);if(b!==tQ.HIDDEN&&b!==tQ.IGNORE){var S=serializeNodeWithId(y,{serializedNodeIds:f,parentNodePrivacyLevel:b,serializationContext:{status:2,shadowRootsController:o},configuration:r});if(S){var _=getParentNode(y);h.push({nextId:getNextSibling(y),parentId:getSerializedNodeId(_),node:S})}}}}var w=[];return u.forEach(function(n,r){hasSerializedNode(r)&&w.push({parentId:getSerializedNodeId(n),id:getSerializedNodeId(r)})}),{adds:h,removes:w,hasBeenSerialized:hasBeenSerialized};function hasBeenSerialized(n){return hasSerializedNode(n)&&f.has(getSerializedNodeId(n))}function getNextSibling(n){for(var r=n.nextSibling;r;){if(hasSerializedNode(r))return getSerializedNodeId(r);r=r.nextSibling}return null}}function processCharacterDataMutations(n,r){for(var o,s=[],u=new Set,l=n.filter(function(n){return!u.has(n.target)&&(u.add(n.target),!0)}),d=0;d<l.length;d++){var f=l[d];if(f.target.textContent!==f.oldValue){var h=getNodePrivacyLevel(getParentNode(f.target),r.defaultPrivacyLevel);h!==tQ.HIDDEN&&h!==tQ.IGNORE&&s.push({id:getSerializedNodeId(f.target),value:null!==(o=getTextContent(f.target,!1,h))&&void 0!==o?o:null})}}return s}function processAttributesMutations(n,r){for(var o=[],s=new Map,u=n.filter(function(n){var r=s.get(n.target);return(null==r||!r.has(n.attributeName))&&(r?r.add(n.attributeName):s.set(n.target,new Set([n.attributeName])),!0)}),l=new Map,d=0;d<u.length;d++){var f=u[d];if(f.target.getAttribute(f.attributeName)!==f.oldValue){var h=getNodePrivacyLevel(f.target,r.defaultPrivacyLevel),g=serializeAttribute(f.target,h,f.attributeName,r),y=void 0;if("value"===f.attributeName){var b=getElementInputValue(f.target,h);if(void 0===b)continue;y=b}else y="string"==typeof g?g:null;var S=l.get(f.target);S||(S={id:getSerializedNodeId(f.target),attributes:{}},o.push(S),l.set(f.target,S)),S.attributes[f.attributeName]=y}}return o}function sortAddedAndMovedNodes(n){n.sort(function(n,r){var o=n.compareDocumentPosition(r);return o&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:o&Node.DOCUMENT_POSITION_CONTAINS?1:o&Node.DOCUMENT_POSITION_FOLLOWING?1:o&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}function traverseRemovedShadowDom(n,r){isNodeShadowHost(n)&&r(n.shadowRoot),forEachChildNodes(n,function(n){return traverseRemovedShadowDom(n,r)})}function initFocusObserver(n,r){return addEventListeners(n,window,[b.FOCUS,b.BLUR],function(){r({has_focus:document.hasFocus()})}).stop}function initRecordIds(){var n=new WeakMap,r=1;return{getIdForEvent:function(o){return n.has(o)||n.set(o,r++),n.get(o)}}}function initObservers(n,r){var o=initRecordIds(),s=initMutationObserver(r.mutationCb,r.configuration,r.shadowRootsController,document),u=initMoveObserver(n,r.mousemoveCb),l=initMouseInteractionObserver(n,r.mouseInteractionCb,o),d=initScrollObserver(n,r.scrollCb,r.configuration.defaultPrivacyLevel,r.elementsScrollPositions),f=initViewportResizeObserver(n,r.viewportResizeCb),h=initInputObserver(n,r.inputCb),g=initMediaInteractionObserver(n,r.mediaInteractionCb,r.configuration.defaultPrivacyLevel),y=initStyleSheetObserver(r.styleSheetCb),b=initFocusObserver(n,r.focusCb),S=initVisualViewportResizeObserver(n,r.visualViewportResizeCb),_=initFrustrationObserver(r.lifeCycle,r.frustrationCb,o);return{flush:function(){s.flush()},stop:function(){s.stop(),u(),l(),d(),f(),h(),g(),y(),b(),S(),_()}}}function createElementsScrollPositions(){var n=new WeakMap;return{set:function(r,o){(r!==document||document.scrollingElement)&&n.set(r===document?document.scrollingElement:r,o)},get:function(r){return n.get(r)},has:function(r){return n.has(r)}}}var initShadowRootsController=function(n,r){var o=r.mutationCb,s=r.inputCb,u=new Map,l={addShadowRoot:function(r){var d=initMutationObserver(o,n,l,r),f=d.stop,h=d.flush,g=initInputObserver(n,s,r);u.set(r,{flush:h,stop:function(){f(),g()}})},removeShadowRoot:function(n){var r=u.get(n);r&&(r.stop(),u.delete(n))},stop:function(){u.forEach(function(n){return(0,n.stop)()})},flush:function(){u.forEach(function(n){return(0,n.flush)()})}};return l};function record(n){var r=n.emit,o=n.configuration;if(!r)throw Error("emit function is required");var s=createElementsScrollPositions(),mutationCb=function(n){r(assembleIncrementalSnapshot(tX.Mutation,n))},inputCb=function(n){return r(assembleIncrementalSnapshot(tX.Input,n))},u=initShadowRootsController(o,{mutationCb:mutationCb,inputCb:inputCb}),takeFullSnapshot=function(n,l){void 0===n&&(n=timeStampNow()),void 0===l&&(l={status:0,elementsScrollPositions:s,shadowRootsController:u});var d=getViewportDimension(),f=d.width;r({data:{height:d.height,href:window.location.href,width:f},type:tK.Meta,timestamp:n}),r({data:{has_focus:document.hasFocus()},type:tK.Focus,timestamp:n}),r({data:{node:serializeDocument(document,o,l),initialOffset:{left:getScrollX(),top:getScrollY()}},type:tK.FullSnapshot,timestamp:n}),window.visualViewport&&r({data:getVisualViewport(window.visualViewport),type:tK.VisualViewport,timestamp:n})};takeFullSnapshot();var l=initObservers(o,{lifeCycle:n.lifeCycle,configuration:o,elementsScrollPositions:s,inputCb:inputCb,mediaInteractionCb:function(n){return r(assembleIncrementalSnapshot(tX.MediaInteraction,n))},mouseInteractionCb:function(n){return r(n)},mousemoveCb:function(n,o){return r(assembleIncrementalSnapshot(o,{positions:n}))},mutationCb:mutationCb,scrollCb:function(n){return r(assembleIncrementalSnapshot(tX.Scroll,n))},styleSheetCb:function(n){return r(assembleIncrementalSnapshot(tX.StyleSheetRule,n))},viewportResizeCb:function(n){return r(assembleIncrementalSnapshot(tX.ViewportResize,n))},frustrationCb:function(n){return r(n)},focusCb:function(n){return r({data:n,type:tK.Focus,timestamp:timeStampNow()})},visualViewportResizeCb:function(n){r({data:n,type:tK.VisualViewport,timestamp:timeStampNow()})},shadowRootsController:u}),d=l.stop,f=l.flush;function flushMutations(){u.flush(),f()}return{stop:function(){u.stop(),d()},takeSubsequentFullSnapshot:function(n){flushMutations(),takeFullSnapshot(n,{shadowRootsController:u,status:1,elementsScrollPositions:s})},flushMutations:flushMutations,shadowRootsController:u}}function buildReplayPayload(n,r,o){var s=new FormData;s.append("segment",new Blob([n],{type:"application/octet-stream"}),"".concat(r.session.id,"-").concat(r.start));var u=JSON.stringify(polyfills_assign({raw_segment_size:o,compressed_segment_size:n.byteLength},r));return s.append("event",new Blob([u],{type:"application/json"})),{data:s,bytesCount:n.byteLength}}function getSegmentsCount(n){return getOrCreateReplayStats(n).segments_count}function addSegment(n){getOrCreateReplayStats(n).segments_count+=1}function addRecord(n){getOrCreateReplayStats(n).records_count+=1}function addWroteData(n,r){getOrCreateReplayStats(n).segments_total_raw_size+=r}function getReplayStats(n){return null==z?void 0:z.get(n)}function getOrCreateReplayStats(n){var r;return z||(z=new Map),z.has(n)?r=z.get(n):(r={records_count:0,segments_count:0,segments_total_raw_size:0},z.set(n,r),z.size>10&&deleteOldestStats()),r}function deleteOldestStats(){if(z){if(z.keys)z.delete(z.keys().next().value);else{var n=!0;z.forEach(function(r,o){n&&(z.delete(o),n=!1)})}}}var et=function(){function Segment(n,r,o){this.encoder=n,this.encodedBytesCount=0;var s=r.view.id;this.metadata=polyfills_assign({start:1/0,end:-1/0,creation_reason:o,records_count:0,has_full_snapshot:!1,index_in_view:getSegmentsCount(s),source:"browser"},r),addSegment(s)}return Segment.prototype.addRecord=function(n,r){var o,s=this;this.metadata.start=Math.min(this.metadata.start,n.timestamp),this.metadata.end=Math.max(this.metadata.end,n.timestamp),this.metadata.records_count+=1,(o=this.metadata).has_full_snapshot||(o.has_full_snapshot=n.type===tK.FullSnapshot),sendToExtension("record",{record:n,segment:this.metadata}),addRecord(this.metadata.view.id);var u=this.encoder.isEmpty?'{"records":[':",";this.encoder.write(u+JSON.stringify(n),function(n){s.encodedBytesCount+=n,r(s.encodedBytesCount)})},Segment.prototype.flush=function(n){var r=this;if(this.encoder.isEmpty)throw Error("Empty segment flushed");this.encoder.write("],".concat(JSON.stringify(this.metadata).slice(1),"\n")),this.encoder.finish(function(o){addWroteData(r.metadata.view.id,o.rawBytesCount),n(r.metadata,o)})},Segment}();function startSegmentCollection(n,r,o,s,u,l){return doStartSegmentCollection(n,function(){return computeSegmentContext(r.applicationId,o,s)},u,l)}function doStartSegmentCollection(n,r,o,s){var u={status:0,nextSegmentCreationReason:"init"},l=n.subscribe(2,function(){flushSegment("view_change")}).unsubscribe,d=n.subscribe(9,function(n){flushSegment(n.reason)}).unsubscribe;function flushSegment(n){1===u.status&&(u.segment.flush(function(r,s){var u=buildReplayPayload(s.output,r,s.rawBytesCount);includes(objectValues(tC),n)?o.sendOnExit(u):o.send(u)}),timer_clearTimeout(u.expirationTimeoutId)),u="stop"!==n?{status:0,nextSegmentCreationReason:n}:{status:2}}return{addRecord:function(n){if(2!==u.status){if(0===u.status){var o=r();if(!o)return;u={status:1,segment:new et(s,o,u.nextSegmentCreationReason),expirationTimeoutId:timer_setTimeout(function(){flushSegment("segment_duration_limit")},3e4)}}u.segment.addRecord(n,function(n){n>6e4&&flushSegment("segment_bytes_limit")})}},stop:function(){flushSegment("stop"),l(),d()}}}function computeSegmentContext(n,r,o){var s=r.findTrackedSession(),u=o.findView();if(s&&u)return{application:{id:n},session:{id:s.id},view:{id:u.id}}}function isBrowserSupported(){return"function"==typeof Array.from&&"function"==typeof CSSSupportsRule&&"function"==typeof URL.createObjectURL&&"forEach"in NodeList.prototype}function getSessionReplayLink(n,r,o,s){var u=r.findTrackedSession(),l=getErrorType(u,s);return getSessionReplayUrl(n,{viewContext:o.findView(),errorType:l,session:u})}function getErrorType(n,r){return isBrowserSupported()?n?n.sessionReplayAllowed?r?void 0:"replay-not-started":"incorrect-session-plan":"rum-not-tracked":"browser-not-supported"}function createDeflateEncoder(n,r,o){var s,u=0,l=[],d=0,f=[],h=addEventListener(n,r,"message",function(n){var r=n.data;if("wrote"===r.type&&r.streamId===o){u+=r.additionalBytesCount,l.push(r.result),s=r.trailer;var d=f.shift();d&&d.id===r.id?d.writeCallback?d.writeCallback(r.result.byteLength):d.finishCallback&&d.finishCallback():(h(),addTelemetryDebug("Worker responses received out of order."))}}).stop;function consumeResult(){var n=0===l.length?new Uint8Array(0):concatBuffers(l.concat(s)),r={rawBytesCount:u,output:n,outputBytesCount:n.byteLength,encoding:"deflate"};return u=0,l=[],r}function sendResetIfNeeded(){d>0&&(r.postMessage({action:"reset",streamId:o}),d=0)}return{isAsync:!0,get isEmpty(){return 0===d},write:function(n,s){r.postMessage({action:"write",id:d,data:n,streamId:o}),f.push({id:d,writeCallback:s,data:n}),d+=1},finish:function(n){sendResetIfNeeded(),f.length?(f.forEach(function(n){delete n.writeCallback}),f[f.length-1].finishCallback=function(){return n(consumeResult())}):n(consumeResult())},finishSync:function(){sendResetIfNeeded();var n=f.map(function(n){return delete n.writeCallback,delete n.finishCallback,n.data}).join("");return polyfills_assign(consumeResult(),{pendingData:n})},estimateEncodedBytesCount:function(n){return n.length/8},stop:function(){h()}}}function createDeflateWorker(n){return new Worker(n.workerUrl||URL.createObjectURL(new Blob(['!function(){"use strict";function t(t){for(var e=t.reduce((function(t,e){return t+e.length}),0),a=new Uint8Array(e),n=0,r=0,i=t;r<i.length;r++){var s=i[r];a.set(s,n),n+=s.length}return a}function e(t){for(var e=t.length;--e>=0;)t[e]=0}var a=256,n=286,r=30,i=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),_=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),o=new Array(576);e(o);var d=new Array(60);e(d);var u=new Array(512);e(u);var f=new Array(256);e(f);var c=new Array(29);e(c);var p,g,w,v=new Array(r);function b(t,e,a,n,r){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=r,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(v);var y=function(t){return t<256?u[t]:u[256+(t>>>7)]},k=function(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},z=function(t,e,a){t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},x=function(t,e,a){z(t,a[2*e],a[2*e+1])},A=function(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},E=function(t,e,a){var n,r,s=new Array(16),_=0;for(n=1;n<=i;n++)s[n]=_=_+a[n-1]<<1;for(r=0;r<=e;r++){var h=t[2*r+1];0!==h&&(t[2*r]=A(s[h]++,h))}},Z=function(t){var e;for(e=0;e<n;e++)t.dyn_ltree[2*e]=0;for(e=0;e<r;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},U=function(t){t.bi_valid>8?k(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},S=function(t,e,a,n){var r=2*e,i=2*a;return t[r]<t[i]||t[r]===t[i]&&n[e]<=n[a]},R=function(t,e,a){for(var n=t.heap[a],r=a<<1;r<=t.heap_len&&(r<t.heap_len&&S(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!S(e,n,t.heap[r],t.depth));)t.heap[a]=t.heap[r],a=r,r<<=1;t.heap[a]=n},L=function(t,e,n){var r,i,h,l,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?x(t,i,e):(h=f[i],x(t,h+a+1,e),0!==(l=s[h])&&(i-=c[h],z(t,i,l)),r--,h=y(r),x(t,h,n),0!==(l=_[h])&&(r-=v[h],z(t,r,l)))}while(o<t.last_lit);x(t,256,e)},F=function(t,e){var a,n,r,s=e.dyn_tree,_=e.stat_desc.static_tree,h=e.stat_desc.has_stree,l=e.stat_desc.elems,o=-1;for(t.heap_len=0,t.heap_max=573,a=0;a<l;a++)0!==s[2*a]?(t.heap[++t.heap_len]=o=a,t.depth[a]=0):s[2*a+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=o<2?++o:0)]=1,t.depth[r]=0,t.opt_len--,h&&(t.static_len-=_[2*r+1]);for(e.max_code=o,a=t.heap_len>>1;a>=1;a--)R(t,s,a);r=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],R(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,s[2*r]=s[2*a]+s[2*n],t.depth[r]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,s[2*a+1]=s[2*n+1]=r,t.heap[1]=r++,R(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,r,s,_,h,l=e.dyn_tree,o=e.max_code,d=e.stat_desc.static_tree,u=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(s=0;s<=i;s++)t.bl_count[s]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<573;a++)(s=l[2*l[2*(n=t.heap[a])+1]+1]+1)>p&&(s=p,g++),l[2*n+1]=s,n>o||(t.bl_count[s]++,_=0,n>=c&&(_=f[n-c]),h=l[2*n],t.opt_len+=h*(s+_),u&&(t.static_len+=h*(d[2*n+1]+_)));if(0!==g){do{for(s=p-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(s=p;0!==s;s--)for(n=t.bl_count[s];0!==n;)(r=t.heap[--a])>o||(l[2*r+1]!==s&&(t.opt_len+=(s-l[2*r+1])*l[2*r],l[2*r+1]=s),n--)}}(t,e),E(s,o,t.bl_count)},T=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)r=s,s=e[2*(n+1)+1],++_<h&&r===s||(_<l?t.bl_tree[2*r]+=_:0!==r?(r!==i&&t.bl_tree[2*r]++,t.bl_tree[32]++):_<=10?t.bl_tree[34]++:t.bl_tree[36]++,_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))},I=function(t,e,a){var n,r,i=-1,s=e[1],_=0,h=7,l=4;for(0===s&&(h=138,l=3),n=0;n<=a;n++)if(r=s,s=e[2*(n+1)+1],!(++_<h&&r===s)){if(_<l)do{x(t,r,t.bl_tree)}while(0!=--_);else 0!==r?(r!==i&&(x(t,r,t.bl_tree),_--),x(t,16,t.bl_tree),z(t,_-3,2)):_<=10?(x(t,17,t.bl_tree),z(t,_-3,3)):(x(t,18,t.bl_tree),z(t,_-11,7));_=0,i=r,0===s?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}},N=!1,O=function(t,e,a,n){z(t,0+(n?1:0),3),function(t,e,a,n){U(t),n&&(k(t,a),k(t,~a)),t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a}(t,e,a,!0)},D=function(t,e,n,r){var i,s,_=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<a;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),F(t,t.l_desc),F(t,t.d_desc),_=function(t){var e;for(T(t,t.dyn_ltree,t.l_desc.max_code),T(t,t.dyn_dtree,t.d_desc.max_code),F(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*l[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=n+5,n+4<=i&&-1!==e?O(t,e,n,r):4===t.strategy||s===i?(z(t,2+(r?1:0),3),L(t,o,d)):(z(t,4+(r?1:0),3),function(t,e,a,n){var r;for(z(t,e-257,5),z(t,a-1,5),z(t,n-4,4),r=0;r<n;r++)z(t,t.bl_tree[2*l[r]+1],3);I(t,t.dyn_ltree,e-1),I(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,_+1),L(t,t.dyn_ltree,t.dyn_dtree)),Z(t),r&&U(t)},B={_tr_init:function(t){N||(!function(){var t,e,a,l,m,y=new Array(16);for(a=0,l=0;l<28;l++)for(c[l]=a,t=0;t<1<<s[l];t++)f[a++]=l;for(f[a-1]=l,m=0,l=0;l<16;l++)for(v[l]=m,t=0;t<1<<_[l];t++)u[m++]=l;for(m>>=7;l<r;l++)for(v[l]=m<<7,t=0;t<1<<_[l]-7;t++)u[256+m++]=l;for(e=0;e<=i;e++)y[e]=0;for(t=0;t<=143;)o[2*t+1]=8,t++,y[8]++;for(;t<=255;)o[2*t+1]=9,t++,y[9]++;for(;t<=279;)o[2*t+1]=7,t++,y[7]++;for(;t<=287;)o[2*t+1]=8,t++,y[8]++;for(E(o,287,y),t=0;t<r;t++)d[2*t+1]=5,d[2*t]=A(t,5);p=new b(o,s,257,n,i),g=new b(d,_,0,r,i),w=new b(new Array(0),h,0,19,7)}(),N=!0),t.l_desc=new m(t.dyn_ltree,p),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,Z(t)},_tr_stored_block:O,_tr_flush_block:D,_tr_tally:function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(f[n]+a+1)]++,t.dyn_dtree[2*y(e)]++),t.last_lit===t.lit_bufsize-1},_tr_align:function(t){z(t,2,3),x(t,256,o),function(t){16===t.bi_valid?(k(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},C=function(t,e,a,n){for(var r=65535&t|0,i=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{i=i+(r=r+e[n++]|0)|0}while(--s);r%=65521,i%=65521}return r|i<<16|0},H=new Uint32Array(function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}()),M=function(t,e,a,n){var r=H,i=n+a;t^=-1;for(var s=n;s<i;s++)t=t>>>8^r[255&(t^e[s])];return-1^t},Y={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},P=B._tr_init,j=B._tr_stored_block,G=B._tr_flush_block,X=B._tr_tally,W=B._tr_align,q=K.Z_NO_FLUSH,J=K.Z_PARTIAL_FLUSH,Q=K.Z_FULL_FLUSH,V=K.Z_FINISH,$=K.Z_BLOCK,tt=K.Z_OK,et=K.Z_STREAM_END,at=K.Z_STREAM_ERROR,nt=K.Z_DATA_ERROR,rt=K.Z_BUF_ERROR,it=K.Z_DEFAULT_COMPRESSION,st=K.Z_FILTERED,_t=K.Z_HUFFMAN_ONLY,ht=K.Z_RLE,lt=K.Z_FIXED,ot=K.Z_DEFAULT_STRATEGY,dt=K.Z_UNKNOWN,ut=K.Z_DEFLATED,ft=258,ct=262,pt=103,gt=113,wt=666,vt=function(t,e){return t.msg=Y[e],e},bt=function(t){return(t<<1)-(t>4?9:0)},mt=function(t){for(var e=t.length;--e>=0;)t[e]=0},yt=function(t,e,a){return(e<<t.hash_shift^a)&t.hash_mask},kt=function(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},zt=function(t,e){G(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,kt(t.strm)},xt=function(t,e){t.pending_buf[t.pending++]=e},At=function(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},Et=function(t,e){var a,n,r=t.max_chain_length,i=t.strstart,s=t.prev_length,_=t.nice_match,h=t.strstart>t.w_size-ct?t.strstart-(t.w_size-ct):0,l=t.window,o=t.w_mask,d=t.prev,u=t.strstart+ft,f=l[i+s-1],c=l[i+s];t.prev_length>=t.good_match&&(r>>=2),_>t.lookahead&&(_=t.lookahead);do{if(l[(a=e)+s]===c&&l[a+s-1]===f&&l[a]===l[i]&&l[++a]===l[i+1]){i+=2,a++;do{}while(l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&l[++i]===l[++a]&&i<u);if(n=ft-(u-i),i=u-ft,n>s){if(t.match_start=e,s=n,n>=_)break;f=l[i+s-1],c=l[i+s]}}}while((e=d[e&o])>h&&0!=--r);return s<=t.lookahead?s:t.lookahead},Zt=function(t){var e,a,n,r,i,s,_,h,l,o,d=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-ct)){t.window.set(t.window.subarray(d,d+d),0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--a);e=a=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--a);r+=d}if(0===t.strm.avail_in)break;if(s=t.strm,_=t.window,h=t.strstart+t.lookahead,l=r,o=void 0,(o=s.avail_in)>l&&(o=l),a=0===o?0:(s.avail_in-=o,_.set(s.input.subarray(s.next_in,s.next_in+o),h),1===s.state.wrap?s.adler=C(s.adler,_,o,h):2===s.state.wrap&&(s.adler=M(s.adler,_,o,h)),s.next_in+=o,s.total_in+=o,o),t.lookahead+=a,t.lookahead+t.insert>=3)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=yt(t,t.ins_h,t.window[i+1]);t.insert&&(t.ins_h=yt(t,t.ins_h,t.window[i+3-1]),t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<ct&&0!==t.strm.avail_in)},Ut=function(t,e){for(var a,n;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a)),t.match_length>=3)if(n=X(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=yt(t,t.ins_h,t.window[t.strstart+1]);else n=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2},St=function(t,e){for(var a,n,r;;){if(t.lookahead<ct){if(Zt(t),t.lookahead<ct&&e===q)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ct&&(t.match_length=Et(t,a),t.match_length<=5&&(t.strategy===st||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,n=X(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=yt(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(zt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=X(t,0,t.window[t.strstart-1]))&&zt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=X(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2};function Rt(t,e,a,n,r){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=r}var Lt=[new Rt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Zt(t),0===t.lookahead&&e===q)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,zt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-ct&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(zt(t,!1),t.strm.avail_out),1)})),new Rt(4,4,8,4,Ut),new Rt(4,5,16,8,Ut),new Rt(4,6,32,32,Ut),new Rt(4,4,16,16,St),new Rt(8,16,32,32,St),new Rt(8,16,128,128,St),new Rt(8,32,128,256,St),new Rt(32,128,258,1024,St),new Rt(32,258,258,4096,St)];function Ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ut,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),mt(this.dyn_ltree),mt(this.dyn_dtree),mt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),mt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),mt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Tt=function(t){if(!t||!t.state)return vt(t,at);t.total_in=t.total_out=0,t.data_type=dt;var e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:gt,t.adler=2===e.wrap?0:1,e.last_flush=q,P(e),tt},It=function(t){var e,a=Tt(t);return a===tt&&((e=t.state).window_size=2*e.w_size,mt(e.head),e.max_lazy_match=Lt[e.level].max_lazy,e.good_match=Lt[e.level].good_length,e.nice_match=Lt[e.level].nice_length,e.max_chain_length=Lt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),a},Nt=function(t,e,a,n,r,i){if(!t)return at;var s=1;if(e===it&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),r<1||r>9||a!==ut||n<8||n>15||e<0||e>9||i<0||i>lt)return vt(t,at);8===n&&(n=9);var _=new Ft;return t.state=_,_.strm=t,_.wrap=s,_.gzhead=null,_.w_bits=n,_.w_size=1<<_.w_bits,_.w_mask=_.w_size-1,_.hash_bits=r+7,_.hash_size=1<<_.hash_bits,_.hash_mask=_.hash_size-1,_.hash_shift=~~((_.hash_bits+3-1)/3),_.window=new Uint8Array(2*_.w_size),_.head=new Uint16Array(_.hash_size),_.prev=new Uint16Array(_.w_size),_.lit_bufsize=1<<r+6,_.pending_buf_size=4*_.lit_bufsize,_.pending_buf=new Uint8Array(_.pending_buf_size),_.d_buf=1*_.lit_bufsize,_.l_buf=3*_.lit_bufsize,_.level=e,_.strategy=i,_.method=a,It(t)},Ot={deflateInit:function(t,e){return Nt(t,e,ut,15,8,ot)},deflateInit2:Nt,deflateReset:It,deflateResetKeep:Tt,deflateSetHeader:function(t,e){return t&&t.state?2!==t.state.wrap?at:(t.state.gzhead=e,tt):at},deflate:function(t,e){var a,n;if(!t||!t.state||e>$||e<0)return t?vt(t,at):at;var r=t.state;if(!t.output||!t.input&&0!==t.avail_in||r.status===wt&&e!==V)return vt(t,0===t.avail_out?rt:at);r.strm=t;var i=r.last_flush;if(r.last_flush=e,42===r.status)if(2===r.wrap)t.adler=0,xt(r,31),xt(r,139),xt(r,8),r.gzhead?(xt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),xt(r,255&r.gzhead.time),xt(r,r.gzhead.time>>8&255),xt(r,r.gzhead.time>>16&255),xt(r,r.gzhead.time>>24&255),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(xt(r,255&r.gzhead.extra.length),xt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=M(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,0),xt(r,9===r.level?2:r.strategy>=_t||r.level<2?4:0),xt(r,3),r.status=gt);else{var s=ut+(r.w_bits-8<<4)<<8;s|=(r.strategy>=_t||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=gt,At(r,s),0!==r.strstart&&(At(r,t.adler>>>16),At(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending!==r.pending_buf_size));)xt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),kt(t),a=r.pending,r.pending===r.pending_buf_size)){n=1;break}n=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,xt(r,n)}while(0!==n);r.gzhead.hcrc&&r.pending>a&&(t.adler=M(t.adler,r.pending_buf,r.pending-a,a)),0===n&&(r.status=pt)}else r.status=pt;if(r.status===pt&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&kt(t),r.pending+2<=r.pending_buf_size&&(xt(r,255&t.adler),xt(r,t.adler>>8&255),t.adler=0,r.status=gt)):r.status=gt),0!==r.pending){if(kt(t),0===t.avail_out)return r.last_flush=-1,tt}else if(0===t.avail_in&&bt(e)<=bt(i)&&e!==V)return vt(t,rt);if(r.status===wt&&0!==t.avail_in)return vt(t,rt);if(0!==t.avail_in||0!==r.lookahead||e!==q&&r.status!==wt){var _=r.strategy===_t?function(t,e){for(var a;;){if(0===t.lookahead&&(Zt(t),0===t.lookahead)){if(e===q)return 1;break}if(t.match_length=0,a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):r.strategy===ht?function(t,e){for(var a,n,r,i,s=t.window;;){if(t.lookahead<=ft){if(Zt(t),t.lookahead<=ft&&e===q)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[r=t.strstart-1])===s[++r]&&n===s[++r]&&n===s[++r]){i=t.strstart+ft;do{}while(n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&n===s[++r]&&r<i);t.match_length=ft-(i-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=X(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=X(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(zt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===V?(zt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(zt(t,!1),0===t.strm.avail_out)?1:2}(r,e):Lt[r.level].func(r,e);if(3!==_&&4!==_||(r.status=wt),1===_||3===_)return 0===t.avail_out&&(r.last_flush=-1),tt;if(2===_&&(e===J?W(r):e!==$&&(j(r,0,0,!1),e===Q&&(mt(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),kt(t),0===t.avail_out))return r.last_flush=-1,tt}return e!==V?tt:r.wrap<=0?et:(2===r.wrap?(xt(r,255&t.adler),xt(r,t.adler>>8&255),xt(r,t.adler>>16&255),xt(r,t.adler>>24&255),xt(r,255&t.total_in),xt(r,t.total_in>>8&255),xt(r,t.total_in>>16&255),xt(r,t.total_in>>24&255)):(At(r,t.adler>>>16),At(r,65535&t.adler)),kt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?tt:et)},deflateEnd:function(t){if(!t||!t.state)return at;var e=t.state.status;return 42!==e&&69!==e&&73!==e&&91!==e&&e!==pt&&e!==gt&&e!==wt?vt(t,at):(t.state=null,e===gt?vt(t,nt):tt)},deflateSetDictionary:function(t,e){var a=e.length;if(!t||!t.state)return at;var n=t.state,r=n.wrap;if(2===r||1===r&&42!==n.status||n.lookahead)return at;if(1===r&&(t.adler=C(t.adler,e,a,0)),n.wrap=0,a>=n.w_size){0===r&&(mt(n.head),n.strstart=0,n.block_start=0,n.insert=0);var i=new Uint8Array(n.w_size);i.set(e.subarray(a-n.w_size,a),0),e=i,a=n.w_size}var s=t.avail_in,_=t.next_in,h=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,Zt(n);n.lookahead>=3;){var l=n.strstart,o=n.lookahead-2;do{n.ins_h=yt(n,n.ins_h,n.window[l+3-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++}while(--o);n.strstart=l,n.lookahead=2,Zt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=_,t.input=h,t.avail_in=s,n.wrap=r,tt},deflateInfo:"pako deflate (from Nodeca project)"};for(var Dt=new Uint8Array(256),Bt=0;Bt<256;Bt++)Dt[Bt]=Bt>=252?6:Bt>=248?5:Bt>=240?4:Bt>=224?3:Bt>=192?2:1;Dt[254]=Dt[254]=1;var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},Ht=Object.prototype.toString,Mt=K.Z_NO_FLUSH,Yt=K.Z_SYNC_FLUSH,Kt=K.Z_FULL_FLUSH,Pt=K.Z_FINISH,jt=K.Z_OK,Gt=K.Z_STREAM_END,Xt=K.Z_DEFAULT_COMPRESSION,Wt=K.Z_DEFAULT_STRATEGY,qt=K.Z_DEFLATED;function Jt(){this.options={level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt};var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;var e=Ot.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(e!==jt)throw new Error(Y[e]);if(t.header&&Ot.deflateSetHeader(this.strm,t.header),t.dictionary){var a;if(a="[object ArrayBuffer]"===Ht.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(e=Ot.deflateSetDictionary(this.strm,a))!==jt)throw new Error(Y[e]);this._dict_set=!0}}function Qt(t,e,a){try{t.postMessage({type:"errored",error:e,streamId:a})}catch(n){t.postMessage({type:"errored",error:String(e),streamId:a})}}function Vt(t){var e=t.strm.adler;return new Uint8Array([3,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e])}Jt.prototype.push=function(t,e){var a,n,r=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=e===~~e?e:!0===e?Pt:Mt,"[object ArrayBuffer]"===Ht.call(t)?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(n===Yt||n===Kt)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if((a=Ot.deflate(r,n))===Gt)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Ot.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===jt;if(0!==r.avail_out){if(n>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===jt&&(this.result=function(t){for(var e=0,a=0,n=t.length;a<n;a++)e+=t[a].length;for(var r=new Uint8Array(e),i=0,s=0,_=t.length;i<_;i++){var h=t[i];r.set(h,s),s+=h.length}return r}(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(e){void 0===e&&(e=self);try{var a=new Map;e.addEventListener("message",(function(n){try{var r=function(e,a){switch(a.action){case"init":return{type:"initialized",version:"5.4.0"};case"write":var n=e.get(a.streamId);n||(n=new Jt,e.set(a.streamId,n));var r=n.chunks.length,i=function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var e,a,n,r,i,s=t.length,_=0;for(r=0;r<s;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),_+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(_),i=0,r=0;i<_;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(n=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(n-56320),r++),a<128?e[i++]=a:a<2048?(e[i++]=192|a>>>6,e[i++]=128|63&a):a<65536?(e[i++]=224|a>>>12,e[i++]=128|a>>>6&63,e[i++]=128|63&a):(e[i++]=240|a>>>18,e[i++]=128|a>>>12&63,e[i++]=128|a>>>6&63,e[i++]=128|63&a);return e}(a.data);return n.push(i,K.Z_SYNC_FLUSH),{type:"wrote",id:a.id,streamId:a.streamId,result:t(n.chunks.slice(r)),trailer:Vt(n),additionalBytesCount:i.length};case"reset":e.delete(a.streamId)}}(a,n.data);r&&e.postMessage(r)}catch(t){Qt(e,t,n.data&&"streamId"in n.data?n.data.streamId:void 0)}}))}catch(t){Qt(e,t)}}()}();'])))}var ee={status:0};function startDeflateWorker(n,r,o,s){switch(void 0===s&&(s=createDeflateWorker),0===ee.status&&doStartDeflateWorker(n,r,s),ee.status){case 1:return ee.initializationFailureCallbacks.push(o),ee.worker;case 3:return ee.worker}}function doStartDeflateWorker(n,r,o){void 0===o&&(o=createDeflateWorker);try{var s=o(n),u=addEventListener(n,s,"error",function(o){onError(n,r,o)}).stop,l=addEventListener(n,s,"message",function(o){var s=o.data;"errored"===s.type?onError(n,r,s.error,s.streamId):"initialized"===s.type&&onInitialized(s.version)}).stop;s.postMessage({action:"init"}),timer_setTimeout(function(){return onTimeout(r)},1e4),ee={status:1,worker:s,stop:function(){u(),l()},initializationFailureCallbacks:[]}}catch(o){onError(n,r,o)}}function onTimeout(n){1===ee.status&&(q.error("".concat(n," failed to start: a timeout occurred while initializing the Worker")),ee.initializationFailureCallbacks.forEach(function(n){return n()}),ee={status:2})}function onInitialized(n){1===ee.status&&(ee={status:3,worker:ee.worker,stop:ee.stop,version:n})}function onError(n,r,o,s){if(1===ee.status||0===ee.status){if(q.error("".concat(r," failed to start: an error occurred while creating the Worker:"),o),o instanceof Event||o instanceof Error&&isMessageCspRelated(o.message)){var u=void 0;u=n.workerUrl?"Please make sure the Worker URL ".concat(n.workerUrl," is correct and CSP is correctly configured."):"Please make sure CSP is correctly configured.",q.error("".concat(u," See documentation at https://docs.datadoghq.com/integrations/content_security_policy_logs/#use-csp-with-real-user-monitoring-and-session-replay"))}else addTelemetryError(o);1===ee.status&&ee.initializationFailureCallbacks.forEach(function(n){return n()}),ee={status:2}}else addTelemetryError(o,{worker_version:3===ee.status&&ee.version,stream_id:s})}function isMessageCspRelated(n){return includes(n,"Content Security Policy")||includes(n,"requires 'TrustedScriptURL'")}var en=makeRumPublicApi(startRum,function(n,r){if(canUseEventBridge()||!isBrowserSupported())return{start:noop,stop:noop,getReplayStats:function(){},onRumStart:noop,isRecording:function(){return!1},getSessionReplayLink:function(){}};var o={status:1},startStrategy=function(){o={status:1}},stopStrategy=function(){o={status:0}};return{start:function(){return startStrategy()},stop:function(){return stopStrategy()},getSessionReplayLink:function(n,r,s){return getSessionReplayLink(n,r,s,0!==o.status)},onRumStart:function(r,s,u,l,d){s.startSessionReplayRecordingManually&&(o={status:0}),r.subscribe(7,function(){(2===o.status||3===o.status)&&(stopStrategy(),o={status:1})}),r.subscribe(8,function(){1===o.status&&startStrategy()}),startStrategy=function(){var f=u.findTrackedSession();if(!f||!f.sessionReplayAllowed){o={status:1};return}2!==o.status&&3!==o.status&&(o={status:2},runOnReadyState(s,"interactive",function(){if(2===o.status){if(!d&&!(d=startDeflateWorker(s,"Datadog Session Replay",function(){stopStrategy()},void 0))){o={status:0};return}o={status:3,stopRecording:n(r,s,u,l,createDeflateEncoder(s,d,1)).stop}}}))},stopStrategy=function(){0!==o.status&&(3===o.status&&o.stopRecording(),o={status:0})},1===o.status&&startStrategy()},isRecording:function(){return 3===ee.status&&3===o.status},getReplayStats:function(n){return 3===ee.status?getReplayStats(n):void 0}}}(function(n,r,o,s,u,l){var d=l||createHttpRequest(r,r.sessionReplayEndpointBuilder,6e4,function(r){n.notify(12,{error:r}),addTelemetryDebug("Error reported to customer",{"error.message":r.message})}),f=startSegmentCollection(n,r,o,s,d,u),h=f.addRecord,g=f.stop,y=record({emit:h,configuration:r,lifeCycle:n}),b=y.stop,S=y.takeSubsequentFullSnapshot,_=y.flushMutations,w=n.subscribe(4,function(){_(),h({timestamp:timeStampNow(),type:tK.ViewEnd})}).unsubscribe,C=n.subscribe(2,function(n){S(n.startClocks.timeStamp)}).unsubscribe;return{stop:function(){w(),C(),b(),g()}}}),{startDeflateWorker:startDeflateWorker,createDeflateEncoder:createDeflateEncoder});defineGlobal(getGlobalObject(),"DD_RUM",en)},51762:function(n,r,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useReportWebVitals",{enumerable:!0,get:function(){return useReportWebVitals}});let s=o(46056),u=o(71325);function useReportWebVitals(n){(0,s.useEffect)(()=>{(0,u.onCLS)(n),(0,u.onFID)(n),(0,u.onLCP)(n),(0,u.onINP)(n),(0,u.onFCP)(n),(0,u.onTTFB)(n)},[n])}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),n.exports=r.default)},71325:function(n){var r,o,s,u,l,d,f,h,g,y,b,S,_,w,C,E,k,R,A,I,N,x,O,L,M,P,D,U,F,z,B,V,H,j,q,G,W,Z,K,Y,X,J,$,Q,tt,te;(r={}).d=function(n,o){for(var s in o)r.o(o,s)&&!r.o(n,s)&&Object.defineProperty(n,s,{enumerable:!0,get:o[s]})},r.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},void 0!==r&&(r.ab="//"),o={},r.r(o),r.d(o,{getCLS:function(){return O},getFCP:function(){return I},getFID:function(){return z},getINP:function(){return J},getLCP:function(){return Q},getTTFB:function(){return te},onCLS:function(){return O},onFCP:function(){return I},onFID:function(){return z},onINP:function(){return J},onLCP:function(){return Q},onTTFB:function(){return te}}),h=-1,g=function(n){addEventListener("pageshow",function(r){r.persisted&&(h=r.timeStamp,n(r))},!0)},y=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},b=function(){var n=y();return n&&n.activationStart||0},S=function(n,r){var o=y(),s="navigate";return h>=0?s="back-forward-cache":o&&(s=document.prerendering||b()>0?"prerender":o.type.replace(/_/g,"-")),{name:n,value:void 0===r?-1:r,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:s}},_=function(n,r,o){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var s=new PerformanceObserver(function(n){r(n.getEntries())});return s.observe(Object.assign({type:n,buffered:!0},o||{})),s}}catch(n){}},w=function(n,r){var T=function t(o){"pagehide"!==o.type&&"hidden"!==document.visibilityState||(n(o),r&&(removeEventListener("visibilitychange",t,!0),removeEventListener("pagehide",t,!0)))};addEventListener("visibilitychange",T,!0),addEventListener("pagehide",T,!0)},C=function(n,r,o,s){var u,l;return function(d){var f;r.value>=0&&(d||s)&&((l=r.value-(u||0))||void 0===u)&&(u=r.value,r.delta=l,r.rating=(f=r.value)>o[1]?"poor":f>o[0]?"needs-improvement":"good",n(r))}},E=-1,k=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},R=function(){w(function(n){E=n.timeStamp},!0)},A=function(){return E<0&&(E=k(),R(),g(function(){setTimeout(function(){E=k(),R()},0)})),{get firstHiddenTime(){return E}}},I=function(n,r){r=r||{};var o,s=[1800,3e3],u=A(),l=S("FCP"),c=function(n){n.forEach(function(n){"first-contentful-paint"===n.name&&(f&&f.disconnect(),n.startTime<u.firstHiddenTime&&(l.value=n.startTime-b(),l.entries.push(n),o(!0)))})},d=window.performance&&window.performance.getEntriesByName&&window.performance.getEntriesByName("first-contentful-paint")[0],f=d?null:_("paint",c);(d||f)&&(o=C(n,l,s,r.reportAllChanges),d&&c([d]),g(function(u){o=C(n,l=S("FCP"),s,r.reportAllChanges),requestAnimationFrame(function(){requestAnimationFrame(function(){l.value=performance.now()-u.timeStamp,o(!0)})})}))},N=!1,x=-1,O=function(n,r){r=r||{};var o=[.1,.25];N||(I(function(n){x=n.value}),N=!0);var s,i=function(r){x>-1&&n(r)},u=S("CLS",0),l=0,d=[],p=function(n){n.forEach(function(n){if(!n.hadRecentInput){var r=d[0],o=d[d.length-1];l&&n.startTime-o.startTime<1e3&&n.startTime-r.startTime<5e3?(l+=n.value,d.push(n)):(l=n.value,d=[n]),l>u.value&&(u.value=l,u.entries=d,s())}})},f=_("layout-shift",p);f&&(s=C(i,u,o,r.reportAllChanges),w(function(){p(f.takeRecords()),s(!0)}),g(function(){l=0,x=-1,s=C(i,u=S("CLS",0),o,r.reportAllChanges)}))},L={passive:!0,capture:!0},M=new Date,P=function(n,r){s||(s=r,u=n,l=new Date,F(removeEventListener),D())},D=function(){if(u>=0&&u<l-M){var n={entryType:"first-input",name:s.type,target:s.target,cancelable:s.cancelable,startTime:s.timeStamp,processingStart:s.timeStamp+u};d.forEach(function(r){r(n)}),d=[]}},U=function(n){if(n.cancelable){var r,o,s,u=(n.timeStamp>1e12?new Date:performance.now())-n.timeStamp;"pointerdown"==n.type?(r=function(){P(u,n),s()},o=function(){s()},s=function(){removeEventListener("pointerup",r,L),removeEventListener("pointercancel",o,L)},addEventListener("pointerup",r,L),addEventListener("pointercancel",o,L)):P(u,n)}},F=function(n){["mousedown","keydown","touchstart","pointerdown"].forEach(function(r){return n(r,U,L)})},z=function(n,r){r=r||{};var o,l=[100,300],f=A(),h=S("FID"),v=function(n){n.startTime<f.firstHiddenTime&&(h.value=n.processingStart-n.startTime,h.entries.push(n),o(!0))},m=function(n){n.forEach(v)},y=_("first-input",m);o=C(n,h,l,r.reportAllChanges),y&&w(function(){m(y.takeRecords()),y.disconnect()},!0),y&&g(function(){o=C(n,h=S("FID"),l,r.reportAllChanges),d=[],u=-1,s=null,F(addEventListener),d.push(v),D()})},B=0,V=1/0,H=0,j=function(n){n.forEach(function(n){n.interactionId&&(V=Math.min(V,n.interactionId),B=(H=Math.max(H,n.interactionId))?(H-V)/7+1:0)})},q=function(){return f?B:performance.interactionCount||0},G=function(){"interactionCount"in performance||f||(f=_("event",j,{type:"event",buffered:!0,durationThreshold:0}))},W=0,Z=function(){return q()-W},K=[],Y={},X=function(n){var r=K[K.length-1],o=Y[n.interactionId];if(o||K.length<10||n.duration>r.latency){if(o)o.entries.push(n),o.latency=Math.max(o.latency,n.duration);else{var s={id:n.interactionId,latency:n.duration,entries:[n]};Y[s.id]=s,K.push(s)}K.sort(function(n,r){return r.latency-n.latency}),K.splice(10).forEach(function(n){delete Y[n.id]})}},J=function(n,r){r=r||{};var o=[200,500];G();var s,u=S("INP"),a=function(n){n.forEach(function(n){n.interactionId&&X(n),"first-input"!==n.entryType||K.some(function(r){return r.entries.some(function(r){return n.duration===r.duration&&n.startTime===r.startTime})})||X(n)});var r,o=(r=Math.min(K.length-1,Math.floor(Z()/50)),K[r]);o&&o.latency!==u.value&&(u.value=o.latency,u.entries=o.entries,s())},l=_("event",a,{durationThreshold:r.durationThreshold||40});s=C(n,u,o,r.reportAllChanges),l&&(l.observe({type:"first-input",buffered:!0}),w(function(){a(l.takeRecords()),u.value<0&&Z()>0&&(u.value=0,u.entries=[]),s(!0)}),g(function(){K=[],W=q(),s=C(n,u=S("INP"),o,r.reportAllChanges)}))},$={},Q=function(n,r){r=r||{};var o,s=[2500,4e3],u=A(),l=S("LCP"),c=function(n){var r=n[n.length-1];if(r){var s=r.startTime-b();s<u.firstHiddenTime&&(l.value=s,l.entries=[r],o())}},d=_("largest-contentful-paint",c);if(d){o=C(n,l,s,r.reportAllChanges);var v=function(){$[l.id]||(c(d.takeRecords()),d.disconnect(),$[l.id]=!0,o(!0))};["keydown","click"].forEach(function(n){addEventListener(n,v,{once:!0,capture:!0})}),w(v,!0),g(function(u){o=C(n,l=S("LCP"),s,r.reportAllChanges),requestAnimationFrame(function(){requestAnimationFrame(function(){l.value=performance.now()-u.timeStamp,$[l.id]=!0,o(!0)})})})}},tt=function e(n){document.prerendering?addEventListener("prerenderingchange",function(){return e(n)},!0):"complete"!==document.readyState?addEventListener("load",function(){return e(n)},!0):setTimeout(n,0)},te=function(n,r){r=r||{};var o=[800,1800],s=S("TTFB"),u=C(n,s,o,r.reportAllChanges);tt(function(){var l=y();if(l){if(s.value=Math.max(l.responseStart-b(),0),s.value<0||s.value>performance.now())return;s.entries=[l],u(!0),g(function(){(u=C(n,s=S("TTFB",0),o,r.reportAllChanges))(!0)})}})},n.exports=o},95676:function(n,r,o){n.exports=o(51762)}}]);
//# sourceMappingURL=6506-23286e38fd52b488.js.map